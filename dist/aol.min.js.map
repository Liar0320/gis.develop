{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/map.component.ts","webpack:///external \"angular\"","webpack:///./src/components/layers/index.ts","webpack:///./src/components/styles/style.component.ts","webpack:///external \"ol.style\"","webpack:///./src/components/sources/source.component.ts","webpack:///external \"ol.source\"","webpack:///external \"ol.interaction\"","webpack:///external \"ol\"","webpack:///./src/components/layers/layer.component.ts","webpack:///./src/components/feature.component.ts","webpack:///external \"ol.layer\"","webpack:///./src/components/styles/circle.component.ts","webpack:///./src/components/view.component.ts","webpack:///./src/components/sources/index.ts","webpack:///./src/components/geometry.component.ts","webpack:///external \"ol.geom\"","webpack:///./src/components/styles/text.component.ts","webpack:///./src/index.ts","webpack:///./src/components/index.ts","webpack:///./src/components/sources/xyz.component.ts","webpack:///./src/components/layers/layertile.component.ts","webpack:///./src/components/layers/layervector.component.ts","webpack:///./src/components/layers/layergroup.component.ts","webpack:///./src/components/layers/layerwebgl.component.ts","webpack:///external \"ol.layer.WebGLPoints\"","webpack:///./src/components/sources/osmmaps.component.ts","webpack:///./src/components/sources/vector.component.ts","webpack:///./src/components/sources/cluster.component.ts","webpack:///./src/components/sources/tiledebug.component.ts","webpack:///./src/components/coordinate.component.ts","webpack:///external \"ol.proj\"","webpack:///./src/components/styles/index.ts","webpack:///./src/components/styles/stroke.component.ts","webpack:///./src/components/styles/fill.component.ts","webpack:///./src/components/styles/icon.component.ts","webpack:///./src/components/overlay.component.ts","webpack:///./src/components/interactions/index.ts","webpack:///./src/components/interactions/default.component.ts","webpack:///./src/components/interactions/modify.component.ts","webpack:///./src/components/interactions/select.component.ts","webpack:///./src/components/interactions/select.component.extend.ts","webpack:///external \"ol.events.condition\"","webpack:///./src/components/interactions/draganddrop.component.ts","webpack:///./src/components/interactions/draganddrop.component.extend.ts","webpack:///external \"ol.format\"","webpack:///./src/components/interactions/draw.component.ts","webpack:///./src/components/interactions/draw.component.extend.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","host","componentType","onDblClick","angular","noop","onPointerDrag","onPointerMove","onPostCompose","onPostRender","onPreCompose","onPropertyChange","onSingleClick","onClick","onMoveEnd","controls","interactions","this","$onInit","instance","Map","setTarget","on","event","MapComponent","component","bindings","pixelRatio","keyboardEventTarget","onPostcompose","onPostrender","onRenderComplete","controller","featureHost","layerVectorHost","Error","Style","setStyle","update","changed","$onDestroy","style","getStyle","Array","splice","indexOf","StyleComponent","aolStyleComponent","geometry","fill","image","stroke","text","zIndex","require","aolLayerVector","aolStyle","ol","setSource","_register","source","SourceComponent","sourceComponentConfig","attributions","attributionsCollapsible","interaction","layerGroupComponent","mapComponent","prerender","undefined","postrender","getLayers","push","remove","$onChanges","changes","properties","un","previousValue","currentValue","setProperties","LayerComponent","layerComponentConfig","opacity","visible","extent","minResolution","maxResolution","className","Feature","id","setId","addFeature","removeFeature","FeatureComponent","aolSourceVector","layer","radius","styleHost","$postLink","Circle","setImage","setRadius","styleCircleComponent","aolStyleCircleComponent","snapToPixel","aolStyleCircle","zoom","center","projection","zoomAnimation","View","setView","animate","setZoom","ViewComponent","constrainRotation","enableRotation","maxZoom","minZoom","resolution","resolutions","rotation","zoomFactor","LineString","setGeometry","GeometryLinestringComponent","aolGeometryLinestringComponent","aolGeometryLinestring","Point","GeometryPointComponent","aolGeometryPointComponent","aolGeometryPoint","Polygon","GeometryPolygonComponent","aolGeometryPolygonComponent","aolGeometryPolygon","geom","Text","setText","setFont","setOffsetX","setOffsetY","setScale","setRotation","setTextAlign","setTextBaseline","styleTextComponent","aolStyleTextComponent","font","maxAngle","offsetX","offsetY","overflow","placement","scale","rotateWithView","textAlign","textBaseline","backgroundFill","backgroundStroke","padding","aolStyleText","run","$log","$rootScope","log","map","click","console","arguments","pointermove","features","drawend","$apply","once","layerGroup","overlayer","msg","width","lineDash","lineDashOffset","miterLimit","styleCircle","styleIcon","src","styleText","JSON","stringify","reset","extend","parse","aolModule","aolLayerTile","aolLayerWebgl","aolLayerGroup","aolSourceXyz","aolSourceOsm","aolSourceCluster","aolSourceTiledebug","aolCoordinate","aolCollectionCoordinates","aolStyleStroke","aolStyleIcon","aolStyleFill","aolOverlay","aolInteractionDefaults","aolInteractionDraw","aolInteractionModify","aolInteractionSelect","aolInteractionDraganddrop","forEach","registerComponent","XYZ","SourceXYZComponent","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileGrid","tileLoadFunction","tilePixelRatio","tileSize","tileUrlFunction","url","urls","wrapX","transition","zDirection","Tile","LayerTileComponent","preload","useInterimTilesOnError","Vector","LayerVectorComponent","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","LayerGroupComponent","symbol","symbolType","size","color","offset","LayerWebglComponent","disableHitDetection","WebGLPoints","OSM","ngOnChanges","SourceOSMComponent","layerWebglHost","addFeatures","SourceVectorComponent","format","loader","overlaps","strategy","useSpatialIndex","Cluster","SourceClusterComponent","distance","geometryFunction","TileDebug","SourceTiledebugComponent","srid","geometryPointHost","viewHost","referenceProjection","referenceProjectionCode","transformedCoordinates","isNumber","x","y","getView","getProjection","getCode","transform","setCoordinates","setCenter","CoordinateComponent","geometryLinestring","geometryPolygon","coordinates","coordinate","CollectionCoordinatesComponent","aolCollectionCoordinatesComponent","proj","styleCircleHost","Stroke","setStroke","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","StrokeComponent","aolStrokeComponent","lineCap","lineJoin","styleTextHost","Fill","setFill","FillComponent","aolFillComponent","Icon","setOpacity","styleIconComponent","aolStyleIconComponent","anchor","anchorOrigin","anchorXUnits","anchorYUnits","img","offsetOrigin","imgSize","$element","element","Overlay","addOverlay","removeOverlay","OverlayComponent","position","positioning","stopEvent","insertFirst","autoPan","autoPanAnimation","autoPanMargin","addInteraction","removeInteraction","DefaultInteractionComponent","altShiftDragRotate","onFocusOnly","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","zoomDelta","zoomDuration","onModifyEnd","onModifyStart","onChange","onChangeActive","Modify","error","ModifyInteractionComponent","condition","deleteCondition","insertVertexCondition","pixelTolerance","onSelect","initCondition","Select","SelectInteractionExtend","SelectInteractionComponent","addCondition","layers","removeCondition","toggleCondition","multi","filter","conditionType","altKeyOnly","altShiftKeysOnly","doubleClick","focus","mouseActionButton","mouseOnly","noModifierKeys","penOnly","platformModifierKeyOnly","pointerMove","primaryAction","shiftKeyOnly","singleClick","targetNotEditable","touchOnly","events","onAddFeatures","decorate","DragAndDrop","DraganddropInteractionExtend","DraganddropInteractionComponent","formatConstructors","target","defaultFormat","GPX","GeoJSON","IGC","KML","TopoJSON","EsriJSON","GML","IIIFInfo","MVT","OWS","Polyline","WFS","WKT","WMSCapabilities","WMSGetFeatureInfo","WMTSCapabilities","child","getFormat","featureConlist","item","formatCon","onDrawEnd","onDrawStart","init","type","Draw","DrawInteractionExtend","DrawInteractionComponent","clickTolerance","dragVertexDelay","snapTolerance","stopClick","maxPoints","minPoints","finishCondition","geometryName","freehand","freehandCondition","__createRectangleParams","start","end"],"mappings":"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","file":"aol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","import * as angular from 'angular';\r\nimport { Map, MapBrowserEvent, MapEvent } from 'ol';\r\nimport RenderEvent from 'ol/render/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport Control from 'ol/control/Control';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport { MapOptions } from 'ol/PluggableMap';\r\n\r\nexport class MapComponent implements angular.IController, MapOptions {\r\n  public instance: Map;\r\n  public componentType: string = 'map';\r\n  public host: angular.IRootElementService;\r\n  private onDblClick: Function = angular.noop;\r\n  private onPointerDrag: Function = angular.noop;\r\n  private onPointerMove: Function = angular.noop;\r\n  private onPostCompose: Function = angular.noop;\r\n  private onPostRender: Function = angular.noop;\r\n  private onPreCompose: Function = angular.noop;\r\n  private onPropertyChange: Function = angular.noop;\r\n  private onSingleClick: Function = angular.noop;\r\n  private onClick: Function = angular.noop;\r\n  private onMoveEnd: Function = angular.noop;\r\n\r\n  controls: Control[] = [];\r\n  interactions: Interaction[] = [];\r\n\r\n  constructor(host: angular.IRootElementService) {\r\n    this.host = host;\r\n  }\r\n\r\n  $onInit() {\r\n    this.instance = new Map(this);\r\n    this.instance.setTarget(this.host[0]);\r\n    this.instance.on('click', (event: MapBrowserEvent) =>\r\n      this.onClick({ event }),\r\n    );\r\n    this.instance.on('dblclick', (event: MapBrowserEvent) =>\r\n      this.onDblClick({ event }),\r\n    );\r\n    this.instance.on('moveend', (event: MapEvent) => this.onMoveEnd({ event }));\r\n    this.instance.on('pointerdrag', (event: MapBrowserEvent) =>\r\n      this.onPointerDrag({ event }),\r\n    );\r\n    this.instance.on('pointermove', (event: MapBrowserEvent) =>\r\n      this.onPointerMove({ event }),\r\n    );\r\n    this.instance.on('postcompose', (event: RenderEvent) =>\r\n      this.onPostCompose({ event }),\r\n    );\r\n    this.instance.on('postrender', (event: MapEvent) =>\r\n      this.onPostRender({ event }),\r\n    );\r\n    this.instance.on('precompose', (event: RenderEvent) =>\r\n      this.onPreCompose({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('singleclick', (event: MapBrowserEvent) =>\r\n      this.onSingleClick({ event }),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //   <div  >\r\n  //     <ng-transclude id='ngolMap'></ng-transclude>\r\n  //     <div  data-tag=\"map\"></div>\r\n  //   </div>\r\n  // `,\r\n  // transclude: true,\r\n  bindings: {\r\n    pixelRatio: '<?',\r\n    keyboardEventTarget: '<?',\r\n    onClick: '&?',\r\n    onDblClick: '&?',\r\n    onMoveEnd: '&?',\r\n    onPointerDrag: '&?',\r\n    onPointerMove: '&?',\r\n    onPostcompose: '&?',\r\n    onPostrender: '&?',\r\n    onPreCompose: '&?',\r\n    onPropertyChange: '&?',\r\n    onRenderComplete: '&?',\r\n    onSingleClick: '&?',\r\n  },\r\n  controller: ['$element', MapComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolMap',\r\n  ...component,\r\n};\r\n","module.exports = angular;","// export * from './layer.component';\r\nexport * from './layertile.component';\r\nexport * from './layervector.component';\r\nexport * from './layergroup.component';\r\nexport * from './layerwebgl.component';\r\n","import { GeometryFunction } from 'ol/style/Style';\r\nimport aolFeature, { FeatureComponent } from '../feature.component';\r\nimport { aolLayerVector, LayerVectorComponent } from '../layers';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Fill, Image as ImageStyle, Stroke, Text, Style } from 'ol/style';\r\n// import { RenderFunction } from 'ol/layer/Layer';\r\n\r\nexport class StyleComponent implements ng.IController {\r\n  public componentType = 'style';\r\n  public instance: Style;\r\n\r\n  private host: LayerVectorComponent | FeatureComponent;\r\n\r\n  protected layerVectorHost: LayerVectorComponent;\r\n  protected featureHost: FeatureComponent;\r\n\r\n  geometry?: string | Geometry | GeometryFunction;\r\n  fill?: Fill;\r\n  image?: ImageStyle;\r\n  //   renderer?: RenderFunction;\r\n  stroke?: Stroke;\r\n  text?: Text;\r\n  zIndex?: number;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.featureHost) {\r\n      this.host = this.featureHost;\r\n    } else if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Style(this);\r\n    this.host.instance.setStyle(this.instance);\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n  // 因为在改变Stroke等属性值时style不会检查到变化，因此不会触发re-render\r\n  update() {\r\n    this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    let style = this.host.instance.getStyle();\r\n    if (style instanceof Array) {\r\n      style.splice(style.indexOf(this.instance), 1);\r\n    } else {\r\n      style = null;\r\n    }\r\n    this.host.instance.setStyle(style);\r\n  }\r\n\r\n  //   $onChanges(changes: ng.IOnChangesObject) {\r\n  //     if (this.instance) {\r\n  //       this.instance.setId(this.id);\r\n  //     }\r\n  //   }\r\n}\r\n\r\nvar aolStyleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    geometry: '<?',\r\n    fill: '<?',\r\n    image: '<?',\r\n    stroke: '<?',\r\n    text: '<?',\r\n    zIndex: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `?^${aolLayerVector.name}`,\r\n    featureHost: `?^${aolFeature.name}`,\r\n  },\r\n  controller: [StyleComponent],\r\n};\r\n\r\nexport const aolStyle = {\r\n  name: 'aolStyle',\r\n  ...aolStyleComponent,\r\n};\r\n","module.exports = ol.style;","import Source, { AttributionLike } from 'ol/source/Source';\r\nimport { LayerComponent } from '../layers/layer.component';\r\n\r\nexport class SourceComponent implements angular.IController {\r\n  public instance: Source;\r\n  public componentType: string = 'source';\r\n\r\n  protected host: LayerComponent;\r\n  //   protected raster: SourceRasterComponent\r\n\r\n  attributions: AttributionLike;\r\n  attributionsCollapsible: boolean;\r\n\r\n  //   constructor()\r\n  //   {}\r\n\r\n  $onDestroy() {\r\n    if (this.host) {\r\n      this.host.instance.setSource(null);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [];\r\n    // }\r\n  }\r\n\r\n  protected _register(source: Source) {\r\n    if (this.host) {\r\n      this.host.instance.setSource(source);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [source];\r\n    // }\r\n  }\r\n}\r\n\r\nexport const sourceComponentConfig = {\r\n  bindings: {\r\n    instance: '=?',\r\n    attributions: '<?',\r\n    attributionsCollapsible: '<?',\r\n  },\r\n};\r\n","module.exports = ol.source;","module.exports = ol.interaction;","module.exports = ol;","import Event from 'ol/events/Event';\r\nimport { Extent } from 'ol/extent';\r\nimport mapComponent, { MapComponent } from '../map.component';\r\nimport { LayerGroupComponent } from './layergroup.component';\r\n\r\nexport abstract class LayerComponent implements angular.IController {\r\n  public instance: any;\r\n  public componentType: string = 'layer';\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n  private layerGroupComponent: LayerGroupComponent;\r\n  private mapComponent: MapComponent;\r\n\r\n  className?: string;\r\n  opacity?: number;\r\n  visible?: boolean;\r\n  extent?: Extent;\r\n  zIndex?: number;\r\n  minResolution?: number;\r\n  maxResolution?: number;\r\n\r\n  prerender: (evt: Event) => void;\r\n  postrender: (evt: Event) => void;\r\n\r\n  $onInit() {\r\n    this.host = this.layerGroupComponent || this.mapComponent;\r\n\r\n    if (this.prerender !== null && this.prerender !== undefined) {\r\n      this.instance.on('prerender', this.prerender);\r\n    }\r\n    if (this.postrender !== null && this.postrender !== undefined) {\r\n      this.instance.on('postrender', this.postrender);\r\n    }\r\n    this.host.instance.getLayers().push(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.getLayers().remove(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'prerender':\r\n            this.instance.un('prerender', changes[key].previousValue);\r\n            this.instance.on('prerender', changes[key].currentValue);\r\n            break;\r\n          case 'postrender':\r\n            this.instance.un('postrender', changes[key].previousValue);\r\n            this.instance.on('postrender', changes[key].currentValue);\r\n            break;\r\n          case 'source':\r\n            this.instance.setSource(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-layer, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nexport const layerComponentConfig = {\r\n  bindings: {\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    className: '<?',\r\n    // preload:'<?',\r\n    prerender: '&?',\r\n    postrender: '&?',\r\n  },\r\n  require: {\r\n    mapComponent: `?^${mapComponent.name}`,\r\n    /**@FIXME:待修复 */\r\n    layerGroupComponent: `?^^aolLayerGroup`,\r\n  },\r\n};\r\n","import { Feature } from 'ol';\r\nimport { SourceVectorComponent, aolSourceVector } from './sources';\r\n\r\nexport class FeatureComponent implements ng.IController {\r\n  public componentType = 'feature';\r\n  public instance: Feature;\r\n  private host: SourceVectorComponent;\r\n\r\n  id: string | number | undefined;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = new Feature();\r\n    if (this.id !== undefined) {\r\n      this.instance.setId(this.id);\r\n    }\r\n    this.host.instance.addFeature(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeFeature(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (this.instance) {\r\n      this.instance.setId(this.id);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolSourceVector.name}`,\r\n  },\r\n  controller: ['$element', FeatureComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolFeature',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Fill, Circle, Stroke } from 'ol/style';\r\n\r\nexport class styleCircleComponent implements ng.IController {\r\n  public componentType = 'style-circle';\r\n  public instance: Circle;\r\n\r\n  private host: StyleComponent;\r\n\r\n  fill: Fill;\r\n  radius: number = 5;\r\n  snapToPixel: boolean;\r\n  stroke: Stroke;\r\n  // atlasManager: ;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-circle must be applied to a feature or a layer');\r\n    }\r\n  }\r\n\r\n  $postLink() {\r\n    this.instance = new Circle(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  update() {\r\n    if (!!this.instance) {\r\n      this.instance = new Circle(this);\r\n      this.host.instance.setImage(this.instance);\r\n      // this.instance.setRadius(this.radius);\r\n    }\r\n    this.host.update();\r\n    // this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['radius']) {\r\n      this.instance.setRadius(changes['radius'].currentValue);\r\n    }\r\n    // this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStyleCircleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    fill: '<?',\r\n    radius: '<?',\r\n    snapToPixel: '<?',\r\n    stroke: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleCircleComponent],\r\n};\r\n\r\nexport const aolStyleCircle = {\r\n  name: 'aolStyleCircle',\r\n  ...aolStyleCircleComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport { View } from 'ol';\r\nimport { Extent } from 'ol/extent';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport mapComponent, { MapComponent } from './map.component';\r\n\r\nexport class ViewComponent implements angular.IController {\r\n  public instance: View;\r\n  public componentType: string = 'view';\r\n  public host: MapComponent;\r\n\r\n  constrainRotation: boolean | number;\r\n  enableRotation: boolean;\r\n  extent: Extent;\r\n  maxResolution: number;\r\n  minResolution: number;\r\n  maxZoom: number;\r\n  minZoom: number;\r\n  resolution: number;\r\n  resolutions: number[];\r\n  rotation: number;\r\n  zoom: number = 11;\r\n  zoomFactor: number;\r\n  center: Coordinate = [104.06, 30.67];\r\n  projection: string = 'EPSG:4326';\r\n\r\n  zoomAnimation: Boolean = false;\r\n\r\n  // defaultGive() {\r\n  //   if (this.zoom === undefined) this.zoom = 1;\r\n  //   if (this.center === undefined) this.center = [104.06, 30.67];\r\n  //   if (this.projection === undefined) this.projection = 'EPSG:4326';\r\n  //   if (this.zoomAnimation === undefined) this.zoomAnimation = false;\r\n  // }\r\n\r\n  //   constructor(host: angular.IRootElementService) {}\r\n\r\n  $onInit() {\r\n    // this.defaultGive();\r\n    this.instance = new View(this);\r\n    this.host.instance.setView(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'zoom':\r\n            /** Work-around: setting the zoom via setProperties does not work. */\r\n            if (this.zoomAnimation) {\r\n              this.instance.animate({ zoom: changes[key].currentValue });\r\n            } else {\r\n              this.instance.setZoom(changes[key].currentValue);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    constrainRotation: '<?',\r\n    enableRotation: '<?',\r\n    extent: '<?',\r\n    maxResolution: '<?',\r\n    minResolution: '<?',\r\n    maxZoom: '<?',\r\n    minZoom: '<?',\r\n    resolution: '<?',\r\n    resolutions: '<?',\r\n    rotation: '<?',\r\n    zoom: '<',\r\n    zoomFactor: '<?',\r\n    center: '<?',\r\n    projection: '<?',\r\n    zoomAnimation: '<?',\r\n  },\r\n  require: {\r\n    host: `^${mapComponent.name}`,\r\n  },\r\n  controller: ['$element', ViewComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolView',\r\n  ...component,\r\n};\r\n","export * from './xyz.component';\r\nexport * from './osmmaps.component';\r\nexport * from './vector.component';\r\nexport * from './cluster.component';\r\n\r\nexport * from './tiledebug.component';\r\n","import aolFeature from './feature.component';\r\nimport { FeatureComponent } from './feature.component';\r\nimport { LineString, Point, Polygon } from 'ol/geom';\r\n\r\nexport class GeometryLinestringComponent implements ng.IController {\r\n  public componentType: string = 'geometry-linestring';\r\n  public instance: LineString;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('instancing aol-geometry-linestring');\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new LineString([]);\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\nvar aolGeometryLinestringComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryLinestringComponent],\r\n};\r\n\r\nexport const aolGeometryLinestring = {\r\n  name: 'aolGeometryLinestring',\r\n  ...aolGeometryLinestringComponent,\r\n};\r\n\r\nexport class GeometryPointComponent implements ng.IController {\r\n  public componentType: string = 'geometry-point';\r\n  public instance: Point;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-point');\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new Point([0, 0]); // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\n\r\nvar aolGeometryPointComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPointComponent],\r\n};\r\n\r\nexport const aolGeometryPoint = {\r\n  name: 'aolGeometryPoint',\r\n  ...aolGeometryPointComponent,\r\n};\r\n\r\nexport class GeometryPolygonComponent implements ng.IController {\r\n  public componentType: string = 'geometry-polygon';\r\n  public instance: Polygon;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-polygon');\r\n  //   }\r\n\r\n  $onInit() {\r\n    // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.instance = new Polygon([\r\n      [\r\n        [0, 0],\r\n        [1, 0],\r\n        [1, 1],\r\n      ],\r\n    ]);\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  //   $onDestroy() {\r\n  //     // this.host.setGeometry(null);\r\n  //   }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPolygonComponent],\r\n};\r\n\r\nexport const aolGeometryPolygon = {\r\n  name: 'aolGeometryPolygon',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n","module.exports = ol.geom;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Text';\r\nimport { Text } from 'ol/style';\r\nimport TextPlacement from 'ol/style/TextPlacement';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\n\r\nexport class styleTextComponent implements ng.IController, Options {\r\n  public componentType = 'style-text';\r\n  public instance: Text;\r\n\r\n  private host: StyleComponent;\r\n\r\n  font?: string;\r\n  maxAngle?: number;\r\n  offsetX?: number;\r\n  offsetY?: number;\r\n  overflow?: boolean;\r\n  placement?: TextPlacement | string;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  text?: string;\r\n  textAlign?: string;\r\n  textBaseline?: string;\r\n  fill?: Fill;\r\n  stroke?: Stroke;\r\n  backgroundFill?: Fill;\r\n  backgroundStroke?: Stroke;\r\n  padding?: number[];\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Text(this);\r\n    this.host.instance.setText(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setText(null);\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['font']) {\r\n      this.instance.setFont(changes['font'].currentValue);\r\n    }\r\n    if (changes['offsetX']) {\r\n      this.instance.setOffsetX(changes['offsetX'].currentValue);\r\n    }\r\n    if (changes['offsetY']) {\r\n      this.instance.setOffsetY(changes['offsetY'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['text']) {\r\n      this.instance.setText(changes['text'].currentValue);\r\n    }\r\n    if (changes['textAlign']) {\r\n      this.instance.setTextAlign(changes['textAlign'].currentValue);\r\n    }\r\n    if (changes['textBaseLine']) {\r\n      this.instance.setTextBaseline(changes['textBaseLine'].currentValue);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleTextComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    font: '<?',\r\n    maxAngle: '<?',\r\n    offsetX: '<?',\r\n    offsetY: '<?',\r\n    overflow: '<?',\r\n    placement: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    text: '<?',\r\n    textAlign: '<?',\r\n    textBaseline: '<?',\r\n    fill: '<?',\r\n    stroke: '<?',\r\n    backgroundFill: '<?',\r\n    backgroundStroke: '<?',\r\n    padding: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleTextComponent],\r\n};\r\n\r\nexport const aolStyleText = {\r\n  name: 'aolStyleText',\r\n  ...aolStyleTextComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolModule from './components/index';\r\n\r\nangular.module('app', [aolModule.name]).run([\r\n  '$log',\r\n  '$rootScope',\r\n  ($log: angular.ILogService, $rootScope: any) => {\r\n    $log.log('项目启动');\r\n    $rootScope.map = {\r\n      click() {\r\n        console.log(arguments);\r\n      },\r\n      pointermove() {\r\n        // console.log(arguments);\r\n      },\r\n      features: [],\r\n      interaction: {\r\n        drawend() {\r\n          console.log(arguments);\r\n          $rootScope.$apply(() => {\r\n            $rootScope.map.once = false;\r\n          });\r\n        },\r\n      },\r\n      once: true,\r\n      center: [120, 24],\r\n      zoom: 6,\r\n      layerGroup: {\r\n        visible: true,\r\n      },\r\n      overlayer: {\r\n        msg: '动态数据',\r\n      },\r\n      stroke: {\r\n        width: 10,\r\n        lineDash: [],\r\n        lineDashOffset: 5,\r\n        miterLimit: 50,\r\n      },\r\n      styleCircle: {\r\n        radius: 20,\r\n        fill: '#FF0000',\r\n      },\r\n      styleIcon: {\r\n        src:\r\n          'https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1583685507&di=98d05a81529c7f119d619e4d5b572634&src=http://bpic.588ku.com/element_origin_min_pic/01/37/42/75573c4c4c4c3c6.jpg',\r\n        opacity: 0.5,\r\n        scale: 0.08,\r\n        rotation: 1,\r\n      },\r\n      styleText: {\r\n        text: 'hello Word',\r\n        offsetY: -40,\r\n      },\r\n    };\r\n    $rootScope.property = JSON.stringify($rootScope.map);\r\n    $rootScope.reset = () => {\r\n      angular.extend($rootScope.map, JSON.parse($rootScope.property));\r\n    };\r\n  },\r\n]);\r\n","import * as angular from 'angular';\r\n\r\nimport mapComponent from './map.component';\r\nimport viewComponent from './view.component';\r\nimport aolFeature from './feature.component';\r\n\r\nimport {\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerGroup,\r\n  aolLayerWebgl,\r\n} from './layers/index';\r\nimport {\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n} from './sources/index';\r\nimport {\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport {\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n} from './coordinate.component';\r\nimport {\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleFill,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n} from './styles';\r\n\r\nimport { aolOverlay } from './overlay.component';\r\nimport {\r\n  aolInteractionDefaults,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n} from './interactions';\r\nimport { aolInteractionDraw } from './interactions/draw.component';\r\n\r\nvar aolModule = angular.module('aol', []);\r\nfunction registerComponent(component: any) {\r\n  aolModule.component(component.name, component);\r\n}\r\n\r\n[\r\n  mapComponent,\r\n  viewComponent,\r\n  /**图层组件 */\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerWebgl,\r\n  aolLayerGroup,\r\n  /**数据源组件 */\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n  /**要素组件 */\r\n  aolFeature,\r\n  /**geo组件 */\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n  /**坐标组件 */\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n  /**样式组件 */\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n  aolStyleFill,\r\n  /**domTOMap */\r\n  aolOverlay,\r\n  /**交互 */\r\n  aolInteractionDefaults,\r\n  aolInteractionDraw,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n].forEach(component => {\r\n  registerComponent(component);\r\n});\r\n\r\nexport default aolModule;\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { XYZ } from 'ol/source';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\nimport { LoadFunction, UrlFunction } from 'ol/Tile';\r\nimport { Size } from 'ol/size';\r\n\r\nexport class SourceXYZComponent extends SourceComponent\r\n  implements angular.IController {\r\n  public instance: XYZ;\r\n  public componentType: string = 'sourceXYZComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize: number;\r\n  crossOrigin: string;\r\n  opaque: boolean;\r\n  projection: string;\r\n  reprojectionErrorThreshold: number;\r\n  minZoom: number;\r\n  maxZoom: number;\r\n  tileGrid: TileGrid;\r\n  tileLoadFunction?: LoadFunction;\r\n  tilePixelRatio: number;\r\n  tileSize: number | Size;\r\n  tileUrlFunction: UrlFunction;\r\n  url: string;\r\n  urls: string[];\r\n  wrapX: boolean;\r\n  transition: number;\r\n  zDirection: number;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new XYZ(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url')) {\r\n      this.instance = new XYZ(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    projection: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    minZoom: '<?',\r\n    maxZoom: '<?',\r\n    tileGrid: '<?',\r\n    tileLoadFunction: '<?',\r\n    tilePixelRatio: '<?',\r\n    tileSize: '<?',\r\n    tileUrlFunction: '<?',\r\n    url: '<?',\r\n    urls: '<?',\r\n    wrapX: '<?',\r\n    transition: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: ['$element', SourceXYZComponent],\r\n};\r\n\r\nexport const aolSourceXyz = {\r\n  name: 'aolSourceXyz',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Tile as TileLayer } from 'ol/layer';\r\n\r\nexport class LayerTileComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: TileLayer;\r\n\r\n  preload: number;\r\n  useInterimTilesOnError: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new TileLayer(this);\r\n    super.$onInit();\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    preload: '<?',\r\n    useInterimTilesOnError: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerTileComponent],\r\n};\r\n\r\nexport const aolLayerTile = {\r\n  name: 'aolLayerTile',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { OrderFunction } from 'ol/render';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { StyleLike } from 'ol/style/Style';\r\n// import { Feature } from 'ol';\r\n// import Point from 'ol/geom/Point';\r\n\r\nexport class LayerVectorComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: VectorLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  renderOrder?: OrderFunction;\r\n  renderBuffer?: number;\r\n  source?: VectorSource<Geometry>;\r\n  declutter?: boolean;\r\n  style?: StyleLike;\r\n  updateWhileAnimating?: boolean;\r\n  updateWhileInteracting?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new VectorLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    renderOrder: '<?',\r\n    renderBuffer: '<?',\r\n    source: '<?',\r\n    declutter: '<?',\r\n    style: '<?',\r\n    updateWhileAnimating: '<?',\r\n    updateWhileInteracting: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerVectorComponent],\r\n};\r\n\r\nexport const aolLayerVector = {\r\n  name: 'aolLayerVector',\r\n  ...component,\r\n};\r\n","import { layerComponentConfig, LayerComponent } from './layer.component';\r\nimport { Options } from 'ol/layer/Group';\r\nimport { Group as LayerGroup } from 'ol/layer';\r\nimport { MapComponent } from '../map.component';\r\n\r\nexport class LayerGroupComponent extends LayerComponent\r\n  implements ng.IController, Options {\r\n  public componentType: string = 'LayerGroupComponent';\r\n  public instance: LayerGroup;\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n\r\n  $onInit() {\r\n    // console.log(`creating ol.layer.Group instance with:`, this);\r\n    this.instance = new LayerGroup(this);\r\n    super.$onInit();\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerGroupComponent],\r\n};\r\n\r\nexport const aolLayerGroup = {\r\n  name: 'aolLayerGroup',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport WebGLPointsLayer from 'ol/layer/WebGLPoints';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { LiteralStyle, SymbolType } from 'ol/style/LiteralStyle';\r\n\r\nexport class LayerWebglComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: WebGLPointsLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  style: any | LiteralStyle = {\r\n    symbol: {\r\n      symbolType: 'circle',\r\n      size: 6,\r\n      color: '#CD853F',\r\n      // [\r\n      //   \"interpolate\",\r\n      //   [\"linear\"],\r\n      //   [\"get\", \"webgltype\"],\r\n      //   \"00\",\r\n      //   \"#CD853F\",\r\n      //   \"01\", // 客船\r\n      //   \"#B0C4DE\",\r\n      //   \"02\", // 货船\r\n      //   \"#08B012\",\r\n      //   \"03\", // 液货船\r\n      //   \"#EA1600\",\r\n      //   \"04\", // 工程船\r\n      //   \"#FF8C00\",\r\n      //   \"05\", // 工作船\r\n      //   \"#D00BC5\",\r\n      //   \"06\", // 拖船\r\n      //   \"#2CD9DC\",\r\n      //   \"0909\", // 游艇\r\n      //   \"#00D28E\",\r\n      //   \"0905\", // 公务船\r\n      //   \"#F5F5F5\",\r\n      //   \"0903\", // 救助船\r\n      //   \"#FFFF00\",\r\n      //   \"90\", // 渔船\r\n      //   \"#1F4EC2\"\r\n      //   // \"09\", // 其他\r\n      // ],\r\n      // rotateWithView: false,\r\n      offset: [0, 0],\r\n    },\r\n  };\r\n  source?: VectorSource<Geometry>;\r\n  disableHitDetection?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new WebGLPointsLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    style: '<?',\r\n    className: '<?',\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    source: '<?',\r\n    disableHitDetection: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerWebglComponent],\r\n};\r\n\r\nexport const aolLayerWebgl = {\r\n  name: 'aolLayerWebgl',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer.WebGLPoints;","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { OSM } from 'ol/source';\r\nimport { LoadFunction } from 'ol/Tile';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\n\r\nexport class SourceOSMComponent extends SourceComponent\r\n  implements ng.IController {\r\n  public instance: OSM;\r\n  public componentType: string = 'SourceOSMComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  maxZoom?: number;\r\n  opaque?: boolean;\r\n  reprojectionErrorThreshold?: number;\r\n  tileLoadFunction?: LoadFunction;\r\n  url?: string;\r\n  wrapX?: boolean;\r\n\r\n  $onInit() {\r\n    this.instance = new OSM(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url')) {\r\n      this.instance = new OSM(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    maxZoom: '<?',\r\n    tileLoadFunction: '<?',\r\n    url: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceOSMComponent],\r\n};\r\n\r\nexport const aolSourceOsm = {\r\n  name: 'aolSourceOsm',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport {\r\n  aolLayerVector,\r\n  LayerVectorComponent,\r\n  LayerGroupComponent,\r\n  aolLayerWebgl,\r\n} from '../layers';\r\nimport { LoadingStrategy } from 'ol/source/Vector';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Feature, Collection } from 'ol';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { FeatureLoader, FeatureUrlFunction } from 'ol/featureloader';\r\n\r\nexport class SourceVectorComponent extends SourceComponent\r\n  implements angular.IController {\r\n  public instance: VectorSource;\r\n  public componentType: string = 'SourceVectorComponent';\r\n  public host: LayerVectorComponent | LayerGroupComponent;\r\n  public layerVectorHost: LayerVectorComponent;\r\n  public layerWebglHost: LayerGroupComponent;\r\n\r\n  features?: Feature<Geometry>[] | Collection<Feature<Geometry>>;\r\n  format?: FeatureFormat;\r\n  loader?: FeatureLoader;\r\n  overlaps?: boolean;\r\n  strategy?: LoadingStrategy;\r\n  url?: string | FeatureUrlFunction;\r\n  useSpatialIndex?: boolean;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else if (this.layerWebglHost) {\r\n      this.host = this.layerWebglHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-source-vector must be applied to a Style or layerWebglHost or layerVectorHost component',\r\n      );\r\n    }\r\n\r\n    this.instance = new VectorSource(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'features':\r\n            this.instance.addFeatures(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    // if (changes.hasOwnProperty('url')) {\r\n    //   this.instance = new VectorSource(this);\r\n    //   this._register(this.instance);\r\n    // }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    features: '<?',\r\n    format: '<?',\r\n    loader: '<?',\r\n    overlaps: '<?',\r\n    strategy: '<?',\r\n    url: '<?',\r\n    useSpatialIndex: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `^?${aolLayerVector.name}`,\r\n    layerWebglHost: `^?${aolLayerWebgl.name}`,\r\n  },\r\n  controller: [SourceVectorComponent],\r\n};\r\n\r\nexport const aolSourceVector = {\r\n  name: 'aolSourceVector',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from \"./source.component\";\r\nimport { Cluster  } from \"ol/source\";\r\nimport { Options  } from \"ol/source/Cluster\";\r\nimport { Feature } from \"ol\";\r\nimport { Geometry, Point } from \"ol/geom\";\r\nimport { Vector } from \"ol/source\";\r\nimport { LayerVectorComponent, aolLayerVector } from \"../layers\";\r\n\r\nexport class SourceClusterComponent extends SourceComponent\r\n  implements angular.IController , Options {\r\n  public instance: Cluster;\r\n  public componentType: string = 'SourceClusterComponent';\r\n  public host: LayerVectorComponent;\r\n\r\n  distance?: number;\r\n  geometryFunction?: (p0: Feature<Geometry>) => Point;\r\n  source: Vector<Geometry>;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if(!this.source) return ;\r\n    this.instance = new Cluster(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('source')) {\r\n      this.$onDestroy();\r\n      this.instance = new Cluster(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    distance: '<?',\r\n    geometryFunction: '<?',\r\n    source: '<',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerVector.name}`,\r\n  },\r\n  controller: ['$element', SourceClusterComponent],\r\n};\r\n\r\n\r\nexport const aolSourceCluster = {\r\n  name: 'aolSourceCluster',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { TileDebug } from 'ol/source';\r\nimport { Options } from 'ol/source/TileDebug';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\n\r\nexport class SourceTiledebugComponent extends SourceComponent\r\n  implements ng.IController, Options {\r\n  public instance: TileDebug;\r\n  public componentType: string = 'SourceTiledebugComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  projection?: ProjectionLike;\r\n  tileGrid?: TileGrid;\r\n  wrapX?: boolean;\r\n  zDirection?: number;\r\n\r\n  $onInit() {\r\n    this.instance = new TileDebug(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    projection: '<?',\r\n    tileGrid: '<?',\r\n    wrapX: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceTiledebugComponent],\r\n};\r\n\r\nexport const aolSourceTiledebug = {\r\n  name: 'aolSourceTiledebug',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { MapComponent } from './map.component';\r\nimport { ViewComponent } from './view.component';\r\nimport {\r\n  GeometryPointComponent,\r\n  aolGeometryPoint,\r\n  GeometryLinestringComponent,\r\n  GeometryPolygonComponent,\r\n  aolGeometryLinestring,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport Projection from 'ol/proj/Projection';\r\nimport { transform } from 'ol/proj';\r\nimport aolView from './view.component';\r\nimport aolMap from './map.component';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\nexport class CoordinateComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private viewHost?: ViewComponent;\r\n  private geometryPointHost?: GeometryPointComponent;\r\n  // private overlayHost?:GeometryPointComponent;\r\n\r\n  x: number;\r\n  y: number;\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    if (this.geometryPointHost) {\r\n      this.host = this.geometryPointHost;\r\n    } else if (this.viewHost) {\r\n      this.host = this.viewHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n    //    else if (overlayHost !== null) {\r\n    //     this.host = overlayHost;\r\n    //   }\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !angular.isNumber(this.x) || !angular.isNumber(this.y))\r\n      return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: number[];\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = [this.x, this.y];\r\n    } else {\r\n      transformedCoordinates = transform(\r\n        [this.x, this.y],\r\n        this.srid,\r\n        referenceProjectionCode,\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-point':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'view':\r\n        this.host.instance.setCenter(transformedCoordinates);\r\n        break;\r\n      // case \"overlay\":\r\n      //   this.host.instance.setPosition(transformedCoordinates);\r\n      //   break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    x: '<',\r\n    y: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    viewHost: `?^${aolView.name}`,\r\n    geometryPointHost: `?^${aolGeometryPoint.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CoordinateComponent],\r\n};\r\n\r\nexport const aolCoordinate = {\r\n  name: 'aolCoordinate',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n\r\nexport class CollectionCoordinatesComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private geometryLinestring?: GeometryLinestringComponent;\r\n  private geometryPolygon?: GeometryPolygonComponent;\r\n\r\n  coordinates: [number, number][];\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    // console.log('creating aol-collection-coordinates');\r\n    if (!!this.geometryLinestring) {\r\n      this.host = this.geometryLinestring;\r\n    } else if (!!this.geometryPolygon) {\r\n      this.host = this.geometryPolygon;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !(this.coordinates instanceof Array)) return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: Array<Coordinate>;\r\n\r\n    // console.log('coordinates change: ', this.coordinates);\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = this.coordinates;\r\n    } else {\r\n      transformedCoordinates = [];\r\n      this.coordinates.forEach(\r\n        function(coordinate: Coordinate) {\r\n          transformedCoordinates.push(\r\n            transform(coordinate, this.srid, referenceProjectionCode),\r\n          );\r\n        }.bind(this),\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-linestring':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'geometry-polygon':\r\n        this.host.instance.setCoordinates([transformedCoordinates]);\r\n        break;\r\n      default:\r\n        throw new Error(\r\n          \"aol-collection-coordinates' host is of unknown type: \" +\r\n            this.host.componentType,\r\n        );\r\n      // break;\r\n    }\r\n  }\r\n}\r\n\r\nconst aolCollectionCoordinatesComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    coordinates: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    geometryPolygon: `?^${aolGeometryPolygon.name}`,\r\n    geometryLinestring: `?^${aolGeometryLinestring.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CollectionCoordinatesComponent],\r\n};\r\n\r\nexport const aolCollectionCoordinates = {\r\n  name: 'aolCollectionCoordinates',\r\n  ...aolCollectionCoordinatesComponent,\r\n};\r\n","module.exports = ol.proj;","export * from \"./style.component\";\r\nexport * from \"./stroke.component\";\r\nexport * from \"./fill.component\";\r\nexport * from \"./circle.component\";\r\nexport * from \"./icon.component\";\r\nexport * from \"./text.component\";","import { Options } from 'ol/style/Stroke';\r\nimport { Stroke } from 'ol/style';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\n\r\nexport class StrokeComponent implements ng.IController, Options {\r\n  public componentType = 'style-stroke';\r\n  public instance: Stroke;\r\n\r\n  private host: any; // StyleComponent | CircleComponent;\r\n\r\n  color?: Color | ColorLike;\r\n  lineCap?: CanvasLineCap;\r\n  lineJoin?: CanvasLineJoin;\r\n  lineDash?: number[];\r\n  lineDashOffset?: number;\r\n  miterLimit?: number;\r\n  width?: number;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n  protected styleCircleHost: styleCircleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Stroke(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = this.instance;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setStroke(null);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'color':\r\n            this.instance.setColor(changes[key].currentValue);\r\n            break;\r\n          case 'lineCap':\r\n            this.instance.setLineCap(changes[key].currentValue);\r\n            break;\r\n          case 'lineDash':\r\n            this.instance.setLineDash(changes[key].currentValue);\r\n            break;\r\n          case 'lineDashOffset':\r\n            this.instance.setLineDashOffset(changes[key].currentValue);\r\n            break;\r\n          case 'lineJoin':\r\n            this.instance.setLineJoin(changes[key].currentValue);\r\n            break;\r\n          case 'miterLimit':\r\n            this.instance.setMiterLimit(changes[key].currentValue);\r\n            break;\r\n          case 'width':\r\n            this.instance.setWidth(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStrokeComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n    lineCap: '<?',\r\n    lineJoin: '<?',\r\n    lineDash: '<?',\r\n    lineDashOffset: '<?',\r\n    miterLimit: '<?',\r\n    width: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n  },\r\n  controller: [StrokeComponent],\r\n};\r\n\r\nexport const aolStyleStroke = {\r\n  name: 'aolStyleStroke',\r\n  ...aolStrokeComponent,\r\n};\r\n","import { Options } from 'ol/style/Stroke';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { Fill } from 'ol/style';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\nimport { styleTextComponent, aolStyleText } from './text.component';\r\n\r\nexport class FillComponent implements ng.IController, Options {\r\n  public componentType = 'fill';\r\n  public instance: Fill;\r\n\r\n  private host: any; // StyleComponent;\r\n  private styleHost: StyleComponent;\r\n  private styleCircleHost: styleCircleComponent;\r\n  private styleTextHost: styleTextComponent;\r\n\r\n  color?: Color | ColorLike;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleTextHost) {\r\n      this.host = this.styleTextHost;\r\n    } else if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-style-fill must be applied to a Style or styleCircleHost or StyleText component',\r\n      );\r\n    }\r\n    this.instance = new Fill(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n  $onDestroy() {\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    // this.host.instance.setFill(new Fill({color:changes['color'].currentValue}))\r\n    this.instance = new Fill({ color: changes['color'].currentValue });\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolFillComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n    styleTextHost: `?^${aolStyleText.name}`,\r\n  },\r\n  controller: [FillComponent],\r\n};\r\n\r\nexport const aolStyleFill = {\r\n  name: 'aolStyleFill',\r\n  ...aolFillComponent,\r\n};\r\n","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Icon';\r\nimport { Icon } from 'ol/style';\r\nimport IconOrigin from 'ol/style/IconOrigin';\r\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits';\r\nimport { Color } from 'ol/color';\r\nimport { Size } from 'ol/size';\r\n\r\nexport class styleIconComponent implements ng.IController, Options {\r\n  public componentType = 'style-icon';\r\n  public instance: Icon;\r\n\r\n  private host: StyleComponent;\r\n\r\n  anchor?: number[];\r\n  anchorOrigin?: IconOrigin;\r\n  anchorXUnits?: IconAnchorUnits;\r\n  anchorYUnits?: IconAnchorUnits;\r\n  color?: Color | string;\r\n  crossOrigin?: string;\r\n  img?: HTMLImageElement | HTMLCanvasElement;\r\n  offset?: number[];\r\n  offsetOrigin?: IconOrigin;\r\n  opacity?: number;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  size?: Size;\r\n  imgSize?: Size;\r\n  src?: string;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Icon(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['opacity']) {\r\n      this.instance.setOpacity(changes['opacity'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['src']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleIconComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    anchor: '<?',\r\n    anchorOrigin: '<?',\r\n    anchorXUnits: '<?',\r\n    anchorYUnits: '<?',\r\n    color: '<?',\r\n    crossOrigin: '<?',\r\n    img: '<?',\r\n    offset: '<?',\r\n    offsetOrigin: '<?',\r\n    opacity: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    size: '<?',\r\n    imgSize: '<?',\r\n    src: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleIconComponent],\r\n};\r\n\r\nexport const aolStyleIcon = {\r\n  name: 'aolStyleIcon',\r\n  ...aolStyleIconComponent,\r\n};\r\n","import { Overlay } from 'ol';\r\nimport { Options, PanOptions } from 'ol/Overlay';\r\nimport OverlayPositioning from 'ol/OverlayPositioning';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport aolMap, { MapComponent } from './map.component';\r\n\r\nexport class OverlayComponent implements ng.IController, Options {\r\n  componentType = 'overlay';\r\n  private instance: Overlay;\r\n  protected host: MapComponent;\r\n\r\n  $element: ng.IRootElementService;\r\n\r\n  // element: Element;\r\n\r\n  id: number | string;\r\n  element: HTMLElement;\r\n  offset?: number[];\r\n  position?: Coordinate;\r\n  positioning?: OverlayPositioning;\r\n  stopEvent?: boolean;\r\n  insertFirst?: boolean;\r\n  autoPan?: boolean;\r\n  autoPanAnimation?: PanOptions;\r\n  autoPanMargin?: number;\r\n  className?: string;\r\n\r\n  constructor($element: ng.IRootElementService) {\r\n    this.$element = $element;\r\n  }\r\n\r\n  $onInit() {\r\n    /**@TODO: this.element , $element */\r\n    if (this.$element[0]) {\r\n      this.element = this.$element[0];\r\n      this.instance = new Overlay(this);\r\n      this.host.instance.addOverlay(this.instance);\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      properties[key] = changes[key].currentValue;\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    if (this.instance) {\r\n      this.host.instance.removeOverlay(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    element: '<?',\r\n    offset: '<?',\r\n    position: '<?',\r\n    positioning: '<?',\r\n    stopEvent: '<?',\r\n    insertFirst: '<?',\r\n    autoPan: '<?',\r\n    autoPanAnimation: '<?',\r\n    autoPanMargin: '<?',\r\n    className: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', OverlayComponent],\r\n};\r\n\r\nexport const aolOverlay = {\r\n  name: 'aolOverlay',\r\n  ...component,\r\n};\r\n","export * from './default.component';\r\nexport * from './modify.component';\r\nexport * from './select.component';\r\nexport * from './draganddrop.component';\r\n","import { Collection } from 'ol';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport {\r\n  defaults as defaultInteraction,\r\n  DefaultsOptions,\r\n} from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\n\r\nexport class DefaultInteractionComponent\r\n  implements ng.IController, DefaultsOptions {\r\n  instance: Collection<Interaction>;\r\n  private host: MapComponent;\r\n\r\n  altShiftDragRotate?: boolean;\r\n  onFocusOnly?: boolean;\r\n  doubleClickZoom?: boolean;\r\n  keyboard?: boolean;\r\n  mouseWheelZoom?: boolean;\r\n  shiftDragZoom?: boolean;\r\n  dragPan?: boolean;\r\n  pinchRotate?: boolean;\r\n  pinchZoom?: boolean;\r\n  zoomDelta?: number;\r\n  zoomDuration?: number;\r\n\r\n  //   constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = defaultInteraction(this);\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.addInteraction(interaction),\r\n    );\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.removeInteraction(interaction),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    altShiftDragRotate: '<?',\r\n    onFocusOnly: '<?',\r\n    doubleClickZoom: '<?',\r\n    keyboard: '<?',\r\n    mouseWheelZoom: '<?',\r\n    shiftDragZoom: '<?',\r\n    dragPan: '<?',\r\n    pinchRotate: '<?',\r\n    pinchZoom: '<?',\r\n    zoomDelta: '<?',\r\n    zoomDuration: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DefaultInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDefaults = {\r\n  name: 'aolInteractionDefaults',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Modify } from 'ol/interaction';\r\nimport { Options, ModifyEvent } from 'ol/interaction/Modify';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Collection, Feature } from 'ol';\r\n\r\nexport class ModifyInteractionComponent implements ng.IController, Options {\r\n  private instance: Modify;\r\n  protected host: MapComponent;\r\n\r\n  condition?: Condition;\r\n  deleteCondition?: Condition;\r\n  insertVertexCondition?: Condition;\r\n  pixelTolerance?: number;\r\n  style?: StyleLike;\r\n  source?: VectorSource<Geometry>;\r\n  features?: Collection<Feature<Geometry>>;\r\n  wrapX?: boolean;\r\n\r\n  onModifyEnd = angular.noop;\r\n  onModifyStart = angular.noop;\r\n  onChange = angular.noop;\r\n  onChangeActive = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.source && !this.features) {\r\n      console.error('The modify interaction requires features or a source');\r\n      return;\r\n    }\r\n    this.instance = new Modify(this);\r\n    this.instance.on('change', (event: ModifyEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('change:active', (event: ModifyEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ModifyEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('modifyend', (event: ModifyEvent) =>\r\n      this.onModifyEnd({ event }),\r\n    );\r\n    this.instance.on('modifystart', (event: ModifyEvent) =>\r\n      this.onModifyStart({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    condition: '<',\r\n    deleteCondition: '<?',\r\n    insertVertexCondition: '<?',\r\n    pixelTolerance: '<?',\r\n    style: '<?',\r\n    source: '<?',\r\n    features: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', ModifyInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionModify = {\r\n  name: 'aolInteractionModify',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { Select } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Options, FilterFunction, SelectEvent } from 'ol/interaction/Select';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { Source } from 'ol/source';\r\nimport { Layer } from 'ol/layer';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { SelectInteractionExtend } from './select.component.extend';\r\n\r\nexport class SelectInteractionComponent extends SelectInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Select;\r\n  protected host: MapComponent;\r\n\r\n  addCondition?: Condition;\r\n  condition?: Condition;\r\n  layers?: Layer<Source>[] | ((p0: Layer<Source>) => boolean);\r\n  style?: StyleLike;\r\n  removeCondition?: Condition;\r\n  toggleCondition?: Condition;\r\n  multi?: boolean;\r\n  features?: Collection<Feature<Geometry>>;\r\n  filter?: FilterFunction;\r\n  hitTolerance?: number;\r\n\r\n  onSelect = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The select interaction requires map component');\r\n      return;\r\n    }\r\n    super.initCondition();\r\n    this.instance = new Select(this);\r\n    this.instance.on('select', (event: SelectEvent) =>\r\n      this.onSelect({ event }),\r\n    );\r\n    this.instance.on('change', (event: SelectEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: SelectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    addCondition: '<',\r\n    condition: '<?',\r\n    layers: '<?',\r\n    style: '<?',\r\n    removeCondition: '<?',\r\n    toggleCondition: '<?',\r\n    multi: '<?',\r\n    features: '<?',\r\n    filter: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onSelect: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', SelectInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionSelect = {\r\n  name: 'aolInteractionSelect',\r\n  ...component,\r\n};\r\n","import {\r\n  Condition,\r\n  altKeyOnly,\r\n  altShiftKeysOnly,\r\n  click,\r\n  doubleClick,\r\n  mouseActionButton,\r\n  mouseOnly,\r\n  noModifierKeys,\r\n  penOnly,\r\n  focus,\r\n  platformModifierKeyOnly,\r\n  pointerMove,\r\n  primaryAction,\r\n  shiftKeyOnly,\r\n  singleClick,\r\n  targetNotEditable,\r\n  touchOnly,\r\n} from 'ol/events/condition';\r\n\r\n// var conditionType:\r\n//   | 'altKeyOnly'\r\n//   | 'altShiftKeysOnly'\r\n//   | 'click'\r\n//   | 'doubleClick'\r\n//   | 'focus'\r\n//   | 'mouseActionButton'\r\n//   | 'mouseOnly'\r\n//   | 'noModifierKeys'\r\n//   | 'penOnly'\r\n//   | 'platformModifierKeyOnly'\r\n//   | 'pointerMove'\r\n//   | 'primaryAction'\r\n//   | 'shiftKeyOnly'\r\n//   | 'singleClick'\r\n//   | 'targetNotEditable'\r\n//   | 'touchOnly';\r\n\r\nexport class SelectInteractionExtend {\r\n  condition?: Condition;\r\n  /**初始化condition状态 */\r\n  initCondition() {\r\n    var key: conditionType | Condition = this.condition;\r\n    if (typeof key === 'function') return key;\r\n    switch (key) {\r\n      case 'altKeyOnly':\r\n        this.condition = altKeyOnly;\r\n        break;\r\n      case 'altShiftKeysOnly':\r\n        this.condition = altShiftKeysOnly;\r\n        break;\r\n      case 'click':\r\n        this.condition = click;\r\n        break;\r\n      case 'doubleClick':\r\n        this.condition = doubleClick;\r\n        break;\r\n      case 'focus':\r\n        this.condition = focus;\r\n        break;\r\n      case 'mouseActionButton':\r\n        this.condition = mouseActionButton;\r\n        break;\r\n      case 'mouseOnly':\r\n        this.condition = mouseOnly;\r\n        break;\r\n      case 'noModifierKeys':\r\n        this.condition = noModifierKeys;\r\n        break;\r\n      case 'penOnly':\r\n        this.condition = penOnly;\r\n        break;\r\n      case 'platformModifierKeyOnly':\r\n        this.condition = platformModifierKeyOnly;\r\n        break;\r\n      case 'pointerMove':\r\n        this.condition = pointerMove;\r\n        break;\r\n      case 'primaryAction':\r\n        this.condition = primaryAction;\r\n        break;\r\n      case 'shiftKeyOnly':\r\n        this.condition = shiftKeyOnly;\r\n        break;\r\n      case 'singleClick':\r\n        this.condition = singleClick;\r\n        break;\r\n      case 'targetNotEditable':\r\n        this.condition = targetNotEditable;\r\n        break;\r\n      case 'touchOnly':\r\n        this.condition = touchOnly;\r\n        break;\r\n      default:\r\n        this.condition = click;\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nenum conditionType {\r\n  altKeyOnly = 'altKeyOnly',\r\n  altShiftKeysOnly = 'altShiftKeysOnly',\r\n  click = 'click',\r\n  doubleClick = 'doubleClick',\r\n  focus = 'focus',\r\n  mouseActionButton = 'mouseActionButton',\r\n  mouseOnly = 'mouseOnly',\r\n  noModifierKeys = 'noModifierKeys',\r\n  penOnly = 'penOnly',\r\n  platformModifierKeyOnly = 'platformModifierKeyOnly',\r\n  pointerMove = 'pointerMove',\r\n  primaryAction = 'primaryAction',\r\n  shiftKeyOnly = 'shiftKeyOnly',\r\n  singleClick = 'singleClick',\r\n  targetNotEditable = 'targetNotEditable',\r\n  touchOnly = 'touchOnly',\r\n}\r\n","module.exports = ol.events.condition;","import * as angular from 'angular';\r\nimport { Options, DragAndDropEvent } from 'ol/interaction/DragAndDrop';\r\nimport { DragAndDrop } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { Vector } from 'ol/source';\r\nimport { Geometry } from 'ol/geom';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { DraganddropInteractionExtend } from './draganddrop.component.extend';\r\n\r\nexport class DraganddropInteractionComponent\r\n  extends DraganddropInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: DragAndDrop;\r\n  protected host: MapComponent;\r\n\r\n  formatConstructors?: FeatureFormat[];\r\n  source?: Vector<Geometry>;\r\n  projection?: ProjectionLike;\r\n  target?: HTMLElement;\r\n\r\n  onAddFeatures = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The DragAndDrop interaction requires map component');\r\n      return;\r\n    }\r\n    super.decorate(this);\r\n    this.instance = new DragAndDrop(this);\r\n    this.instance.on('addfeatures', (event: DragAndDropEvent) =>\r\n      this.onAddFeatures({ event }),\r\n    );\r\n    this.instance.on('change', (event: BaseEvent) => this.onChange({ event }));\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    formatConstructors: '<',\r\n    source: '<?',\r\n    projection: '<?',\r\n    target: '<?',\r\n    onChange: '&?',\r\n    onAddFeatures: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: [DraganddropInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraganddrop = {\r\n  name: 'aolInteractionDraganddrop',\r\n  ...component,\r\n};\r\n","import { DraganddropInteractionComponent } from './draganddrop.component';\r\n// import FeatureFormat from 'ol/format/Feature';\r\nimport {\r\n  GPX,\r\n  GeoJSON,\r\n  IGC,\r\n  KML,\r\n  TopoJSON,\r\n  EsriJSON,\r\n  GML,\r\n  IIIFInfo,\r\n  MVT,\r\n  OWS,\r\n  Polyline,\r\n  WFS,\r\n  WKT,\r\n  WMSCapabilities,\r\n  WMSGetFeatureInfo,\r\n  WMTSCapabilities,\r\n} from 'ol/format';\r\n\r\nexport abstract class DraganddropInteractionExtend {\r\n  defaultFormat: { [index: string]: any } = {\r\n    GPX,\r\n    GeoJSON,\r\n    IGC,\r\n    KML,\r\n    TopoJSON,\r\n    EsriJSON,\r\n    GML,\r\n    IIIFInfo,\r\n    MVT,\r\n    OWS,\r\n    Polyline,\r\n    WFS,\r\n    WKT,\r\n    WMSCapabilities,\r\n    WMSGetFeatureInfo,\r\n    WMTSCapabilities,\r\n  };\r\n\r\n  decorate(child: DraganddropInteractionComponent) {\r\n    if (child.formatConstructors) {\r\n      child.formatConstructors = this.getFormat(child.formatConstructors);\r\n    }\r\n  }\r\n\r\n  getFormat(featureConlist: any[]) {\r\n    return featureConlist.map(item => {\r\n      //@FIXME: ol打包问题产生 && item instanceof FeatureFormat\r\n      if (typeof item === 'function') {\r\n        return item;\r\n      }\r\n      let formatCon = this.defaultFormat[item];\r\n      if (formatCon) {\r\n        return formatCon;\r\n      } else {\r\n        throw new Error('DragandDrop不存在当前FeatureFormat');\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = ol.format;","import * as angular from 'angular';\r\nimport { Options, GeometryFunction, DrawEvent } from 'ol/interaction/Draw';\r\nimport { Draw } from 'ol/interaction';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { DrawInteractionExtend } from './draw.component.extend';\r\n\r\nexport class DrawInteractionComponent extends DrawInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Draw;\r\n  protected host: MapComponent;\r\n\r\n  type: GeometryType;\r\n  clickTolerance?: number;\r\n  features?: Collection<Feature<Geometry>>;\r\n  source?: VectorSource<Geometry>;\r\n  dragVertexDelay?: number;\r\n  snapTolerance?: number;\r\n  stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  finishCondition?: Condition;\r\n  style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  geometryName?: string;\r\n  condition?: Condition;\r\n  freehand?: boolean;\r\n  freehandCondition?: Condition;\r\n  wrapX?: boolean;\r\n\r\n  public onChange = angular.noop;\r\n  public onChangeActive = angular.noop;\r\n  public onDrawEnd = angular.noop;\r\n  public onDrawStart = angular.noop;\r\n  public onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    super.init(this.type);\r\n    this.instance = new Draw(this);\r\n    this.instance.on('change', (event: DrawEvent) => this.onChange({ event }));\r\n    this.instance.on('change:active', (event: DrawEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('drawend', (event: DrawEvent) =>\r\n      this.onDrawEnd({ event }),\r\n    );\r\n    this.instance.on('drawstart', (event: DrawEvent) =>\r\n      this.onDrawStart({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: DrawEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    type: '<',\r\n    clickTolerance: '<?',\r\n    features: '<?',\r\n    source: '<?',\r\n    dragVertexDelay: '<?',\r\n    snapTolerance: '<?',\r\n    stopClick: '<?',\r\n    maxPoints: '<?',\r\n    minPoints: '<?',\r\n    finishCondition: '<?',\r\n    style: '<?',\r\n    geometryFunction: '<?',\r\n    geometryName: '<?',\r\n    condition: '<?',\r\n    freehand: '<?',\r\n    freehandCondition: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onChangeActive: '&?',\r\n    onDrawEnd: '&?',\r\n    onDrawStart: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DrawInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraw = {\r\n  name: 'aolInteractionDraw',\r\n  ...component,\r\n};\r\n","import GeometryType from 'ol/geom/GeometryType';\r\nimport { Options, GeometryFunction } from 'ol/interaction/Draw';\r\nimport { Polygon } from 'ol/geom';\r\n\r\nexport abstract class DrawInteractionExtend implements Options {\r\n  type: any;\r\n  // clickTolerance?: number;\r\n  // features?: Collection<Feature<Geometry>>;\r\n  // source?: VectorSource<Geometry>;\r\n  // dragVertexDelay?: number;\r\n  // snapTolerance?: number;\r\n  // stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  // finishCondition?: Condition;\r\n  // style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  // geometryName?: string;\r\n  // condition?: Condition;\r\n  // freehand?: boolean;\r\n  // freehandCondition?: Condition;\r\n  // wrapX?: boolean;\r\n\r\n  init(type: GeometryType | 'Rectangle') {\r\n    switch (type) {\r\n      case 'Rectangle':\r\n        this.__createRectangleParams();\r\n        break;\r\n      default:\r\n        this.type = type;\r\n        break;\r\n    }\r\n  }\r\n\r\n  __createRectangleParams() {\r\n    this.maxPoints = 2;\r\n    this.type = 'LineString';\r\n    this.geometryFunction = (coordinates: any, geometry) => {\r\n      //如果geometry对象不存在或者为空，则创建\r\n      if (!geometry) {\r\n        //多面几何图形下设置\r\n        geometry = new Polygon([]);\r\n      }\r\n      // 开始坐标\r\n      var start = coordinates[0];\r\n      // 结束坐标\r\n      var end = coordinates[1];\r\n      // 根据开始与结束坐标绘制,从起始点，回到起始点\r\n      geometry.setCoordinates([\r\n        [start, [start[0], end[1]], end, [end[0], start[1]], start],\r\n      ]);\r\n      // 返回几何图形坐标进行渲染\r\n      return geometry;\r\n    };\r\n  }\r\n}\r\n"],"sourceRoot":""}