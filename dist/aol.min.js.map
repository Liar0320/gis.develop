{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/map.component.ts","webpack:///external \"angular\"","webpack:///./src/core/layers/index.ts","webpack:///./src/core/sources/source.component.ts","webpack:///./src/core/styles/style.component.ts","webpack:///external \"ol.style\"","webpack:///external \"ol.source\"","webpack:///external \"ol.interaction\"","webpack:///external \"ol\"","webpack:///./src/core/layers/layer.component.ts","webpack:///./src/core/feature.component.ts","webpack:///external \"ol.layer\"","webpack:///./src/core/styles/circle.component.ts","webpack:///./src/core/view.component.ts","webpack:///./src/core/sources/index.ts","webpack:///./src/core/geometry.component.ts","webpack:///external \"ol.geom\"","webpack:///./src/core/styles/text.component.ts","webpack:///./src/index.ts","webpack:///./src/core/index.ts","webpack:///./src/core/sources/xyz.component.ts","webpack:///./src/core/layers/layertile.component.ts","webpack:///./src/core/layers/layervector.component.ts","webpack:///./src/core/layers/layergroup.component.ts","webpack:///./src/core/layers/layerwebgl.component.ts","webpack:///external \"ol.layer.WebGLPoints\"","webpack:///./src/core/sources/xyz.component.extend.ts","webpack:///./src/core/sources/osmmaps.component.ts","webpack:///./src/core/sources/vector.component.ts","webpack:///./src/core/sources/cluster.component.ts","webpack:///./src/core/sources/tiledebug.component.ts","webpack:///./src/core/coordinate.component.ts","webpack:///external \"ol.proj\"","webpack:///./src/core/styles/index.ts","webpack:///./src/core/styles/stroke.component.ts","webpack:///./src/core/styles/fill.component.ts","webpack:///./src/core/styles/icon.component.ts","webpack:///./src/core/overlay.component.ts","webpack:///./src/core/interactions/index.ts","webpack:///./src/core/interactions/default.component.ts","webpack:///./src/core/interactions/modify.component.ts","webpack:///./src/core/interactions/select.component.ts","webpack:///./src/core/interactions/select.component.extend.ts","webpack:///external \"ol.events.condition\"","webpack:///./src/core/interactions/draganddrop.component.ts","webpack:///./src/core/interactions/draganddrop.component.extend.ts","webpack:///external \"ol.format\"","webpack:///./src/core/interactions/draw.component.ts","webpack:///./src/core/interactions/draw.component.extend.ts","webpack:///./node_modules/ol/util.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/asserts.js","webpack:///./node_modules/ol/TileRange.js","webpack:///./node_modules/ol/array.js","webpack:///./node_modules/ol/extent.js","webpack:///./node_modules/ol/math.js","webpack:///./node_modules/ol/size.js","webpack:///./node_modules/ol/tilecoord.js","webpack:///./node_modules/ol/tilegrid/TileGrid.js","webpack:///./node_modules/ol/tilegrid/common.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","host","componentType","onDblClick","angular","noop","onPointerDrag","onPointerMove","onPostCompose","onPostRender","onPreCompose","onPropertyChange","onSingleClick","onClick","onMoveEnd","controls","interactions","this","$onInit","instance","Map","setTarget","on","event","MapComponent","component","bindings","pixelRatio","keyboardEventTarget","onPostcompose","onPostrender","onRenderComplete","controller","$onDestroy","setSource","_register","source","SourceComponent","sourceComponentConfig","attributions","attributionsCollapsible","featureHost","layerVectorHost","Error","Style","setStyle","update","changed","style","getStyle","Array","splice","indexOf","StyleComponent","aolStyleComponent","geometry","fill","image","stroke","text","zIndex","require","aolLayerVector","aolStyle","ol","interaction","layerGroupComponent","mapComponent","prerender","undefined","postrender","getLayers","push","remove","$onChanges","changes","properties","un","previousValue","currentValue","setProperties","LayerComponent","layerComponentConfig","opacity","visible","extent","minResolution","maxResolution","className","Feature","id","setId","addFeature","removeFeature","FeatureComponent","aolSourceVector","layer","radius","styleHost","$postLink","Circle","setImage","setRadius","styleCircleComponent","aolStyleCircleComponent","snapToPixel","aolStyleCircle","zoom","center","zoomAnimation","View","setView","animate","setZoom","ViewComponent","constrainRotation","enableRotation","maxZoom","minZoom","resolution","resolutions","rotation","zoomFactor","projection","change","LineString","setGeometry","GeometryLinestringComponent","aolGeometryLinestringComponent","aolGeometryLinestring","Point","GeometryPointComponent","aolGeometryPointComponent","aolGeometryPoint","Polygon","GeometryPolygonComponent","aolGeometryPolygonComponent","aolGeometryPolygon","geom","Text","setText","setFont","setOffsetX","setOffsetY","setScale","setRotation","setTextAlign","setTextBaseline","styleTextComponent","aolStyleTextComponent","font","maxAngle","offsetX","offsetY","overflow","placement","scale","rotateWithView","textAlign","textBaseline","backgroundFill","backgroundStroke","padding","aolStyleText","run","$log","$rootScope","log","map","click","console","arguments","pointermove","features","drawend","$apply","once","layerGroup","overlayer","msg","width","lineDash","lineDashOffset","miterLimit","styleCircle","styleIcon","src","styleText","JSON","stringify","reset","extend","parse","aolModule","aolLayerTile","aolLayerWebgl","aolLayerGroup","aolSourceXyz","aolSourceOsm","aolSourceCluster","aolSourceTiledebug","aolCoordinate","aolCollectionCoordinates","aolStyleStroke","aolStyleIcon","aolStyleFill","aolOverlay","aolInteractionDefaults","aolInteractionDraw","aolInteractionModify","aolInteractionSelect","aolInteractionDraganddrop","forEach","registerComponent","decorate","XYZ","SourceXYZExtend","SourceXYZComponent","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileGrid","tileLoadFunction","tilePixelRatio","tileSize","tileUrlFunction","url","urls","wrapX","transition","zDirection","Tile","LayerTileComponent","preload","useInterimTilesOnError","Vector","LayerVectorComponent","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","LayerGroupComponent","symbol","symbolType","size","color","offset","LayerWebglComponent","disableHitDetection","WebGLPoints","resolutions_4326","forEachTileCoord","OSM","ngOnChanges","SourceOSMComponent","layerWebglHost","addFeatures","SourceVectorComponent","format","loader","overlaps","strategy","useSpatialIndex","Cluster","SourceClusterComponent","distance","geometryFunction","TileDebug","SourceTiledebugComponent","srid","geometryPointHost","viewHost","referenceProjection","referenceProjectionCode","transformedCoordinates","isNumber","x","y","getView","getProjection","getCode","transform","setCoordinates","setCenter","CoordinateComponent","geometryLinestring","geometryPolygon","coordinates","coordinate","CollectionCoordinatesComponent","aolCollectionCoordinatesComponent","proj","styleCircleHost","Stroke","setStroke","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","StrokeComponent","aolStrokeComponent","lineCap","lineJoin","styleTextHost","Fill","setFill","FillComponent","aolFillComponent","Icon","setOpacity","styleIconComponent","aolStyleIconComponent","anchor","anchorOrigin","anchorXUnits","anchorYUnits","img","offsetOrigin","imgSize","$element","element","Overlay","addOverlay","removeOverlay","OverlayComponent","position","positioning","stopEvent","insertFirst","autoPan","autoPanAnimation","autoPanMargin","addInteraction","removeInteraction","DefaultInteractionComponent","altShiftDragRotate","onFocusOnly","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","zoomDelta","zoomDuration","onModifyEnd","onModifyStart","onChange","onChangeActive","Modify","error","ModifyInteractionComponent","condition","deleteCondition","insertVertexCondition","pixelTolerance","onSelect","initCondition","Select","SelectInteractionExtend","SelectInteractionComponent","addCondition","layers","removeCondition","toggleCondition","multi","filter","conditionType","altKeyOnly","altShiftKeysOnly","doubleClick","focus","mouseActionButton","mouseOnly","noModifierKeys","penOnly","platformModifierKeyOnly","pointerMove","primaryAction","shiftKeyOnly","singleClick","targetNotEditable","touchOnly","events","onAddFeatures","DragAndDrop","DraganddropInteractionExtend","DraganddropInteractionComponent","formatConstructors","target","defaultFormat","GPX","GeoJSON","IGC","KML","TopoJSON","EsriJSON","GML","IIIFInfo","MVT","OWS","Polyline","WFS","WKT","WMSCapabilities","WMSGetFeatureInfo","WMTSCapabilities","child","getFormat","featureConlist","item","formatCon","onDrawEnd","onDrawStart","init","type","Draw","DrawInteractionExtend","DrawInteractionComponent","clickTolerance","dragVertexDelay","snapTolerance","stopClick","maxPoints","minPoints","finishCondition","geometryName","freehand","freehandCondition","__createRectangleParams","start","end","extendStatics","__extends","b","setPrototypeOf","__proto__","__","constructor","_super","AssertionError","code","_this","message","split","assert","assertion","errorCode","TileRange","minX","maxX","minY","maxY","contains","tileCoord","containsXY","containsTileRange","tileRange","equals","getHeight","getSize","getWidth","intersects","createOrUpdate","numberSafeCompareFunction","a","opt_extent","getTopLeft","Math","cosh","toSize","opt_size","isArray","z","opt_tileCoord","tmpTileCoord","TileGrid","options","arr","opt_strict","compare","resolutions_","every","currentVal","index","res","origins","ii","length","zoomFactor_","origin_","origin","origins_","tileSizes_","tileSizes","tileSize_","extent_","fullTileRanges_","tmpSize_","sizes","min","max","calculateTileRanges_","callback","getTileRangeForExtentAndZ","j","jj","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","getTileCoordExtent","floor","getExtent","getMaxZoom","getMinZoom","getOrigin","getResolution","getResolutions","getTileCoordChildTileRange","getTileRangeExtent","getTileSize","getTileCoordForXYAndZ_","getTileCoordCenter","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","getZForResolution","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","ceil","getTileCoordForCoordAndZ","getTileCoordResolution","getFullTileRange","opt_direction","direction","linearFindNearest","fullTileRanges"],"mappings":"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","file":"aol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","import * as angular from 'angular';\r\nimport { Map, MapBrowserEvent, MapEvent } from 'ol';\r\nimport RenderEvent from 'ol/render/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport Control from 'ol/control/Control';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport { MapOptions } from 'ol/PluggableMap';\r\n\r\nexport class MapComponent implements angular.IController, MapOptions {\r\n  public instance: Map;\r\n  public componentType: string = 'map';\r\n  public host: angular.IRootElementService;\r\n  private onDblClick: Function = angular.noop;\r\n  private onPointerDrag: Function = angular.noop;\r\n  private onPointerMove: Function = angular.noop;\r\n  private onPostCompose: Function = angular.noop;\r\n  private onPostRender: Function = angular.noop;\r\n  private onPreCompose: Function = angular.noop;\r\n  private onPropertyChange: Function = angular.noop;\r\n  private onSingleClick: Function = angular.noop;\r\n  private onClick: Function = angular.noop;\r\n  private onMoveEnd: Function = angular.noop;\r\n\r\n  controls: Control[] = [];\r\n  interactions: Interaction[] = [];\r\n\r\n  constructor(host: angular.IRootElementService) {\r\n    this.host = host;\r\n  }\r\n\r\n  $onInit() {\r\n    this.instance = new Map(this);\r\n    this.instance.setTarget(this.host[0]);\r\n    this.instance.on('click', (event: MapBrowserEvent) =>\r\n      this.onClick({ event }),\r\n    );\r\n    this.instance.on('dblclick', (event: MapBrowserEvent) =>\r\n      this.onDblClick({ event }),\r\n    );\r\n    this.instance.on('moveend', (event: MapEvent) => this.onMoveEnd({ event }));\r\n    this.instance.on('pointerdrag', (event: MapBrowserEvent) =>\r\n      this.onPointerDrag({ event }),\r\n    );\r\n    this.instance.on('pointermove', (event: MapBrowserEvent) =>\r\n      this.onPointerMove({ event }),\r\n    );\r\n    this.instance.on('postcompose', (event: RenderEvent) =>\r\n      this.onPostCompose({ event }),\r\n    );\r\n    this.instance.on('postrender', (event: MapEvent) =>\r\n      this.onPostRender({ event }),\r\n    );\r\n    this.instance.on('precompose', (event: RenderEvent) =>\r\n      this.onPreCompose({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('singleclick', (event: MapBrowserEvent) =>\r\n      this.onSingleClick({ event }),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //   <div  >\r\n  //     <ng-transclude id='ngolMap'></ng-transclude>\r\n  //     <div  data-tag=\"map\"></div>\r\n  //   </div>\r\n  // `,\r\n  // transclude: true,\r\n  bindings: {\r\n    pixelRatio: '<?',\r\n    keyboardEventTarget: '<?',\r\n    onClick: '&?',\r\n    onDblClick: '&?',\r\n    onMoveEnd: '&?',\r\n    onPointerDrag: '&?',\r\n    onPointerMove: '&?',\r\n    onPostcompose: '&?',\r\n    onPostrender: '&?',\r\n    onPreCompose: '&?',\r\n    onPropertyChange: '&?',\r\n    onRenderComplete: '&?',\r\n    onSingleClick: '&?',\r\n  },\r\n  controller: ['$element', MapComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolMap',\r\n  ...component,\r\n};\r\n","module.exports = angular;","// export * from './layer.component';\r\nexport * from './layertile.component';\r\nexport * from './layervector.component';\r\nexport * from './layergroup.component';\r\nexport * from './layerwebgl.component';\r\n","import Source, { AttributionLike } from 'ol/source/Source';\r\nimport { LayerComponent } from '../layers/layer.component';\r\n\r\nexport class SourceComponent implements angular.IController {\r\n  public instance: Source;\r\n  public componentType: string = 'source';\r\n\r\n  protected host: LayerComponent;\r\n  //   protected raster: SourceRasterComponent\r\n\r\n  attributions: AttributionLike;\r\n  attributionsCollapsible: boolean;\r\n\r\n  //   constructor()\r\n  //   {}\r\n\r\n  $onDestroy() {\r\n    if (this.host) {\r\n      this.host.instance.setSource(null);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [];\r\n    // }\r\n  }\r\n\r\n  protected _register(source: Source) {\r\n    if (this.host) {\r\n      this.host.instance.setSource(source);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [source];\r\n    // }\r\n  }\r\n}\r\n\r\nexport const sourceComponentConfig = {\r\n  bindings: {\r\n    instance: '=?',\r\n    attributions: '<?',\r\n    attributionsCollapsible: '<?',\r\n  },\r\n};\r\n","import { GeometryFunction } from 'ol/style/Style';\r\nimport aolFeature, { FeatureComponent } from '../feature.component';\r\nimport { aolLayerVector, LayerVectorComponent } from '../layers';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Fill, Image as ImageStyle, Stroke, Text, Style } from 'ol/style';\r\n// import { RenderFunction } from 'ol/layer/Layer';\r\n\r\nexport class StyleComponent implements ng.IController {\r\n  public componentType = 'style';\r\n  public instance: Style;\r\n\r\n  private host: LayerVectorComponent | FeatureComponent;\r\n\r\n  protected layerVectorHost: LayerVectorComponent;\r\n  protected featureHost: FeatureComponent;\r\n\r\n  geometry?: string | Geometry | GeometryFunction;\r\n  fill?: Fill;\r\n  image?: ImageStyle;\r\n  //   renderer?: RenderFunction;\r\n  stroke?: Stroke;\r\n  text?: Text;\r\n  zIndex?: number;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.featureHost) {\r\n      this.host = this.featureHost;\r\n    } else if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Style(this);\r\n    this.host.instance.setStyle(this.instance);\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n  // 因为在改变Stroke等属性值时style不会检查到变化，因此不会触发re-render\r\n  update() {\r\n    this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    let style = this.host.instance.getStyle();\r\n    if (style instanceof Array) {\r\n      style.splice(style.indexOf(this.instance), 1);\r\n    } else {\r\n      style = null;\r\n    }\r\n    this.host.instance.setStyle(style);\r\n  }\r\n\r\n  //   $onChanges(changes: ng.IOnChangesObject) {\r\n  //     if (this.instance) {\r\n  //       this.instance.setId(this.id);\r\n  //     }\r\n  //   }\r\n}\r\n\r\nvar aolStyleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    geometry: '<?',\r\n    fill: '<?',\r\n    image: '<?',\r\n    stroke: '<?',\r\n    text: '<?',\r\n    zIndex: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `?^${aolLayerVector.name}`,\r\n    featureHost: `?^${aolFeature.name}`,\r\n  },\r\n  controller: [StyleComponent],\r\n};\r\n\r\nexport const aolStyle = {\r\n  name: 'aolStyle',\r\n  ...aolStyleComponent,\r\n};\r\n","module.exports = ol.style;","module.exports = ol.source;","module.exports = ol.interaction;","module.exports = ol;","import Event from 'ol/events/Event';\r\nimport { Extent } from 'ol/extent';\r\nimport mapComponent, { MapComponent } from '../map.component';\r\nimport { LayerGroupComponent } from './layergroup.component';\r\n\r\nexport abstract class LayerComponent implements angular.IController {\r\n  public instance: any;\r\n  public componentType: string = 'layer';\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n  private layerGroupComponent: LayerGroupComponent;\r\n  private mapComponent: MapComponent;\r\n\r\n  className?: string;\r\n  opacity?: number;\r\n  visible?: boolean;\r\n  extent?: Extent;\r\n  zIndex?: number;\r\n  minResolution?: number;\r\n  maxResolution?: number;\r\n\r\n  prerender: (evt: Event) => void;\r\n  postrender: (evt: Event) => void;\r\n\r\n  $onInit() {\r\n    this.host = this.layerGroupComponent || this.mapComponent;\r\n\r\n    if (this.prerender !== null && this.prerender !== undefined) {\r\n      this.instance.on('prerender', this.prerender);\r\n    }\r\n    if (this.postrender !== null && this.postrender !== undefined) {\r\n      this.instance.on('postrender', this.postrender);\r\n    }\r\n    this.host.instance.getLayers().push(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.getLayers().remove(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'prerender':\r\n            this.instance.un('prerender', changes[key].previousValue);\r\n            this.instance.on('prerender', changes[key].currentValue);\r\n            break;\r\n          case 'postrender':\r\n            this.instance.un('postrender', changes[key].previousValue);\r\n            this.instance.on('postrender', changes[key].currentValue);\r\n            break;\r\n          case 'source':\r\n            this.instance.setSource(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-layer, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nexport const layerComponentConfig = {\r\n  bindings: {\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    className: '<?',\r\n    // preload:'<?',\r\n    prerender: '&?',\r\n    postrender: '&?',\r\n  },\r\n  require: {\r\n    mapComponent: `?^${mapComponent.name}`,\r\n    /**@FIXME:待修复 */\r\n    layerGroupComponent: `?^^aolLayerGroup`,\r\n  },\r\n};\r\n","import { Feature } from 'ol';\r\nimport { SourceVectorComponent, aolSourceVector } from './sources';\r\n\r\nexport class FeatureComponent implements ng.IController {\r\n  public componentType = 'feature';\r\n  public instance: Feature;\r\n  private host: SourceVectorComponent;\r\n\r\n  id: string | number | undefined;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = new Feature();\r\n    if (this.id !== undefined) {\r\n      this.instance.setId(this.id);\r\n    }\r\n    this.host.instance.addFeature(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeFeature(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (this.instance) {\r\n      this.instance.setId(this.id);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolSourceVector.name}`,\r\n  },\r\n  controller: ['$element', FeatureComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolFeature',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Fill, Circle, Stroke } from 'ol/style';\r\n\r\nexport class styleCircleComponent implements ng.IController {\r\n  public componentType = 'style-circle';\r\n  public instance: Circle;\r\n\r\n  private host: StyleComponent;\r\n\r\n  fill: Fill;\r\n  radius: number = 5;\r\n  snapToPixel: boolean;\r\n  stroke: Stroke;\r\n  // atlasManager: ;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-circle must be applied to a feature or a layer');\r\n    }\r\n  }\r\n\r\n  $postLink() {\r\n    this.instance = new Circle(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  update() {\r\n    if (!!this.instance) {\r\n      this.instance = new Circle(this);\r\n      this.host.instance.setImage(this.instance);\r\n      // this.instance.setRadius(this.radius);\r\n    }\r\n    this.host.update();\r\n    // this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['radius']) {\r\n      this.instance.setRadius(changes['radius'].currentValue);\r\n    }\r\n    // this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStyleCircleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    fill: '<?',\r\n    radius: '<?',\r\n    snapToPixel: '<?',\r\n    stroke: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleCircleComponent],\r\n};\r\n\r\nexport const aolStyleCircle = {\r\n  name: 'aolStyleCircle',\r\n  ...aolStyleCircleComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport { View } from 'ol';\r\nimport { Extent } from 'ol/extent';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport mapComponent, { MapComponent } from './map.component';\r\n\r\nexport class ViewComponent implements angular.IController {\r\n  public instance: View;\r\n  public componentType: string = 'view';\r\n  public host: MapComponent;\r\n\r\n  constrainRotation: boolean | number;\r\n  enableRotation: boolean;\r\n  extent: Extent;\r\n  maxResolution: number;\r\n  minResolution: number;\r\n  maxZoom: number;\r\n  minZoom: number;\r\n  resolution: number;\r\n  resolutions: number[];\r\n  rotation: number;\r\n  zoom: number = 11;\r\n  zoomFactor: number;\r\n  center: Coordinate = [104.06, 30.67];\r\n  projection: string;\r\n\r\n  zoomAnimation: Boolean = false;\r\n\r\n  // defaultGive() {\r\n  //   if (this.zoom === undefined) this.zoom = 1;\r\n  //   if (this.center === undefined) this.center = [104.06, 30.67];\r\n  //   if (this.projection === undefined) this.projection = 'EPSG:4326';\r\n  //   if (this.zoomAnimation === undefined) this.zoomAnimation = false;\r\n  // }\r\n\r\n  //   constructor(host: angular.IRootElementService) {}\r\n\r\n  $onInit() {\r\n    // this.defaultGive();\r\n    this.instance = new View(this);\r\n    this.host.instance.setView(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'zoom':\r\n            /** Work-around: setting the zoom via setProperties does not work. */\r\n            if (this.zoomAnimation) {\r\n              this.instance.animate({ zoom: changes[key].currentValue });\r\n            } else {\r\n              this.instance.setZoom(changes[key].currentValue);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    constrainRotation: '<?',\r\n    enableRotation: '<?',\r\n    extent: '<?',\r\n    maxResolution: '<?',\r\n    minResolution: '<?',\r\n    maxZoom: '<?',\r\n    minZoom: '<?',\r\n    resolution: '<?',\r\n    resolutions: '<?',\r\n    rotation: '<?',\r\n    zoom: '<',\r\n    zoomFactor: '<?',\r\n    center: '<?',\r\n    projection: '<?',\r\n    zoomAnimation: '<?',\r\n  },\r\n  require: {\r\n    host: `^${mapComponent.name}`,\r\n  },\r\n  controller: ['$element', ViewComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolView',\r\n  ...component,\r\n};\r\n","export * from './xyz.component';\r\nexport * from './osmmaps.component';\r\nexport * from './vector.component';\r\nexport * from './cluster.component';\r\n\r\nexport * from './tiledebug.component';\r\n","import * as angular from 'angular';\r\nimport aolFeature from './feature.component';\r\nimport { FeatureComponent } from './feature.component';\r\nimport { LineString, Point, Polygon } from 'ol/geom';\r\nimport BaseEvent from 'ol/events/Event';\r\n\r\nexport class GeometryLinestringComponent implements ng.IController {\r\n  public componentType: string = 'geometry-linestring';\r\n  public instance: LineString;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('instancing aol-geometry-linestring');\r\n  //   }\r\n  public change: Function = angular.noop;\r\n\r\n  $onInit() {\r\n    this.instance = new LineString([]);\r\n    this.instance.on('change', (event: BaseEvent) => this.change({ event }));\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\nvar aolGeometryLinestringComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    change: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryLinestringComponent],\r\n};\r\n\r\nexport const aolGeometryLinestring = {\r\n  name: 'aolGeometryLinestring',\r\n  ...aolGeometryLinestringComponent,\r\n};\r\n\r\nexport class GeometryPointComponent implements ng.IController {\r\n  public componentType: string = 'geometry-point';\r\n  public instance: Point;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-point');\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new Point([0, 0]); // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\n\r\nvar aolGeometryPointComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPointComponent],\r\n};\r\n\r\nexport const aolGeometryPoint = {\r\n  name: 'aolGeometryPoint',\r\n  ...aolGeometryPointComponent,\r\n};\r\n\r\nexport class GeometryPolygonComponent implements ng.IController {\r\n  public componentType: string = 'geometry-polygon';\r\n  public instance: Polygon;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-polygon');\r\n  //   }\r\n\r\n  $onInit() {\r\n    // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.instance = new Polygon([\r\n      [\r\n        [0, 0],\r\n        [1, 0],\r\n        [1, 1],\r\n      ],\r\n    ]);\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  //   $onDestroy() {\r\n  //     // this.host.setGeometry(null);\r\n  //   }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPolygonComponent],\r\n};\r\n\r\nexport const aolGeometryPolygon = {\r\n  name: 'aolGeometryPolygon',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n","module.exports = ol.geom;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Text';\r\nimport { Text } from 'ol/style';\r\nimport TextPlacement from 'ol/style/TextPlacement';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\n\r\nexport class styleTextComponent implements ng.IController, Options {\r\n  public componentType = 'style-text';\r\n  public instance: Text;\r\n\r\n  private host: StyleComponent;\r\n\r\n  font?: string;\r\n  maxAngle?: number;\r\n  offsetX?: number;\r\n  offsetY?: number;\r\n  overflow?: boolean;\r\n  placement?: TextPlacement | string;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  text?: string;\r\n  textAlign?: string;\r\n  textBaseline?: string;\r\n  fill?: Fill;\r\n  stroke?: Stroke;\r\n  backgroundFill?: Fill;\r\n  backgroundStroke?: Stroke;\r\n  padding?: number[];\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Text(this);\r\n    this.host.instance.setText(this.instance);\r\n    this.host.update();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setText(null);\r\n    this.host.update();\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['font']) {\r\n      this.instance.setFont(changes['font'].currentValue);\r\n    }\r\n    if (changes['offsetX']) {\r\n      this.instance.setOffsetX(changes['offsetX'].currentValue);\r\n    }\r\n    if (changes['offsetY']) {\r\n      this.instance.setOffsetY(changes['offsetY'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['text']) {\r\n      this.instance.setText(changes['text'].currentValue);\r\n    }\r\n    if (changes['textAlign']) {\r\n      this.instance.setTextAlign(changes['textAlign'].currentValue);\r\n    }\r\n    if (changes['textBaseLine']) {\r\n      this.instance.setTextBaseline(changes['textBaseLine'].currentValue);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleTextComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    font: '<?',\r\n    maxAngle: '<?',\r\n    offsetX: '<?',\r\n    offsetY: '<?',\r\n    overflow: '<?',\r\n    placement: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    text: '<?',\r\n    textAlign: '<?',\r\n    textBaseline: '<?',\r\n    fill: '<?',\r\n    stroke: '<?',\r\n    backgroundFill: '<?',\r\n    backgroundStroke: '<?',\r\n    padding: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleTextComponent],\r\n};\r\n\r\nexport const aolStyleText = {\r\n  name: 'aolStyleText',\r\n  ...aolStyleTextComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolModule from './core/index';\r\n\r\nangular.module('app', [aolModule.name]).run([\r\n  '$log',\r\n  '$rootScope',\r\n  ($log: angular.ILogService, $rootScope: any) => {\r\n    $log.log('项目启动');\r\n    $rootScope.map = {\r\n      click() {\r\n        console.log(arguments);\r\n      },\r\n      pointermove() {\r\n        // console.log(arguments);\r\n      },\r\n      features: [],\r\n      interaction: {\r\n        drawend() {\r\n          console.log(arguments);\r\n          $rootScope.$apply(() => {\r\n            $rootScope.map.once = false;\r\n          });\r\n        },\r\n      },\r\n      once: true,\r\n      center: [120, 24],\r\n      zoom: 6,\r\n      layerGroup: {\r\n        visible: true,\r\n      },\r\n      overlayer: {\r\n        msg: '动态数据',\r\n      },\r\n      stroke: {\r\n        width: 10,\r\n        lineDash: [],\r\n        lineDashOffset: 5,\r\n        miterLimit: 50,\r\n      },\r\n      styleCircle: {\r\n        radius: 20,\r\n        fill: '#FF0000',\r\n      },\r\n      styleIcon: {\r\n        src:\r\n          'https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1583685507&di=98d05a81529c7f119d619e4d5b572634&src=http://bpic.588ku.com/element_origin_min_pic/01/37/42/75573c4c4c4c3c6.jpg',\r\n        opacity: 0.5,\r\n        scale: 0.08,\r\n        rotation: 1,\r\n      },\r\n      styleText: {\r\n        text: 'hello Word',\r\n        offsetY: -40,\r\n      },\r\n    };\r\n    $rootScope.property = JSON.stringify($rootScope.map);\r\n    $rootScope.reset = () => {\r\n      angular.extend($rootScope.map, JSON.parse($rootScope.property));\r\n    };\r\n  },\r\n]);\r\n","import * as angular from 'angular';\r\n\r\nimport mapComponent from './map.component';\r\nimport viewComponent from './view.component';\r\nimport aolFeature from './feature.component';\r\n\r\nimport {\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerGroup,\r\n  aolLayerWebgl,\r\n} from './layers/index';\r\nimport {\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n} from './sources/index';\r\nimport {\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport {\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n} from './coordinate.component';\r\nimport {\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleFill,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n} from './styles';\r\n\r\nimport { aolOverlay } from './overlay.component';\r\nimport {\r\n  aolInteractionDefaults,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n} from './interactions';\r\nimport { aolInteractionDraw } from './interactions/draw.component';\r\n\r\nvar aolModule = angular.module('aol', []);\r\nfunction registerComponent(component: any) {\r\n  aolModule.component(component.name, component);\r\n}\r\n\r\n[\r\n  mapComponent,\r\n  viewComponent,\r\n  /**图层组件 */\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerWebgl,\r\n  aolLayerGroup,\r\n  /**数据源组件 */\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n  /**要素组件 */\r\n  aolFeature,\r\n  /**geo组件 */\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n  /**坐标组件 */\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n  /**样式组件 */\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n  aolStyleFill,\r\n  /**domTOMap */\r\n  aolOverlay,\r\n  /**交互 */\r\n  aolInteractionDefaults,\r\n  aolInteractionDraw,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n].forEach(component => {\r\n  registerComponent(component);\r\n});\r\n\r\nexport default aolModule;\r\n","import { sourceComponentConfig } from './source.component';\r\nimport { XYZ } from 'ol/source';\r\nimport { Options } from 'ol/source/XYZ';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\nimport { LoadFunction, UrlFunction } from 'ol/Tile';\r\nimport { Size } from 'ol/size';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport { SourceXYZExtend } from './xyz.component.extend';\r\n\r\nexport class SourceXYZComponent extends SourceXYZExtend\r\n  implements angular.IController, Options {\r\n  public instance: XYZ;\r\n  public componentType: string = 'sourceXYZComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  opaque?: boolean;\r\n  projection?: ProjectionLike;\r\n  reprojectionErrorThreshold?: number;\r\n  maxZoom?: number;\r\n  minZoom?: number;\r\n  tileGrid?: TileGrid;\r\n  tileLoadFunction?: LoadFunction;\r\n  tilePixelRatio?: number;\r\n  tileSize?: number | Size;\r\n  tileUrlFunction?: UrlFunction;\r\n  url?: string;\r\n  urls?: string[];\r\n  wrapX?: boolean;\r\n  transition?: number;\r\n  zDirection?: number;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    super.decorate();\r\n\r\n    this.instance = new XYZ(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url') || changes.hasOwnProperty('tileGrid')) {\r\n      // this.instance = new XYZ(this);\r\n      // this._register(this.instance);\r\n      this.$onInit();\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    projection: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    minZoom: '<?',\r\n    maxZoom: '<?',\r\n    tileGrid: '<?',\r\n    tileLoadFunction: '<?',\r\n    tilePixelRatio: '<?',\r\n    tileSize: '<?',\r\n    tileUrlFunction: '<?',\r\n    url: '<?',\r\n    urls: '<?',\r\n    wrapX: '<?',\r\n    transition: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: ['$element', SourceXYZComponent],\r\n};\r\n\r\nexport const aolSourceXyz = {\r\n  name: 'aolSourceXyz',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Tile as TileLayer } from 'ol/layer';\r\n\r\nexport class LayerTileComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: TileLayer;\r\n\r\n  preload: number;\r\n  useInterimTilesOnError: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new TileLayer(this);\r\n    super.$onInit();\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    preload: '<?',\r\n    useInterimTilesOnError: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerTileComponent],\r\n};\r\n\r\nexport const aolLayerTile = {\r\n  name: 'aolLayerTile',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { OrderFunction } from 'ol/render';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { StyleLike } from 'ol/style/Style';\r\n// import { Feature } from 'ol';\r\n// import Point from 'ol/geom/Point';\r\n\r\nexport class LayerVectorComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: VectorLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  renderOrder?: OrderFunction;\r\n  renderBuffer?: number;\r\n  source?: VectorSource<Geometry>;\r\n  declutter?: boolean;\r\n  style?: StyleLike;\r\n  updateWhileAnimating?: boolean;\r\n  updateWhileInteracting?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new VectorLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    renderOrder: '<?',\r\n    renderBuffer: '<?',\r\n    source: '<?',\r\n    declutter: '<?',\r\n    style: '<?',\r\n    updateWhileAnimating: '<?',\r\n    updateWhileInteracting: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerVectorComponent],\r\n};\r\n\r\nexport const aolLayerVector = {\r\n  name: 'aolLayerVector',\r\n  ...component,\r\n};\r\n","import { layerComponentConfig, LayerComponent } from './layer.component';\r\nimport { Options } from 'ol/layer/Group';\r\nimport { Group as LayerGroup } from 'ol/layer';\r\nimport { MapComponent } from '../map.component';\r\n\r\nexport class LayerGroupComponent extends LayerComponent\r\n  implements ng.IController, Options {\r\n  public componentType: string = 'LayerGroupComponent';\r\n  public instance: LayerGroup;\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n\r\n  $onInit() {\r\n    // console.log(`creating ol.layer.Group instance with:`, this);\r\n    this.instance = new LayerGroup(this);\r\n    super.$onInit();\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerGroupComponent],\r\n};\r\n\r\nexport const aolLayerGroup = {\r\n  name: 'aolLayerGroup',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport WebGLPointsLayer from 'ol/layer/WebGLPoints';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { LiteralStyle, SymbolType } from 'ol/style/LiteralStyle';\r\n\r\nexport class LayerWebglComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: WebGLPointsLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  style: any | LiteralStyle = {\r\n    symbol: {\r\n      symbolType: 'circle',\r\n      size: 6,\r\n      color: '#CD853F',\r\n      // [\r\n      //   \"interpolate\",\r\n      //   [\"linear\"],\r\n      //   [\"get\", \"webgltype\"],\r\n      //   \"00\",\r\n      //   \"#CD853F\",\r\n      //   \"01\", // 客船\r\n      //   \"#B0C4DE\",\r\n      //   \"02\", // 货船\r\n      //   \"#08B012\",\r\n      //   \"03\", // 液货船\r\n      //   \"#EA1600\",\r\n      //   \"04\", // 工程船\r\n      //   \"#FF8C00\",\r\n      //   \"05\", // 工作船\r\n      //   \"#D00BC5\",\r\n      //   \"06\", // 拖船\r\n      //   \"#2CD9DC\",\r\n      //   \"0909\", // 游艇\r\n      //   \"#00D28E\",\r\n      //   \"0905\", // 公务船\r\n      //   \"#F5F5F5\",\r\n      //   \"0903\", // 救助船\r\n      //   \"#FFFF00\",\r\n      //   \"90\", // 渔船\r\n      //   \"#1F4EC2\"\r\n      //   // \"09\", // 其他\r\n      // ],\r\n      // rotateWithView: false,\r\n      offset: [0, 0],\r\n    },\r\n  };\r\n  source?: VectorSource<Geometry>;\r\n  disableHitDetection?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new WebGLPointsLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    style: '<?',\r\n    className: '<?',\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    source: '<?',\r\n    disableHitDetection: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerWebglComponent],\r\n};\r\n\r\nexport const aolLayerWebgl = {\r\n  name: 'aolLayerWebgl',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer.WebGLPoints;","/*\r\n * @Author: lich\r\n * @Date: 2020-03-17 13:33:45\r\n * @Last Modified by:   lich\r\n * @Last Modified time: 2020-03-17 13:33:45\r\n * 为了解决地图偏移\r\n */\r\nimport TileGrid, { Options } from 'ol/tilegrid/TileGrid';\r\nimport { SourceComponent } from './source.component';\r\n\r\nconst resolutions = [\r\n  156543.03392804097,\r\n  78271.51696402048,\r\n  39135.75848201024,\r\n  19567.87924100512,\r\n  9783.93962050256,\r\n  4891.96981025128,\r\n  2445.98490512564,\r\n  1222.99245256282,\r\n  611.49622628141,\r\n  305.748113140705,\r\n  152.8740565703525,\r\n  76.43702828517625,\r\n  38.21851414258813,\r\n  19.109257071294063,\r\n  9.554628535647032,\r\n  4.777314267823516,\r\n  2.388657133911758,\r\n  1.194328566955879,\r\n  0.5971642834779395,\r\n  0.29858214173896974,\r\n  0.14929107086948487,\r\n  0.07464553543474244,\r\n  0.03732276771737122,\r\n  0.01866138385868561,\r\n  0.009330691929342804,\r\n  0.004665345964671402,\r\n  0.002332672982335701,\r\n  0.0011663364911678506,\r\n  0.0005831682455839253,\r\n  0.00029158412279196264,\r\n  0.00014579206139598132,\r\n  0.00007289603069799066,\r\n  0.00003644801534899533,\r\n  0.000018224007674497665,\r\n  0.000009112003837248832,\r\n  0.000004556001918624416,\r\n  0.000002278000959312208,\r\n  0.000001139000479656104,\r\n  5.69500239828052e-7,\r\n  2.84750119914026e-7,\r\n  1.42375059957013e-7,\r\n  7.11875299785065e-8,\r\n  3.559376498925325e-8,\r\n];\r\n\r\nconst resolutions_4326 = [\r\n  1.40625,\r\n  0.703125,\r\n  0.3515625,\r\n  0.17578125,\r\n  0.087890625,\r\n  0.0439453125,\r\n  0.02197265625,\r\n  0.010986328125,\r\n  0.0054931640625,\r\n  0.00274658203125,\r\n  0.001373291015625,\r\n  0.0006866455078125,\r\n  0.00034332275390625,\r\n  0.000171661376953125,\r\n  0.0000858306884765625,\r\n  0.00004291534423828125,\r\n  0.000021457672119140625,\r\n  0.000010728836059570312,\r\n  0.000005364418029785156,\r\n  0.000002682209014892578,\r\n  0.000001341104507446289,\r\n  6.705522537231445e-7,\r\n  3.3527612686157227e-7,\r\n  1.6763806343078613e-7,\r\n  8.381903171539307e-8,\r\n  4.190951585769653e-8,\r\n  2.0954757928848267e-8,\r\n  1.0477378964424133e-8,\r\n  5.238689482212067e-9,\r\n  2.6193447411060333e-9,\r\n  1.3096723705530167e-9,\r\n  6.548361852765083e-10,\r\n  3.2741809263825417e-10,\r\n  1.6370904631912708e-10,\r\n  8.185452315956354e-11,\r\n  4.092726157978177e-11,\r\n  2.0463630789890885e-11,\r\n  1.0231815394945443e-11,\r\n  5.115907697472721e-12,\r\n  2.5579538487363607e-12,\r\n  1.2789769243681803e-12,\r\n  6.394884621840902e-13,\r\n  3.197442310920451e-13,\r\n];\r\n\r\nexport class SourceXYZExtend extends SourceComponent {\r\n  tileGrid?: any;\r\n  projection?: any;\r\n  decorate() {\r\n    if (!this.tileGrid || this.tileGrid.forEachTileCoord) return;\r\n    if (!this.tileGrid.resolutions) {\r\n      this.tileGrid.resolutions =\r\n        this.projection === 'EPSG:4326' ? resolutions_4326 : resolutions;\r\n    }\r\n    this.tileGrid = new TileGrid(this.tileGrid);\r\n  }\r\n}\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { OSM } from 'ol/source';\r\nimport { LoadFunction } from 'ol/Tile';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\n\r\nexport class SourceOSMComponent extends SourceComponent\r\n  implements ng.IController {\r\n  public instance: OSM;\r\n  public componentType: string = 'SourceOSMComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  maxZoom?: number;\r\n  opaque?: boolean;\r\n  reprojectionErrorThreshold?: number;\r\n  tileLoadFunction?: LoadFunction;\r\n  url?: string;\r\n  wrapX?: boolean;\r\n\r\n  $onInit() {\r\n    this.instance = new OSM(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url')) {\r\n      this.instance = new OSM(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    maxZoom: '<?',\r\n    tileLoadFunction: '<?',\r\n    url: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceOSMComponent],\r\n};\r\n\r\nexport const aolSourceOsm = {\r\n  name: 'aolSourceOsm',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport {\r\n  aolLayerVector,\r\n  LayerVectorComponent,\r\n  LayerGroupComponent,\r\n  aolLayerWebgl,\r\n} from '../layers';\r\nimport { LoadingStrategy } from 'ol/source/Vector';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Feature, Collection } from 'ol';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { FeatureLoader, FeatureUrlFunction } from 'ol/featureloader';\r\n\r\nexport class SourceVectorComponent extends SourceComponent\r\n  implements angular.IController {\r\n  public instance: VectorSource;\r\n  public componentType: string = 'SourceVectorComponent';\r\n  public host: LayerVectorComponent | LayerGroupComponent;\r\n  public layerVectorHost: LayerVectorComponent;\r\n  public layerWebglHost: LayerGroupComponent;\r\n\r\n  features?: Feature<Geometry>[] | Collection<Feature<Geometry>>;\r\n  format?: FeatureFormat;\r\n  loader?: FeatureLoader;\r\n  overlaps?: boolean;\r\n  strategy?: LoadingStrategy;\r\n  url?: string | FeatureUrlFunction;\r\n  useSpatialIndex?: boolean;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else if (this.layerWebglHost) {\r\n      this.host = this.layerWebglHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-source-vector must be applied to a Style or layerWebglHost or layerVectorHost component',\r\n      );\r\n    }\r\n\r\n    this.instance = new VectorSource(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'features':\r\n            this.instance.addFeatures(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    // if (changes.hasOwnProperty('url')) {\r\n    //   this.instance = new VectorSource(this);\r\n    //   this._register(this.instance);\r\n    // }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    features: '<?',\r\n    format: '<?',\r\n    loader: '<?',\r\n    overlaps: '<?',\r\n    strategy: '<?',\r\n    url: '<?',\r\n    useSpatialIndex: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `^?${aolLayerVector.name}`,\r\n    layerWebglHost: `^?${aolLayerWebgl.name}`,\r\n  },\r\n  controller: [SourceVectorComponent],\r\n};\r\n\r\nexport const aolSourceVector = {\r\n  name: 'aolSourceVector',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from \"./source.component\";\r\nimport { Cluster  } from \"ol/source\";\r\nimport { Options  } from \"ol/source/Cluster\";\r\nimport { Feature } from \"ol\";\r\nimport { Geometry, Point } from \"ol/geom\";\r\nimport { Vector } from \"ol/source\";\r\nimport { LayerVectorComponent, aolLayerVector } from \"../layers\";\r\n\r\nexport class SourceClusterComponent extends SourceComponent\r\n  implements angular.IController , Options {\r\n  public instance: Cluster;\r\n  public componentType: string = 'SourceClusterComponent';\r\n  public host: LayerVectorComponent;\r\n\r\n  distance?: number;\r\n  geometryFunction?: (p0: Feature<Geometry>) => Point;\r\n  source: Vector<Geometry>;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if(!this.source) return ;\r\n    this.instance = new Cluster(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('source')) {\r\n      this.$onDestroy();\r\n      this.instance = new Cluster(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    distance: '<?',\r\n    geometryFunction: '<?',\r\n    source: '<',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerVector.name}`,\r\n  },\r\n  controller: ['$element', SourceClusterComponent],\r\n};\r\n\r\n\r\nexport const aolSourceCluster = {\r\n  name: 'aolSourceCluster',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { TileDebug } from 'ol/source';\r\nimport { Options } from 'ol/source/TileDebug';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\n\r\nexport class SourceTiledebugComponent extends SourceComponent\r\n  implements ng.IController, Options {\r\n  public instance: TileDebug;\r\n  public componentType: string = 'SourceTiledebugComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  projection?: ProjectionLike;\r\n  tileGrid?: TileGrid;\r\n  wrapX?: boolean;\r\n  zDirection?: number;\r\n\r\n  $onInit() {\r\n    this.instance = new TileDebug(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    projection: '<?',\r\n    tileGrid: '<?',\r\n    wrapX: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceTiledebugComponent],\r\n};\r\n\r\nexport const aolSourceTiledebug = {\r\n  name: 'aolSourceTiledebug',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { MapComponent } from './map.component';\r\nimport { ViewComponent } from './view.component';\r\nimport {\r\n  GeometryPointComponent,\r\n  aolGeometryPoint,\r\n  GeometryLinestringComponent,\r\n  GeometryPolygonComponent,\r\n  aolGeometryLinestring,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport Projection from 'ol/proj/Projection';\r\nimport { transform } from 'ol/proj';\r\nimport aolView from './view.component';\r\nimport aolMap from './map.component';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\nexport class CoordinateComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private viewHost?: ViewComponent;\r\n  private geometryPointHost?: GeometryPointComponent;\r\n  // private overlayHost?:GeometryPointComponent;\r\n\r\n  x: number;\r\n  y: number;\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    if (this.geometryPointHost) {\r\n      this.host = this.geometryPointHost;\r\n    } else if (this.viewHost) {\r\n      this.host = this.viewHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n    //    else if (overlayHost !== null) {\r\n    //     this.host = overlayHost;\r\n    //   }\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !angular.isNumber(this.x) || !angular.isNumber(this.y))\r\n      return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: number[];\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = [this.x, this.y];\r\n    } else {\r\n      transformedCoordinates = transform(\r\n        [this.x, this.y],\r\n        this.srid,\r\n        referenceProjectionCode,\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-point':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'view':\r\n        this.host.instance.setCenter(transformedCoordinates);\r\n        break;\r\n      // case \"overlay\":\r\n      //   this.host.instance.setPosition(transformedCoordinates);\r\n      //   break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    x: '<',\r\n    y: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    viewHost: `?^${aolView.name}`,\r\n    geometryPointHost: `?^${aolGeometryPoint.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CoordinateComponent],\r\n};\r\n\r\nexport const aolCoordinate = {\r\n  name: 'aolCoordinate',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n\r\nexport class CollectionCoordinatesComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private geometryLinestring?: GeometryLinestringComponent;\r\n  private geometryPolygon?: GeometryPolygonComponent;\r\n\r\n  coordinates: [number, number][];\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    // console.log('creating aol-collection-coordinates');\r\n    if (!!this.geometryLinestring) {\r\n      this.host = this.geometryLinestring;\r\n    } else if (!!this.geometryPolygon) {\r\n      this.host = this.geometryPolygon;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !(this.coordinates instanceof Array)) return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: Array<Coordinate>;\r\n\r\n    // console.log('coordinates change: ', this.coordinates);\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = this.coordinates;\r\n    } else {\r\n      transformedCoordinates = [];\r\n      this.coordinates.forEach(\r\n        function(coordinate: Coordinate) {\r\n          transformedCoordinates.push(\r\n            transform(coordinate, this.srid, referenceProjectionCode),\r\n          );\r\n        }.bind(this),\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-linestring':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'geometry-polygon':\r\n        this.host.instance.setCoordinates([transformedCoordinates]);\r\n        break;\r\n      default:\r\n        throw new Error(\r\n          \"aol-collection-coordinates' host is of unknown type: \" +\r\n            this.host.componentType,\r\n        );\r\n      // break;\r\n    }\r\n  }\r\n}\r\n\r\nconst aolCollectionCoordinatesComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    coordinates: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    geometryPolygon: `?^${aolGeometryPolygon.name}`,\r\n    geometryLinestring: `?^${aolGeometryLinestring.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CollectionCoordinatesComponent],\r\n};\r\n\r\nexport const aolCollectionCoordinates = {\r\n  name: 'aolCollectionCoordinates',\r\n  ...aolCollectionCoordinatesComponent,\r\n};\r\n","module.exports = ol.proj;","export * from \"./style.component\";\r\nexport * from \"./stroke.component\";\r\nexport * from \"./fill.component\";\r\nexport * from \"./circle.component\";\r\nexport * from \"./icon.component\";\r\nexport * from \"./text.component\";","import { Options } from 'ol/style/Stroke';\r\nimport { Stroke } from 'ol/style';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\n\r\nexport class StrokeComponent implements ng.IController, Options {\r\n  public componentType = 'style-stroke';\r\n  public instance: Stroke;\r\n\r\n  private host: any; // StyleComponent | CircleComponent;\r\n\r\n  color?: Color | ColorLike;\r\n  lineCap?: CanvasLineCap;\r\n  lineJoin?: CanvasLineJoin;\r\n  lineDash?: number[];\r\n  lineDashOffset?: number;\r\n  miterLimit?: number;\r\n  width?: number;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n  protected styleCircleHost: styleCircleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Stroke(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = this.instance;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n\r\n  $onDestroy() {\r\n    // this.host.instance.setStroke(null);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = null;\r\n        this.host.update();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'color':\r\n            this.instance.setColor(changes[key].currentValue);\r\n            break;\r\n          case 'lineCap':\r\n            this.instance.setLineCap(changes[key].currentValue);\r\n            break;\r\n          case 'lineDash':\r\n            this.instance.setLineDash(changes[key].currentValue);\r\n            break;\r\n          case 'lineDashOffset':\r\n            this.instance.setLineDashOffset(changes[key].currentValue);\r\n            break;\r\n          case 'lineJoin':\r\n            this.instance.setLineJoin(changes[key].currentValue);\r\n            break;\r\n          case 'miterLimit':\r\n            this.instance.setMiterLimit(changes[key].currentValue);\r\n            break;\r\n          case 'width':\r\n            this.instance.setWidth(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStrokeComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n    lineCap: '<?',\r\n    lineJoin: '<?',\r\n    lineDash: '<?',\r\n    lineDashOffset: '<?',\r\n    miterLimit: '<?',\r\n    width: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n  },\r\n  controller: [StrokeComponent],\r\n};\r\n\r\nexport const aolStyleStroke = {\r\n  name: 'aolStyleStroke',\r\n  ...aolStrokeComponent,\r\n};\r\n","import { Options } from 'ol/style/Stroke';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { Fill } from 'ol/style';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\nimport { styleTextComponent, aolStyleText } from './text.component';\r\n\r\nexport class FillComponent implements ng.IController, Options {\r\n  public componentType = 'fill';\r\n  public instance: Fill;\r\n\r\n  private host: any; // StyleComponent;\r\n  private styleHost: StyleComponent;\r\n  private styleCircleHost: styleCircleComponent;\r\n  private styleTextHost: styleTextComponent;\r\n\r\n  color?: Color | ColorLike;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleTextHost) {\r\n      this.host = this.styleTextHost;\r\n    } else if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-style-fill must be applied to a Style or styleCircleHost or StyleText component',\r\n      );\r\n    }\r\n    this.instance = new Fill(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n  $onDestroy() {\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    // this.host.instance.setFill(new Fill({color:changes['color'].currentValue}))\r\n    this.instance = new Fill({ color: changes['color'].currentValue });\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolFillComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n    styleTextHost: `?^${aolStyleText.name}`,\r\n  },\r\n  controller: [FillComponent],\r\n};\r\n\r\nexport const aolStyleFill = {\r\n  name: 'aolStyleFill',\r\n  ...aolFillComponent,\r\n};\r\n","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Icon';\r\nimport { Icon } from 'ol/style';\r\nimport IconOrigin from 'ol/style/IconOrigin';\r\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits';\r\nimport { Color } from 'ol/color';\r\nimport { Size } from 'ol/size';\r\n\r\nexport class styleIconComponent implements ng.IController, Options {\r\n  public componentType = 'style-icon';\r\n  public instance: Icon;\r\n\r\n  private host: StyleComponent;\r\n\r\n  anchor?: number[];\r\n  anchorOrigin?: IconOrigin;\r\n  anchorXUnits?: IconAnchorUnits;\r\n  anchorYUnits?: IconAnchorUnits;\r\n  color?: Color | string;\r\n  crossOrigin?: string;\r\n  img?: HTMLImageElement | HTMLCanvasElement;\r\n  offset?: number[];\r\n  offsetOrigin?: IconOrigin;\r\n  opacity?: number;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  size?: Size;\r\n  imgSize?: Size;\r\n  src?: string;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Icon(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['opacity']) {\r\n      this.instance.setOpacity(changes['opacity'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['src']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleIconComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    anchor: '<?',\r\n    anchorOrigin: '<?',\r\n    anchorXUnits: '<?',\r\n    anchorYUnits: '<?',\r\n    color: '<?',\r\n    crossOrigin: '<?',\r\n    img: '<?',\r\n    offset: '<?',\r\n    offsetOrigin: '<?',\r\n    opacity: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    size: '<?',\r\n    imgSize: '<?',\r\n    src: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleIconComponent],\r\n};\r\n\r\nexport const aolStyleIcon = {\r\n  name: 'aolStyleIcon',\r\n  ...aolStyleIconComponent,\r\n};\r\n","import { Overlay } from 'ol';\r\nimport { Options, PanOptions } from 'ol/Overlay';\r\nimport OverlayPositioning from 'ol/OverlayPositioning';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport aolMap, { MapComponent } from './map.component';\r\n\r\nexport class OverlayComponent implements ng.IController, Options {\r\n  componentType = 'overlay';\r\n  private instance: Overlay;\r\n  protected host: MapComponent;\r\n\r\n  $element: ng.IRootElementService;\r\n\r\n  // element: Element;\r\n\r\n  id: number | string;\r\n  element: HTMLElement;\r\n  offset?: number[];\r\n  position?: Coordinate;\r\n  positioning?: OverlayPositioning;\r\n  stopEvent?: boolean;\r\n  insertFirst?: boolean;\r\n  autoPan?: boolean;\r\n  autoPanAnimation?: PanOptions;\r\n  autoPanMargin?: number;\r\n  className?: string;\r\n\r\n  constructor($element: ng.IRootElementService) {\r\n    this.$element = $element;\r\n  }\r\n\r\n  $onInit() {\r\n    /**@TODO: this.element , $element */\r\n    if (this.$element[0]) {\r\n      this.element = this.$element[0];\r\n      this.instance = new Overlay(this);\r\n      this.host.instance.addOverlay(this.instance);\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      properties[key] = changes[key].currentValue;\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    if (this.instance) {\r\n      this.host.instance.removeOverlay(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    element: '<?',\r\n    offset: '<?',\r\n    position: '<?',\r\n    positioning: '<?',\r\n    stopEvent: '<?',\r\n    insertFirst: '<?',\r\n    autoPan: '<?',\r\n    autoPanAnimation: '<?',\r\n    autoPanMargin: '<?',\r\n    className: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', OverlayComponent],\r\n};\r\n\r\nexport const aolOverlay = {\r\n  name: 'aolOverlay',\r\n  ...component,\r\n};\r\n","export * from './default.component';\r\nexport * from './modify.component';\r\nexport * from './select.component';\r\nexport * from './draganddrop.component';\r\n","import { Collection } from 'ol';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport {\r\n  defaults as defaultInteraction,\r\n  DefaultsOptions,\r\n} from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\n\r\nexport class DefaultInteractionComponent\r\n  implements ng.IController, DefaultsOptions {\r\n  instance: Collection<Interaction>;\r\n  private host: MapComponent;\r\n\r\n  altShiftDragRotate?: boolean;\r\n  onFocusOnly?: boolean;\r\n  doubleClickZoom?: boolean;\r\n  keyboard?: boolean;\r\n  mouseWheelZoom?: boolean;\r\n  shiftDragZoom?: boolean;\r\n  dragPan?: boolean;\r\n  pinchRotate?: boolean;\r\n  pinchZoom?: boolean;\r\n  zoomDelta?: number;\r\n  zoomDuration?: number;\r\n\r\n  //   constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = defaultInteraction(this);\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.addInteraction(interaction),\r\n    );\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.removeInteraction(interaction),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    altShiftDragRotate: '<?',\r\n    onFocusOnly: '<?',\r\n    doubleClickZoom: '<?',\r\n    keyboard: '<?',\r\n    mouseWheelZoom: '<?',\r\n    shiftDragZoom: '<?',\r\n    dragPan: '<?',\r\n    pinchRotate: '<?',\r\n    pinchZoom: '<?',\r\n    zoomDelta: '<?',\r\n    zoomDuration: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DefaultInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDefaults = {\r\n  name: 'aolInteractionDefaults',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Modify } from 'ol/interaction';\r\nimport { Options, ModifyEvent } from 'ol/interaction/Modify';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Collection, Feature } from 'ol';\r\n\r\nexport class ModifyInteractionComponent implements ng.IController, Options {\r\n  private instance: Modify;\r\n  protected host: MapComponent;\r\n\r\n  condition?: Condition;\r\n  deleteCondition?: Condition;\r\n  insertVertexCondition?: Condition;\r\n  pixelTolerance?: number;\r\n  style?: StyleLike;\r\n  source?: VectorSource<Geometry>;\r\n  features?: Collection<Feature<Geometry>>;\r\n  wrapX?: boolean;\r\n\r\n  onModifyEnd = angular.noop;\r\n  onModifyStart = angular.noop;\r\n  onChange = angular.noop;\r\n  onChangeActive = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.source && !this.features) {\r\n      console.error('The modify interaction requires features or a source');\r\n      return;\r\n    }\r\n    this.instance = new Modify(this);\r\n    this.instance.on('change', (event: ModifyEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('change:active', (event: ModifyEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ModifyEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('modifyend', (event: ModifyEvent) =>\r\n      this.onModifyEnd({ event }),\r\n    );\r\n    this.instance.on('modifystart', (event: ModifyEvent) =>\r\n      this.onModifyStart({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    condition: '<',\r\n    deleteCondition: '<?',\r\n    insertVertexCondition: '<?',\r\n    pixelTolerance: '<?',\r\n    style: '<?',\r\n    source: '<?',\r\n    features: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', ModifyInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionModify = {\r\n  name: 'aolInteractionModify',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { Select } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Options, FilterFunction, SelectEvent } from 'ol/interaction/Select';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { Source } from 'ol/source';\r\nimport { Layer } from 'ol/layer';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { SelectInteractionExtend } from './select.component.extend';\r\n\r\nexport class SelectInteractionComponent extends SelectInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Select;\r\n  protected host: MapComponent;\r\n\r\n  addCondition?: Condition;\r\n  condition?: Condition;\r\n  layers?: Layer<Source>[] | ((p0: Layer<Source>) => boolean);\r\n  style?: StyleLike;\r\n  removeCondition?: Condition;\r\n  toggleCondition?: Condition;\r\n  multi?: boolean;\r\n  features?: Collection<Feature<Geometry>>;\r\n  filter?: FilterFunction;\r\n  hitTolerance?: number;\r\n\r\n  onSelect = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The select interaction requires map component');\r\n      return;\r\n    }\r\n    super.initCondition();\r\n    this.instance = new Select(this);\r\n    this.instance.on('select', (event: SelectEvent) =>\r\n      this.onSelect({ event }),\r\n    );\r\n    this.instance.on('change', (event: SelectEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: SelectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    addCondition: '<',\r\n    condition: '<?',\r\n    layers: '<?',\r\n    style: '<?',\r\n    removeCondition: '<?',\r\n    toggleCondition: '<?',\r\n    multi: '<?',\r\n    features: '<?',\r\n    filter: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onSelect: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', SelectInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionSelect = {\r\n  name: 'aolInteractionSelect',\r\n  ...component,\r\n};\r\n","import {\r\n  Condition,\r\n  altKeyOnly,\r\n  altShiftKeysOnly,\r\n  click,\r\n  doubleClick,\r\n  mouseActionButton,\r\n  mouseOnly,\r\n  noModifierKeys,\r\n  penOnly,\r\n  focus,\r\n  platformModifierKeyOnly,\r\n  pointerMove,\r\n  primaryAction,\r\n  shiftKeyOnly,\r\n  singleClick,\r\n  targetNotEditable,\r\n  touchOnly,\r\n} from 'ol/events/condition';\r\n\r\n// var conditionType:\r\n//   | 'altKeyOnly'\r\n//   | 'altShiftKeysOnly'\r\n//   | 'click'\r\n//   | 'doubleClick'\r\n//   | 'focus'\r\n//   | 'mouseActionButton'\r\n//   | 'mouseOnly'\r\n//   | 'noModifierKeys'\r\n//   | 'penOnly'\r\n//   | 'platformModifierKeyOnly'\r\n//   | 'pointerMove'\r\n//   | 'primaryAction'\r\n//   | 'shiftKeyOnly'\r\n//   | 'singleClick'\r\n//   | 'targetNotEditable'\r\n//   | 'touchOnly';\r\n\r\nexport class SelectInteractionExtend {\r\n  condition?: Condition;\r\n  /**初始化condition状态 */\r\n  initCondition() {\r\n    var key: conditionType | Condition = this.condition;\r\n    if (typeof key === 'function') return key;\r\n    switch (key) {\r\n      case 'altKeyOnly':\r\n        this.condition = altKeyOnly;\r\n        break;\r\n      case 'altShiftKeysOnly':\r\n        this.condition = altShiftKeysOnly;\r\n        break;\r\n      case 'click':\r\n        this.condition = click;\r\n        break;\r\n      case 'doubleClick':\r\n        this.condition = doubleClick;\r\n        break;\r\n      case 'focus':\r\n        this.condition = focus;\r\n        break;\r\n      case 'mouseActionButton':\r\n        this.condition = mouseActionButton;\r\n        break;\r\n      case 'mouseOnly':\r\n        this.condition = mouseOnly;\r\n        break;\r\n      case 'noModifierKeys':\r\n        this.condition = noModifierKeys;\r\n        break;\r\n      case 'penOnly':\r\n        this.condition = penOnly;\r\n        break;\r\n      case 'platformModifierKeyOnly':\r\n        this.condition = platformModifierKeyOnly;\r\n        break;\r\n      case 'pointerMove':\r\n        this.condition = pointerMove;\r\n        break;\r\n      case 'primaryAction':\r\n        this.condition = primaryAction;\r\n        break;\r\n      case 'shiftKeyOnly':\r\n        this.condition = shiftKeyOnly;\r\n        break;\r\n      case 'singleClick':\r\n        this.condition = singleClick;\r\n        break;\r\n      case 'targetNotEditable':\r\n        this.condition = targetNotEditable;\r\n        break;\r\n      case 'touchOnly':\r\n        this.condition = touchOnly;\r\n        break;\r\n      default:\r\n        this.condition = click;\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nenum conditionType {\r\n  altKeyOnly = 'altKeyOnly',\r\n  altShiftKeysOnly = 'altShiftKeysOnly',\r\n  click = 'click',\r\n  doubleClick = 'doubleClick',\r\n  focus = 'focus',\r\n  mouseActionButton = 'mouseActionButton',\r\n  mouseOnly = 'mouseOnly',\r\n  noModifierKeys = 'noModifierKeys',\r\n  penOnly = 'penOnly',\r\n  platformModifierKeyOnly = 'platformModifierKeyOnly',\r\n  pointerMove = 'pointerMove',\r\n  primaryAction = 'primaryAction',\r\n  shiftKeyOnly = 'shiftKeyOnly',\r\n  singleClick = 'singleClick',\r\n  targetNotEditable = 'targetNotEditable',\r\n  touchOnly = 'touchOnly',\r\n}\r\n","module.exports = ol.events.condition;","import * as angular from 'angular';\r\nimport { Options, DragAndDropEvent } from 'ol/interaction/DragAndDrop';\r\nimport { DragAndDrop } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { Vector } from 'ol/source';\r\nimport { Geometry } from 'ol/geom';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { DraganddropInteractionExtend } from './draganddrop.component.extend';\r\n\r\nexport class DraganddropInteractionComponent\r\n  extends DraganddropInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: DragAndDrop;\r\n  protected host: MapComponent;\r\n\r\n  formatConstructors?: FeatureFormat[];\r\n  source?: Vector<Geometry>;\r\n  projection?: ProjectionLike;\r\n  target?: HTMLElement;\r\n\r\n  onAddFeatures = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The DragAndDrop interaction requires map component');\r\n      return;\r\n    }\r\n    super.decorate(this);\r\n    this.instance = new DragAndDrop(this);\r\n    this.instance.on('addfeatures', (event: DragAndDropEvent) =>\r\n      this.onAddFeatures({ event }),\r\n    );\r\n    this.instance.on('change', (event: BaseEvent) => this.onChange({ event }));\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    formatConstructors: '<',\r\n    source: '<?',\r\n    projection: '<?',\r\n    target: '<?',\r\n    onChange: '&?',\r\n    onAddFeatures: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: [DraganddropInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraganddrop = {\r\n  name: 'aolInteractionDraganddrop',\r\n  ...component,\r\n};\r\n","import { DraganddropInteractionComponent } from './draganddrop.component';\r\n// import FeatureFormat from 'ol/format/Feature';\r\nimport {\r\n  GPX,\r\n  GeoJSON,\r\n  IGC,\r\n  KML,\r\n  TopoJSON,\r\n  EsriJSON,\r\n  GML,\r\n  IIIFInfo,\r\n  MVT,\r\n  OWS,\r\n  Polyline,\r\n  WFS,\r\n  WKT,\r\n  WMSCapabilities,\r\n  WMSGetFeatureInfo,\r\n  WMTSCapabilities,\r\n} from 'ol/format';\r\n\r\nexport abstract class DraganddropInteractionExtend {\r\n  defaultFormat: { [index: string]: any } = {\r\n    GPX,\r\n    GeoJSON,\r\n    IGC,\r\n    KML,\r\n    TopoJSON,\r\n    EsriJSON,\r\n    GML,\r\n    IIIFInfo,\r\n    MVT,\r\n    OWS,\r\n    Polyline,\r\n    WFS,\r\n    WKT,\r\n    WMSCapabilities,\r\n    WMSGetFeatureInfo,\r\n    WMTSCapabilities,\r\n  };\r\n\r\n  decorate(child: DraganddropInteractionComponent) {\r\n    if (child.formatConstructors) {\r\n      child.formatConstructors = this.getFormat(child.formatConstructors);\r\n    }\r\n  }\r\n\r\n  getFormat(featureConlist: any[]) {\r\n    return featureConlist.map(item => {\r\n      //@FIXME: ol打包问题产生 && item instanceof FeatureFormat\r\n      if (typeof item === 'function') {\r\n        return item;\r\n      }\r\n      let formatCon = this.defaultFormat[item];\r\n      if (formatCon) {\r\n        return formatCon;\r\n      } else {\r\n        throw new Error('DragandDrop不存在当前FeatureFormat');\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = ol.format;","import * as angular from 'angular';\r\nimport { Options, GeometryFunction, DrawEvent } from 'ol/interaction/Draw';\r\nimport { Draw } from 'ol/interaction';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { DrawInteractionExtend } from './draw.component.extend';\r\n\r\nexport class DrawInteractionComponent extends DrawInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Draw;\r\n  protected host: MapComponent;\r\n\r\n  type: GeometryType;\r\n  clickTolerance?: number;\r\n  features?: Collection<Feature<Geometry>>;\r\n  source?: VectorSource<Geometry>;\r\n  dragVertexDelay?: number;\r\n  snapTolerance?: number;\r\n  stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  finishCondition?: Condition;\r\n  style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  geometryName?: string;\r\n  condition?: Condition;\r\n  freehand?: boolean;\r\n  freehandCondition?: Condition;\r\n  wrapX?: boolean;\r\n\r\n  public onChange = angular.noop;\r\n  public onChangeActive = angular.noop;\r\n  public onDrawEnd = angular.noop;\r\n  public onDrawStart = angular.noop;\r\n  public onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    super.init(this.type);\r\n    this.instance = new Draw(this);\r\n    this.instance.on('change', (event: DrawEvent) => this.onChange({ event }));\r\n    this.instance.on('change:active', (event: DrawEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('drawend', (event: DrawEvent) =>\r\n      this.onDrawEnd({ event }),\r\n    );\r\n    this.instance.on('drawstart', (event: DrawEvent) =>\r\n      this.onDrawStart({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: DrawEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    type: '<',\r\n    clickTolerance: '<?',\r\n    features: '<?',\r\n    source: '<?',\r\n    dragVertexDelay: '<?',\r\n    snapTolerance: '<?',\r\n    stopClick: '<?',\r\n    maxPoints: '<?',\r\n    minPoints: '<?',\r\n    finishCondition: '<?',\r\n    style: '<?',\r\n    geometryFunction: '<?',\r\n    geometryName: '<?',\r\n    condition: '<?',\r\n    freehand: '<?',\r\n    freehandCondition: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onChangeActive: '&?',\r\n    onDrawEnd: '&?',\r\n    onDrawStart: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DrawInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraw = {\r\n  name: 'aolInteractionDraw',\r\n  ...component,\r\n};\r\n","import GeometryType from 'ol/geom/GeometryType';\r\nimport { Options, GeometryFunction } from 'ol/interaction/Draw';\r\nimport { Polygon } from 'ol/geom';\r\n\r\nexport abstract class DrawInteractionExtend implements Options {\r\n  type: any;\r\n  // clickTolerance?: number;\r\n  // features?: Collection<Feature<Geometry>>;\r\n  // source?: VectorSource<Geometry>;\r\n  // dragVertexDelay?: number;\r\n  // snapTolerance?: number;\r\n  // stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  // finishCondition?: Condition;\r\n  // style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  // geometryName?: string;\r\n  // condition?: Condition;\r\n  // freehand?: boolean;\r\n  // freehandCondition?: Condition;\r\n  // wrapX?: boolean;\r\n\r\n  init(type: GeometryType | 'Rectangle') {\r\n    switch (type) {\r\n      case 'Rectangle':\r\n        this.__createRectangleParams();\r\n        break;\r\n      default:\r\n        this.type = type;\r\n        break;\r\n    }\r\n  }\r\n\r\n  __createRectangleParams() {\r\n    this.maxPoints = 2;\r\n    this.type = 'LineString';\r\n    this.geometryFunction = (coordinates: any, geometry) => {\r\n      //如果geometry对象不存在或者为空，则创建\r\n      if (!geometry) {\r\n        //多面几何图形下设置\r\n        geometry = new Polygon([]);\r\n      }\r\n      // 开始坐标\r\n      var start = coordinates[0];\r\n      // 结束坐标\r\n      var end = coordinates[1];\r\n      // 根据开始与结束坐标绘制,从起始点，回到起始点\r\n      geometry.setCoordinates([\r\n        [start, [start[0], end[1]], end, [end[0], start[1]], start],\r\n      ]);\r\n      // 返回几何图形坐标进行渲染\r\n      return geometry;\r\n    };\r\n  }\r\n}\r\n","/**\n * @module ol/util\n */\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n    return /** @type {?} */ ((function () {\n        throw new Error('Unimplemented abstract method.');\n    })());\n}\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nvar uidCounter_ = 0;\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n    return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport var VERSION = '6.2.1';\n//# sourceMappingURL=util.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' + path +\n            '/doc/errors/#' + code + ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n    if (!assertion) {\n        throw new AssertionError(errorCode);\n    }\n}\n//# sourceMappingURL=asserts.js.map","/**\n * @module ol/TileRange\n */\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nvar TileRange = /** @class */ (function () {\n    /**\n     * @param {number} minX Minimum X.\n     * @param {number} maxX Maximum X.\n     * @param {number} minY Minimum Y.\n     * @param {number} maxY Maximum Y.\n     */\n    function TileRange(minX, maxX, minY, maxY) {\n        /**\n         * @type {number}\n         */\n        this.minX = minX;\n        /**\n         * @type {number}\n         */\n        this.maxX = maxX;\n        /**\n         * @type {number}\n         */\n        this.minY = minY;\n        /**\n         * @type {number}\n         */\n        this.maxY = maxY;\n    }\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {boolean} Contains tile coordinate.\n     */\n    TileRange.prototype.contains = function (tileCoord) {\n        return this.containsXY(tileCoord[1], tileCoord[2]);\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Contains.\n     */\n    TileRange.prototype.containsTileRange = function (tileRange) {\n        return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n            this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n    };\n    /**\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @return {boolean} Contains coordinate.\n     */\n    TileRange.prototype.containsXY = function (x, y) {\n        return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Equals.\n     */\n    TileRange.prototype.equals = function (tileRange) {\n        return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n            this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     */\n    TileRange.prototype.extend = function (tileRange) {\n        if (tileRange.minX < this.minX) {\n            this.minX = tileRange.minX;\n        }\n        if (tileRange.maxX > this.maxX) {\n            this.maxX = tileRange.maxX;\n        }\n        if (tileRange.minY < this.minY) {\n            this.minY = tileRange.minY;\n        }\n        if (tileRange.maxY > this.maxY) {\n            this.maxY = tileRange.maxY;\n        }\n    };\n    /**\n     * @return {number} Height.\n     */\n    TileRange.prototype.getHeight = function () {\n        return this.maxY - this.minY + 1;\n    };\n    /**\n     * @return {import(\"./size.js\").Size} Size.\n     */\n    TileRange.prototype.getSize = function () {\n        return [this.getWidth(), this.getHeight()];\n    };\n    /**\n     * @return {number} Width.\n     */\n    TileRange.prototype.getWidth = function () {\n        return this.maxX - this.minX + 1;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Intersects.\n     */\n    TileRange.prototype.intersects = function (tileRange) {\n        return this.minX <= tileRange.maxX &&\n            this.maxX >= tileRange.minX &&\n            this.minY <= tileRange.maxY &&\n            this.maxY >= tileRange.minY;\n    };\n    return TileRange;\n}());\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n    if (tileRange !== undefined) {\n        tileRange.minX = minX;\n        tileRange.maxX = maxX;\n        tileRange.minY = minY;\n        tileRange.maxY = maxY;\n        return tileRange;\n    }\n    else {\n        return new TileRange(minX, maxX, minY, maxY);\n    }\n}\nexport default TileRange;\n//# sourceMappingURL=TileRange.js.map","/**\n * @module ol/array\n */\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n    var mid, cmp;\n    var comparator = opt_comparator || numberSafeCompareFunction;\n    var low = 0;\n    var high = haystack.length;\n    var found = false;\n    while (low < high) {\n        /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n         * to double (which gives the wrong results). */\n        mid = low + (high - low >> 1);\n        cmp = +comparator(haystack[mid], needle);\n        if (cmp < 0.0) { /* Too low. */\n            low = mid + 1;\n        }\n        else { /* Key found or too high */\n            high = mid;\n            found = !cmp;\n        }\n    }\n    /* Key not found. */\n    return found ? low : ~low;\n}\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n}\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n    return arr.indexOf(obj) >= 0;\n}\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n    var n = arr.length;\n    if (arr[0] <= target) {\n        return 0;\n    }\n    else if (target <= arr[n - 1]) {\n        return n - 1;\n    }\n    else {\n        var i = void 0;\n        if (direction > 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] < target) {\n                    return i - 1;\n                }\n            }\n        }\n        else if (direction < 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] <= target) {\n                    return i;\n                }\n            }\n        }\n        else {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] == target) {\n                    return i;\n                }\n                else if (arr[i] < target) {\n                    if (arr[i - 1] - target < target - arr[i]) {\n                        return i - 1;\n                    }\n                    else {\n                        return i;\n                    }\n                }\n            }\n        }\n        return n - 1;\n    }\n}\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n    while (begin < end) {\n        var tmp = arr[begin];\n        arr[begin] = arr[end];\n        arr[end] = tmp;\n        ++begin;\n        --end;\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n    var extension = Array.isArray(data) ? data : [data];\n    var length = extension.length;\n    for (var i = 0; i < length; i++) {\n        arr[arr.length] = extension[i];\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n    var i = arr.indexOf(obj);\n    var found = i > -1;\n    if (found) {\n        arr.splice(i, 1);\n    }\n    return found;\n}\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n    var length = arr.length >>> 0;\n    var value;\n    for (var i = 0; i < length; i++) {\n        value = arr[i];\n        if (func(value, i, arr)) {\n            return value;\n        }\n    }\n    return null;\n}\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n    var len1 = arr1.length;\n    if (len1 !== arr2.length) {\n        return false;\n    }\n    for (var i = 0; i < len1; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n    var length = arr.length;\n    var tmp = Array(arr.length);\n    var i;\n    for (i = 0; i < length; i++) {\n        tmp[i] = { index: i, value: arr[i] };\n    }\n    tmp.sort(function (a, b) {\n        return compareFnc(a.value, b.value) || a.index - b.index;\n    });\n    for (i = 0; i < arr.length; i++) {\n        arr[i] = tmp[i].value;\n    }\n}\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n    var index;\n    var found = !arr.every(function (el, idx) {\n        index = idx;\n        return !func(el, idx, arr);\n    });\n    return found ? index : -1;\n}\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n    var compare = opt_func || numberSafeCompareFunction;\n    return arr.every(function (currentVal, index) {\n        if (index === 0) {\n            return true;\n        }\n        var res = compare(arr[index - 1], currentVal);\n        return !(res > 0 || opt_strict && res === 0);\n    });\n}\n//# sourceMappingURL=array.js.map","/**\n * @module ol/extent\n */\nimport { assert } from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n    var extent = createEmpty();\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n    var minX = Math.min.apply(null, xs);\n    var minY = Math.min.apply(null, ys);\n    var maxX = Math.max.apply(null, xs);\n    var maxY = Math.max.apply(null, ys);\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0] - value;\n        opt_extent[1] = extent[1] - value;\n        opt_extent[2] = extent[2] + value;\n        opt_extent[3] = extent[3] + value;\n        return opt_extent;\n    }\n    else {\n        return [\n            extent[0] - value,\n            extent[1] - value,\n            extent[2] + value,\n            extent[3] + value\n        ];\n    }\n}\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent.slice();\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n    var dx, dy;\n    if (x < extent[0]) {\n        dx = extent[0] - x;\n    }\n    else if (extent[2] < x) {\n        dx = x - extent[2];\n    }\n    else {\n        dx = 0;\n    }\n    if (y < extent[1]) {\n        dy = extent[1] - y;\n    }\n    else if (extent[3] < y) {\n        dy = y - extent[3];\n    }\n    else {\n        dy = 0;\n    }\n    return dx * dx + dy * dy;\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n    return containsXY(extent, coordinate[0], coordinate[1]);\n}\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n    return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n        extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var relationship = Relationship.UNKNOWN;\n    if (x < minX) {\n        relationship = relationship | Relationship.LEFT;\n    }\n    else if (x > maxX) {\n        relationship = relationship | Relationship.RIGHT;\n    }\n    if (y < minY) {\n        relationship = relationship | Relationship.BELOW;\n    }\n    else if (y > maxY) {\n        relationship = relationship | Relationship.ABOVE;\n    }\n    if (relationship === Relationship.UNKNOWN) {\n        relationship = Relationship.INTERSECTING;\n    }\n    return relationship;\n}\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n    return [Infinity, Infinity, -Infinity, -Infinity];\n}\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = minX;\n        opt_extent[1] = minY;\n        opt_extent[2] = maxX;\n        opt_extent[3] = maxY;\n        return opt_extent;\n    }\n    else {\n        return [minX, minY, maxX, maxY];\n    }\n}\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n    return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    return createOrUpdate(x, y, x, y, opt_extent);\n}\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendCoordinates(extent, coordinates);\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendRings(extent, rings);\n}\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n    return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n        extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n    if (extent2[0] < extent1[0]) {\n        extent1[0] = extent2[0];\n    }\n    if (extent2[2] > extent1[2]) {\n        extent1[2] = extent2[2];\n    }\n    if (extent2[1] < extent1[1]) {\n        extent1[1] = extent2[1];\n    }\n    if (extent2[3] > extent1[3]) {\n        extent1[3] = extent2[3];\n    }\n    return extent1;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n    if (coordinate[0] < extent[0]) {\n        extent[0] = coordinate[0];\n    }\n    if (coordinate[0] > extent[2]) {\n        extent[2] = coordinate[0];\n    }\n    if (coordinate[1] < extent[1]) {\n        extent[1] = coordinate[1];\n    }\n    if (coordinate[1] > extent[3]) {\n        extent[3] = coordinate[1];\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n    for (; offset < end; offset += stride) {\n        extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n    for (var i = 0, ii = rings.length; i < ii; ++i) {\n        extendCoordinates(extent, rings[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n    extent[0] = Math.min(extent[0], x);\n    extent[1] = Math.min(extent[1], y);\n    extent[2] = Math.max(extent[2], x);\n    extent[3] = Math.max(extent[3], y);\n}\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n    var val;\n    val = callback(getBottomLeft(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getBottomRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopLeft(extent));\n    if (val) {\n        return val;\n    }\n    return false;\n}\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n    var area = 0;\n    if (!isEmpty(extent)) {\n        area = getWidth(extent) * getHeight(extent);\n    }\n    return area;\n}\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n    return [extent[0], extent[1]];\n}\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n    return [extent[2], extent[1]];\n}\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n    return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n    var coordinate;\n    if (corner === Corner.BOTTOM_LEFT) {\n        coordinate = getBottomLeft(extent);\n    }\n    else if (corner === Corner.BOTTOM_RIGHT) {\n        coordinate = getBottomRight(extent);\n    }\n    else if (corner === Corner.TOP_LEFT) {\n        coordinate = getTopLeft(extent);\n    }\n    else if (corner === Corner.TOP_RIGHT) {\n        coordinate = getTopRight(extent);\n    }\n    else {\n        assert(false, 13); // Invalid corner\n    }\n    return coordinate;\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n    var minX = Math.min(extent1[0], extent2[0]);\n    var minY = Math.min(extent1[1], extent2[1]);\n    var maxX = Math.max(extent1[2], extent2[2]);\n    var maxY = Math.max(extent1[3], extent2[3]);\n    return (maxX - minX) * (maxY - minY);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n    var dx = resolution * size[0] / 2;\n    var dy = resolution * size[1] / 2;\n    var cosRotation = Math.cos(rotation);\n    var sinRotation = Math.sin(rotation);\n    var xCos = dx * cosRotation;\n    var xSin = dx * sinRotation;\n    var yCos = dy * cosRotation;\n    var ySin = dy * sinRotation;\n    var x = center[0];\n    var y = center[1];\n    var x0 = x - xCos + ySin;\n    var x1 = x - xCos - ySin;\n    var x2 = x + xCos - ySin;\n    var x3 = x + xCos + ySin;\n    var y0 = y - xSin - yCos;\n    var y1 = y - xSin + yCos;\n    var y2 = y + xSin + yCos;\n    var y3 = y + xSin - yCos;\n    return createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n}\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n    return extent[3] - extent[1];\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n    var intersection = getIntersection(extent1, extent2);\n    return getArea(intersection);\n}\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n    var intersection = opt_extent ? opt_extent : createEmpty();\n    if (intersects(extent1, extent2)) {\n        if (extent1[0] > extent2[0]) {\n            intersection[0] = extent1[0];\n        }\n        else {\n            intersection[0] = extent2[0];\n        }\n        if (extent1[1] > extent2[1]) {\n            intersection[1] = extent1[1];\n        }\n        else {\n            intersection[1] = extent2[1];\n        }\n        if (extent1[2] < extent2[2]) {\n            intersection[2] = extent1[2];\n        }\n        else {\n            intersection[2] = extent2[2];\n        }\n        if (extent1[3] < extent2[3]) {\n            intersection[3] = extent1[3];\n        }\n        else {\n            intersection[3] = extent2[3];\n        }\n    }\n    else {\n        createOrUpdateEmpty(intersection);\n    }\n    return intersection;\n}\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n    return getWidth(extent) + getHeight(extent);\n}\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n    return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n    return [extent[0], extent[3]];\n}\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n    return [extent[2], extent[3]];\n}\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n    return extent[2] - extent[0];\n}\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n    return extent1[0] <= extent2[2] &&\n        extent1[2] >= extent2[0] &&\n        extent1[1] <= extent2[3] &&\n        extent1[3] >= extent2[1];\n}\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n    return extent[2] < extent[0] || extent[3] < extent[1];\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent;\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n    var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n    var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n    extent[0] -= deltaX;\n    extent[2] += deltaX;\n    extent[1] -= deltaY;\n    extent[3] += deltaY;\n}\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n    var intersects = false;\n    var startRel = coordinateRelationship(extent, start);\n    var endRel = coordinateRelationship(extent, end);\n    if (startRel === Relationship.INTERSECTING ||\n        endRel === Relationship.INTERSECTING) {\n        intersects = true;\n    }\n    else {\n        var minX = extent[0];\n        var minY = extent[1];\n        var maxX = extent[2];\n        var maxY = extent[3];\n        var startX = start[0];\n        var startY = start[1];\n        var endX = end[0];\n        var endY = end[1];\n        var slope = (endY - startY) / (endX - startX);\n        var x = void 0, y = void 0;\n        if (!!(endRel & Relationship.ABOVE) &&\n            !(startRel & Relationship.ABOVE)) {\n            // potentially intersects top\n            x = endX - ((endY - maxY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.RIGHT) &&\n            !(startRel & Relationship.RIGHT)) {\n            // potentially intersects right\n            y = endY - ((endX - maxX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n        if (!intersects && !!(endRel & Relationship.BELOW) &&\n            !(startRel & Relationship.BELOW)) {\n            // potentially intersects bottom\n            x = endX - ((endY - minY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.LEFT) &&\n            !(startRel & Relationship.LEFT)) {\n            // potentially intersects left\n            y = endY - ((endX - minX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n    }\n    return intersects;\n}\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n    var coordinates = [\n        extent[0], extent[1],\n        extent[0], extent[3],\n        extent[2], extent[1],\n        extent[2], extent[3]\n    ];\n    transformFn(coordinates, coordinates, 2);\n    var xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n    var ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n    return _boundingExtentXYs(xs, ys, opt_extent);\n}\n//# sourceMappingURL=extent.js.map","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it…\n        cosh = Math.cosh;\n    }\n    else {\n        // … else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n}());\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return angleInRadians * 180 / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return angleInDegrees * Math.PI / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n//# sourceMappingURL=math.js.map","/**\n * @module ol/size\n */\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = size[0] + 2 * num;\n    opt_size[1] = size[1] + 2 * num;\n    return opt_size;\n}\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n    return size[0] > 0 && size[1] > 0;\n}\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = (size[0] * ratio + 0.5) | 0;\n    opt_size[1] = (size[1] * ratio + 0.5) | 0;\n    return opt_size;\n}\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    else {\n        if (opt_size === undefined) {\n            opt_size = [size, size];\n        }\n        else {\n            opt_size[0] = size;\n            opt_size[1] = size;\n        }\n        return opt_size;\n    }\n}\n//# sourceMappingURL=size.js.map","/**\n * @module ol/tilecoord\n */\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n    if (opt_tileCoord !== undefined) {\n        opt_tileCoord[0] = z;\n        opt_tileCoord[1] = x;\n        opt_tileCoord[2] = y;\n        return opt_tileCoord;\n    }\n    else {\n        return [z, x, y];\n    }\n}\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n    return z + '/' + x + '/' + y;\n}\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n    return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n    return key.split('/').map(Number);\n}\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n    return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n    var z = tileCoord[0];\n    var x = tileCoord[1];\n    var y = tileCoord[2];\n    if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n        return false;\n    }\n    var extent = tileGrid.getExtent();\n    var tileRange;\n    if (!extent) {\n        tileRange = tileGrid.getFullTileRange(z);\n    }\n    else {\n        tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    }\n    if (!tileRange) {\n        return true;\n    }\n    else {\n        return tileRange.containsXY(x, y);\n    }\n}\n//# sourceMappingURL=tilecoord.js.map","/**\n * @module ol/tilegrid/TileGrid\n */\nimport { DEFAULT_TILE_SIZE } from './common.js';\nimport { assert } from '../asserts.js';\nimport TileRange, { createOrUpdate as createOrUpdateTileRange } from '../TileRange.js';\nimport { isSorted, linearFindNearest } from '../array.js';\nimport { createOrUpdate, getTopLeft } from '../extent.js';\nimport { clamp } from '../math.js';\nimport { toSize } from '../size.js';\nimport { createOrUpdate as createOrUpdateTileCoord } from '../tilecoord.js';\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nvar tmpTileCoord = [0, 0, 0];\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and downwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and downwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. If specified the values\n * define each zoom level's extent together with the `origin` or `origins`.\n * A grid `extent` can be configured in addition, and will further limit the extent\n * for which tile requests are made by sources. If the bottom-left corner of\n * an extent is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nvar TileGrid = /** @class */ (function () {\n    /**\n     * @param {Options} options Tile grid options.\n     */\n    function TileGrid(options) {\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n        /**\n         * @private\n         * @type {!Array<number>}\n         */\n        this.resolutions_ = options.resolutions;\n        assert(isSorted(this.resolutions_, function (a, b) {\n            return b - a;\n        }, true), 17); // `resolutions` must be sorted in descending order\n        // check if we've got a consistent zoom factor and origin\n        var zoomFactor;\n        if (!options.origins) {\n            for (var i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n                if (!zoomFactor) {\n                    zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n                }\n                else {\n                    if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n                        zoomFactor = undefined;\n                        break;\n                    }\n                }\n            }\n        }\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zoomFactor_ = zoomFactor;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.maxZoom = this.resolutions_.length - 1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        this.origin_ = options.origin !== undefined ? options.origin : null;\n        /**\n         * @private\n         * @type {Array<import(\"../coordinate.js\").Coordinate>}\n         */\n        this.origins_ = null;\n        if (options.origins !== undefined) {\n            this.origins_ = options.origins;\n            assert(this.origins_.length == this.resolutions_.length, 20); // Number of `origins` and `resolutions` must be equal\n        }\n        var extent = options.extent;\n        if (extent !== undefined &&\n            !this.origin_ && !this.origins_) {\n            this.origin_ = getTopLeft(extent);\n        }\n        assert((!this.origin_ && this.origins_) || (this.origin_ && !this.origins_), 18); // Either `origin` or `origins` must be configured, never both\n        /**\n         * @private\n         * @type {Array<number|import(\"../size.js\").Size>}\n         */\n        this.tileSizes_ = null;\n        if (options.tileSizes !== undefined) {\n            this.tileSizes_ = options.tileSizes;\n            assert(this.tileSizes_.length == this.resolutions_.length, 19); // Number of `tileSizes` and `resolutions` must be equal\n        }\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.tileSize_ = options.tileSize !== undefined ?\n            options.tileSize :\n            !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n        assert((!this.tileSize_ && this.tileSizes_) ||\n            (this.tileSize_ && !this.tileSizes_), 22); // Either `tileSize` or `tileSizes` must be configured, never both\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = extent !== undefined ? extent : null;\n        /**\n         * @private\n         * @type {Array<import(\"../TileRange.js\").default>}\n         */\n        this.fullTileRanges_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.tmpSize_ = [0, 0];\n        if (options.sizes !== undefined) {\n            this.fullTileRanges_ = options.sizes.map(function (size, z) {\n                var tileRange = new TileRange(Math.min(0, size[0]), Math.max(size[0] - 1, -1), Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n                return tileRange;\n            }, this);\n        }\n        else if (extent) {\n            this.calculateTileRanges_(extent);\n        }\n    }\n    /**\n     * Call a function with each tile coordinate for a given extent and zoom level.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} zoom Integer zoom level.\n     * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.forEachTileCoord = function (extent, zoom, callback) {\n        var tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n        for (var i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n            for (var j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n                callback([zoom, i, j]);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {boolean} Callback succeeded.\n     */\n    TileGrid.prototype.forEachTileCoordParentTileRange = function (tileCoord, callback, opt_tileRange, opt_extent) {\n        var tileRange, x, y;\n        var tileCoordExtent = null;\n        var z = tileCoord[0] - 1;\n        if (this.zoomFactor_ === 2) {\n            x = tileCoord[1];\n            y = tileCoord[2];\n        }\n        else {\n            tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n        }\n        while (z >= this.minZoom) {\n            if (this.zoomFactor_ === 2) {\n                x = Math.floor(x / 2);\n                y = Math.floor(y / 2);\n                tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n            }\n            else {\n                tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n            }\n            if (callback(z, tileRange)) {\n                return true;\n            }\n            --z;\n        }\n        return false;\n    };\n    /**\n     * Get the extent for this tile grid, if it was configured.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the maximum zoom level for the grid.\n     * @return {number} Max zoom.\n     * @api\n     */\n    TileGrid.prototype.getMaxZoom = function () {\n        return this.maxZoom;\n    };\n    /**\n     * Get the minimum zoom level for the grid.\n     * @return {number} Min zoom.\n     * @api\n     */\n    TileGrid.prototype.getMinZoom = function () {\n        return this.minZoom;\n    };\n    /**\n     * Get the origin for the grid at the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {import(\"../coordinate.js\").Coordinate} Origin.\n     * @api\n     */\n    TileGrid.prototype.getOrigin = function (z) {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        else {\n            return this.origins_[z];\n        }\n    };\n    /**\n     * Get the resolution for the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {number} Resolution.\n     * @api\n     */\n    TileGrid.prototype.getResolution = function (z) {\n        return this.resolutions_[z];\n    };\n    /**\n     * Get the list of resolutions for the tile grid.\n     * @return {Array<number>} Resolutions.\n     * @api\n     */\n    TileGrid.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileCoordChildTileRange = function (tileCoord, opt_tileRange, opt_extent) {\n        if (tileCoord[0] < this.maxZoom) {\n            if (this.zoomFactor_ === 2) {\n                var minX = tileCoord[1] * 2;\n                var minY = tileCoord[2] * 2;\n                return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n            }\n            var tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n            return this.getTileRangeForExtentAndZ(tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n        }\n        return null;\n    };\n    /**\n     * Get the extent for a tile range.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    TileGrid.prototype.getTileRangeExtent = function (z, tileRange, opt_extent) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n        var maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n        var minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n        var maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get a tile range for the given extent and integer zoom level.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileRangeForExtentAndZ = function (extent, z, opt_tileRange) {\n        var tileCoord = tmpTileCoord;\n        this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n        var minX = tileCoord[1];\n        var minY = tileCoord[2];\n        this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n        return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n     */\n    TileGrid.prototype.getTileCoordCenter = function (tileCoord) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        return [\n            origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n            origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution\n        ];\n    };\n    /**\n     * Get the extent of a tile coordinate.\n     *\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordExtent = function (tileCoord, opt_extent) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        var minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n        var minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n        var maxX = minX + tileSize[0] * resolution;\n        var maxY = minY + tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get the tile coordinate for the given map coordinate and resolution.  This\n     * method considers that coordinates that intersect tile boundaries should be\n     * assigned the higher tile coordinate.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndResolution = function (coordinate, resolution, opt_tileCoord) {\n        return this.getTileCoordForXYAndResolution_(coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n    };\n    /**\n     * Note that this method should not be called for resolutions that correspond\n     * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {number} resolution Resolution (for a non-integer zoom level).\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndResolution_ = function (x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n        var z = this.getZForResolution(resolution);\n        var scale = resolution / this.getResolution(z);\n        var origin = this.getOrigin(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = scale * xFromOrigin / tileSize[0];\n        var tileCoordY = scale * yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n     * they should have separate implementations.  This method is for integer zoom\n     * levels.  The other method should only be called for resolutions corresponding\n     * to non-integer zoom levels.\n     * @param {number} x Map x coordinate.\n     * @param {number} y Map y coordinate.\n     * @param {number} z Integer zoom level.\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndZ_ = function (x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = xFromOrigin / tileSize[0];\n        var tileCoordY = yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Get a tile coordinate given a map coordinate and zoom level.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} z Zoom level.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndZ = function (coordinate, z, opt_tileCoord) {\n        return this.getTileCoordForXYAndZ_(coordinate[0], coordinate[1], z, false, opt_tileCoord);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {number} Tile resolution.\n     */\n    TileGrid.prototype.getTileCoordResolution = function (tileCoord) {\n        return this.resolutions_[tileCoord[0]];\n    };\n    /**\n     * Get the tile size for a zoom level. The type of the return value matches the\n     * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n     * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n     * @param {number} z Z.\n     * @return {number|import(\"../size.js\").Size} Tile size.\n     * @api\n     */\n    TileGrid.prototype.getTileSize = function (z) {\n        if (this.tileSize_) {\n            return this.tileSize_;\n        }\n        else {\n            return this.tileSizes_[z];\n        }\n    };\n    /**\n     * @param {number} z Zoom level.\n     * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n     */\n    TileGrid.prototype.getFullTileRange = function (z) {\n        if (!this.fullTileRanges_) {\n            return null;\n        }\n        else {\n            return this.fullTileRanges_[z];\n        }\n    };\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number=} opt_direction If 0, the nearest resolution will be used.\n     *     If 1, the nearest lower resolution will be used. If -1, the nearest\n     *     higher resolution will be used. Default is 0.\n     * @return {number} Z.\n     * @api\n     */\n    TileGrid.prototype.getZForResolution = function (resolution, opt_direction) {\n        var z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n        return clamp(z, this.minZoom, this.maxZoom);\n    };\n    /**\n     * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n     * @private\n     */\n    TileGrid.prototype.calculateTileRanges_ = function (extent) {\n        var length = this.resolutions_.length;\n        var fullTileRanges = new Array(length);\n        for (var z = this.minZoom; z < length; ++z) {\n            fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n        }\n        this.fullTileRanges_ = fullTileRanges;\n    };\n    return TileGrid;\n}());\nexport default TileGrid;\n//# sourceMappingURL=TileGrid.js.map","/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map"],"sourceRoot":""}