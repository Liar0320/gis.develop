{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/ol/util.js","webpack:///./node_modules/ol/AssertionError.js","webpack:///./node_modules/ol/asserts.js","webpack:///./src/core/map.component.ts","webpack:///./node_modules/ol/array.js","webpack:///./node_modules/ol/math.js","webpack:///external \"angular\"","webpack:///./node_modules/ol/extent.js","webpack:///./src/core/layers/index.ts","webpack:///./src/core/sources/source.component.ts","webpack:///./src/core/styles/style.component.ts","webpack:///external \"ol.style\"","webpack:///external \"ol.source\"","webpack:///external \"ol.interaction\"","webpack:///external \"ol\"","webpack:///./src/core/layers/layer.component.ts","webpack:///./src/core/feature.component.ts","webpack:///external \"ol.layer\"","webpack:///./src/core/styles/circle.component.ts","webpack:///./src/core/view.component.ts","webpack:///./src/core/sources/index.ts","webpack:///./src/core/geometry.component.ts","webpack:///external \"ol.geom\"","webpack:///external \"ol.proj\"","webpack:///./src/core/styles/text.component.ts","webpack:///./src/core/index.ts","webpack:///./src/core/sources/xyz.component.ts","webpack:///./src/core/layers/layertile.component.ts","webpack:///./src/core/layers/layervector.component.ts","webpack:///./src/core/layers/layergroup.component.ts","webpack:///./src/core/layers/layerwebgl.component.ts","webpack:///./src/core/sources/xyz.component.extend.ts","webpack:///./src/core/sources/osmmaps.component.ts","webpack:///./src/core/sources/vector.component.ts","webpack:///./src/core/sources/cluster.component.ts","webpack:///./src/core/sources/tiledebug.component.ts","webpack:///./src/core/coordinate.component.ts","webpack:///./src/core/styles/index.ts","webpack:///./src/core/styles/stroke.component.ts","webpack:///./src/core/styles/fill.component.ts","webpack:///./src/core/styles/icon.component.ts","webpack:///./src/core/overlay.component.ts","webpack:///./src/core/interactions/index.ts","webpack:///./src/core/interactions/default.component.ts","webpack:///./src/core/interactions/modify.component.ts","webpack:///./src/core/interactions/select.component.ts","webpack:///./src/core/interactions/select.component.extend.ts","webpack:///external \"ol.events.condition\"","webpack:///./src/core/interactions/draganddrop.component.ts","webpack:///./src/core/interactions/draganddrop.component.extend.ts","webpack:///external \"ol.format\"","webpack:///./src/core/interactions/draw.component.ts","webpack:///./src/core/interactions/draw.component.extend.ts","webpack:///./node_modules/ol/obj.js","webpack:///./node_modules/ol/webgl.js","webpack:///./node_modules/ol/webgl/Buffer.js","webpack:///./node_modules/ol/Disposable.js","webpack:///./node_modules/ol/webgl/ContextEventType.js","webpack:///./node_modules/ol/transform.js","webpack:///./node_modules/ol/vec/mat4.js","webpack:///./node_modules/ol/webgl/PostProcessingPass.js","webpack:///./node_modules/ol/webgl/Helper.js","webpack:///./node_modules/ol/geom/GeometryType.js","webpack:///./node_modules/ol/ImageState.js","webpack:///./node_modules/ol/events.js","webpack:///./node_modules/ol/functions.js","webpack:///./node_modules/ol/events/Event.js","webpack:///./node_modules/ol/events/Target.js","webpack:///./node_modules/ol/events/EventType.js","webpack:///./node_modules/ol/Observable.js","webpack:///./node_modules/ol/source/State.js","webpack:///./node_modules/ol/renderer/Layer.js","webpack:///./node_modules/ol/renderer/webgl/Layer.js","webpack:///./node_modules/ol/ViewHint.js","webpack:///./node_modules/ol/worker/webgl.js","webpack:///./node_modules/ol/webgl/RenderTarget.js","webpack:///./node_modules/ol/ObjectEventType.js","webpack:///./node_modules/ol/Object.js","webpack:///./node_modules/ol/layer/Property.js","webpack:///./node_modules/ol/layer/Base.js","webpack:///./node_modules/ol/render/EventType.js","webpack:///./node_modules/ol/layer/Layer.js","webpack:///./node_modules/ol/color.js","webpack:///./node_modules/ol/colorlike.js","webpack:///./node_modules/ol/dom.js","webpack:///./node_modules/ol/css.js","webpack:///./node_modules/ol/render/canvas.js","webpack:///./node_modules/ol/style/Image.js","webpack:///./node_modules/ol/style/RegularShape.js","webpack:///./node_modules/ol/style/Circle.js","webpack:///./node_modules/ol/style/Fill.js","webpack:///./node_modules/ol/style/Stroke.js","webpack:///./node_modules/ol/style/Style.js","webpack:///./node_modules/ol/layer/BaseVector.js","webpack:///./node_modules/ol/source/VectorEventType.js","webpack:///./node_modules/ol/renderer/webgl/PointsLayer.js","webpack:///./node_modules/ol/style/expressions.js","webpack:///./node_modules/ol/webgl/ShaderBuilder.js","webpack:///./node_modules/ol/layer/WebGLPoints.js","webpack:///./node_modules/ol/tilegrid/common.js","webpack:///./node_modules/ol/TileRange.js","webpack:///./node_modules/ol/size.js","webpack:///./node_modules/ol/tilecoord.js","webpack:///./node_modules/ol/tilegrid/TileGrid.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","abstract","Error","uidCounter_","getUid","obj","ol_uid","String","VERSION","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","this","constructor","_super","AssertionError","code","_this","message","split","assert","assertion","errorCode","host","componentType","onDblClick","angular","noop","onPointerDrag","onPointerMove","onPostCompose","onPostRender","onPreCompose","onPropertyChange","onSingleClick","onClick","onMoveEnd","controls","interactions","$onInit","instance","Map","setTarget","on","event","MapComponent","component","bindings","pixelRatio","keyboardEventTarget","onPostcompose","onPostrender","onRenderComplete","controller","numberSafeCompareFunction","a","includes","arr","indexOf","linearFindNearest","target","direction","length","equals","arr1","arr2","len1","isSorted","opt_func","opt_strict","compare","every","currentVal","index","res","clamp","min","max","Math","cosh","buffer","extent","opt_extent","createEmpty","Infinity","createOrUpdate","minX","minY","maxX","maxY","extent1","extent2","getTopLeft","$onDestroy","setSource","_register","source","instanceDone","SourceComponent","sourceComponentConfig","attributions","attributionsCollapsible","featureHost","layerVectorHost","Style","setStyle","update","changed","style","getStyle","splice","$onChanges","changes","setImage","currentValue","setFill","setStroke","setText","setZIndex","StyleComponent","aolStyleComponent","geometry","fill","image","stroke","text","zIndex","require","aolLayerVector","aolStyle","ol","interaction","layerGroupComponent","mapComponent","prerender","undefined","postrender","setProperties","set","getLayers","push","remove","properties","un","previousValue","LayerComponent","layerComponentConfig","opacity","visible","minResolution","maxResolution","className","Feature","id","setId","addFeature","removeFeature","FeatureComponent","aolSourceVector","layer","radius","styleHost","$postLink","Circle","setRadius","styleCircleComponent","aolStyleCircleComponent","snapToPixel","aolStyleCircle","zoom","center","zoomAnimation","View","setView","animate","setZoom","ViewComponent","constrainRotation","enableRotation","maxZoom","minZoom","resolution","resolutions","rotation","zoomFactor","projection","change","LineString","setGeometry","GeometryLinestringComponent","aolGeometryLinestringComponent","aolGeometryLinestring","Point","GeometryPointComponent","aolGeometryPointComponent","aolGeometryPoint","Polygon","GeometryPolygonComponent","aolGeometryPolygonComponent","aolGeometryPolygon","geom","proj","Text","setFont","setOffsetX","setOffsetY","setScale","setRotation","setTextAlign","setTextBaseline","styleTextComponent","aolStyleTextComponent","font","maxAngle","offsetX","offsetY","overflow","placement","scale","rotateWithView","textAlign","textBaseline","backgroundFill","backgroundStroke","padding","aolStyleText","aolModule","aolLayerTile","aolLayerWebgl","aolLayerGroup","aolSourceXyz","aolSourceOsm","aolSourceCluster","aolSourceTiledebug","aolCoordinate","aolCollectionCoordinates","aolStyleStroke","aolStyleIcon","aolStyleFill","aolOverlay","aolInteractionDefaults","aolInteractionDraw","aolInteractionModify","aolInteractionSelect","aolInteractionDraganddrop","forEach","registerComponent","decorate","XYZ","SourceXYZExtend","SourceXYZComponent","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileGrid","tileLoadFunction","tilePixelRatio","tileSize","tileUrlFunction","url","urls","wrapX","transition","zDirection","Tile","LayerTileComponent","preload","useInterimTilesOnError","Vector","LayerVectorComponent","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","LayerGroupComponent","symbol","symbolType","size","color","offset","LayerWebglComponent","disableHitDetection","resolutions_4326","forEachTileCoord","OSM","ngOnChanges","SourceOSMComponent","layerWebglHost","addFeatures","SourceVectorComponent","features","format","loader","overlaps","strategy","useSpatialIndex","Cluster","SourceClusterComponent","distance","geometryFunction","TileDebug","SourceTiledebugComponent","srid","geometryPointHost","viewHost","referenceProjection","referenceProjectionCode","transformedCoordinates","isNumber","x","y","map","getView","getProjection","getCode","transform","setCoordinates","setCenter","CoordinateComponent","geometryLinestring","geometryPolygon","coordinates","coordinate","CollectionCoordinatesComponent","aolCollectionCoordinatesComponent","styleCircleHost","Stroke","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","StrokeComponent","aolStrokeComponent","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","width","styleTextHost","Fill","FillComponent","aolFillComponent","img","imgSize","height","Icon","setOpacity","styleIconComponent","aolStyleIconComponent","anchor","anchorOrigin","anchorXUnits","anchorYUnits","offsetOrigin","src","$element","element","position","fromLonLat","Overlay","addOverlay","setPosition","removeOverlay","OverlayComponent","positioning","stopEvent","insertFirst","autoPan","autoPanAnimation","autoPanMargin","addInteraction","removeInteraction","DefaultInteractionComponent","altShiftDragRotate","onFocusOnly","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","zoomDelta","zoomDuration","onModifyEnd","onModifyStart","onChange","onChangeActive","Modify","console","error","ModifyInteractionComponent","condition","deleteCondition","insertVertexCondition","pixelTolerance","onSelect","initCondition","Select","selected","getFeatures","dispatchEvent","type","deselected","mapBrowserEvent","SelectInteractionExtend","SelectInteractionComponent","addCondition","layers","removeCondition","toggleCondition","multi","filter","conditionType","altKeyOnly","altShiftKeysOnly","click","doubleClick","focus","mouseActionButton","mouseOnly","noModifierKeys","penOnly","platformModifierKeyOnly","pointerMove","primaryAction","shiftKeyOnly","singleClick","targetNotEditable","touchOnly","events","onAddFeatures","DragAndDrop","DraganddropInteractionExtend","DraganddropInteractionComponent","formatConstructors","defaultFormat","GPX","GeoJSON","IGC","KML","TopoJSON","EsriJSON","GML","IIIFInfo","MVT","OWS","Polyline","WFS","WKT","WMSCapabilities","WMSGetFeatureInfo","WMTSCapabilities","child","getFormat","featureConlist","item","formatCon","onDrawEnd","onDrawStart","init","Draw","DrawInteractionExtend","DrawInteractionComponent","clickTolerance","dragVertexDelay","snapTolerance","stopClick","maxPoints","minPoints","finishCondition","geometryName","freehand","freehandCondition","__createRectangleParams","start","end","assign","var_sources","TypeError","output","ii","arguments","clear","values","supportedExtensions","CONTEXT_IDS","getContext","canvas","opt_attributes","context","e","BufferUsage","getArrayClassForType","Float32Array","Uint32Array","WebGLArrayBuffer","opt_usage","array","usage","ofSize","fromArray","from","fromArrayBuffer","getType","getArray","getUsage","getSize","Disposable","disposed_","dispose","disposeInternal","tmp_","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","f","apply","compose","dx1","dy1","sx","sy","angle","dx2","dy2","sin","cos","makeInverse","mat","det","fromTransform","mat4","WebGLPostProcessingPass","options","gl_","webGlContext","gl","scaleRatio_","scaleRatio","renderTargetTexture_","createTexture","renderTargetTextureSize_","frameBuffer_","createFramebuffer","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","renderTargetProgram_","createProgram","attachShader","linkProgram","renderTargetVerticesBuffer_","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","renderTargetAttribLocation_","getAttribLocation","renderTargetUniformLocation_","getUniformLocation","renderTargetTextureLocation_","uniforms_","uniforms","keys","location","getGL","frameState","textureSize","drawingBufferWidth","drawingBufferHeight","bindFramebuffer","FRAMEBUFFER","getFrameBuffer","viewport","internalFormat","RGBA","UNSIGNED_BYTE","bindTexture","TEXTURE_2D","texImage2D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","nextPass","activeTexture","TEXTURE0","clearColor","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","useProgram","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform2f","uniform1i","applyUniforms","drawArrays","TRIANGLES","textureSlot","uniform","HTMLCanvasElement","ImageData","texture","Uint8Array","data","isArray","uniform3f","uniform4f","uniform1f","DefaultUniform","AttributeType","UNSIGNED_SHORT","UNSIGNED_INT","getByteSizeFromType","BYTES_PER_ELEMENT","Uint16Array","WebGLHelper","opt_options","boundHandleWebGLContextLost_","handleWebGLContextLost","boundHandleWebGLContextRestored_","handleWebGLContextRestored","canvas_","document","createElement","left","bufferCache_","currentProgram_","getSupportedExtensions","getExtension","addEventListener","ContextEventType","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","uniformLocations_","attribLocations_","name_1","postProcessPasses_","postProcesses","shaderCompileErrors_","startTime_","Date","now","bufferKey","bufferCache","webGlBuffer","flushBufferData","deleteBuffer","buf","bufferCacheEntry","isContextLost","removeEventListener","prepareDraw","getCanvas","applyFrameState","prepareDrawToRenderTarget","renderTarget","opt_disableAlphaBlend","getFramebuffer","getTexture","ZERO","drawElements","elementType","numItems","offsetInBytes","finalizeDraw","viewState","offsetScaleMatrix","offsetRotateMatrix","rotate","setUniformMatrixValue","setUniformFloatValue","HTMLImageElement","complete","program","shader","getProgram","fragmentShaderSource","vertexShaderSource","getShaderInfoLog","getShaderCompileErrors","getAttributeLocation","makeProjectionTransform","uniformMatrix4fv","enableAttributeArray_","attribName","stride","enableAttributes","attributes","attr","computeAttributesStride","opt_data","opt_texture","listen","listener","opt_this","opt_once","originalListener_1","eventsKey","listenOnce","unlistenByKey","VOID","BaseEvent","propagationStopped","preventDefault","stopPropagation","Target","opt_target","eventTarget_","pendingRemovals_","dispatching_","listeners_","listeners","evt","Event","propagate","pendingRemovals","getListeners","hasListener","opt_type","Observable","revision_","EventType","getRevision","len","once","LayerRenderer","boundHandleImageChange_","handleImageChange_","layer_","pixel","prepareFrame","renderFrame","loadedTileCallback","tiles","tile","tileCoord","toString","createLoadedTileFinder","tileRange","callback","forEachLoadedTile","forEachFeatureAtCoordinate","hitTolerance","declutteredFeatures","getDataAtPixel","getLayer","handleFontsChanged","getState","ImageState","renderIfReadyAndVisible","loadImage","imageState","load","getVisible","getSourceState","WebGLWorkerMessageType","WebGLLayerRenderer","helper","blob","Blob","URL","createObjectURL","tmpArray4","WebGLRenderTarget","opt_size","helper_","texture_","framebuffer_","size_","data_","dataCacheDirty_","updateSize_","setSize","clearCachedData","readAll","readPixels","readPixel","floor","ObjectEvent","oldValue","BaseObject","opt_values","values_","getKeys","getProperties","notify","eventType","getChangeEventType","ObjectEventType","opt_silent","unset","changeEventTypeCache","Base","BaseLayer","className_","state_","getClassName","getLayerState","opt_managed","state","managed","getZIndex","round","getOpacity","sourceState","getExtent","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","getLayersArray","opt_array","getLayerStatesArray","opt_states","setExtent","setMaxResolution","setMinResolution","setMaxZoom","setMinZoom","setVisible","zindex","Layer","baseOptions","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","renderer_","render","setMap","handleSourcePropertyChange_","states","getSource","handleSourceChange_","layerRenderer","getRenderer","layerStatesArray","layerState","some","arrayLayerState","createRenderer","hasRenderer","HEX_COLOR_RE_","NAMED_COLOR_RE_","fromNamed","el","body","appendChild","rgb","getComputedStyle","removeChild","cache","fromString","g","exec","hasAlpha","parseInt","substr","normalize","slice","Number","fromStringInternal_","asArray","asColorLike","createCanvasContext2D","opt_width","opt_height","opt_canvasPool","shift","getFontParameters","family","fontFamily","fontWeight","fontStyle","families","weight","checkedFonts","warn","measureFont","div","heights","measureContext","textHeights","interval","referenceWidth","referenceFonts","isAvailable","available","referenceFont","measureTextWidth","check","done","fonts","clearInterval","measureText","ImageStyle","opacity_","rotateWithView_","rotation_","scale_","displacement_","displacement","clone","getScale","getRotation","getRotateWithView","getDisplacement","getAnchor","getImage","getHitDetectionImage","getImageState","getImageSize","getHitDetectionImageSize","getOrigin","setRotateWithView","listenImageChange","unlistenImageChange","RegularShape","hitDetectionCanvas_","fill_","origin_","points_","points","radius_","radius1","radius2_","radius2","angle_","stroke_","anchor_","imageSize_","hitDetectionImageSize_","getFill","getPoints","getRadius","getRadius2","getAngle","getStroke","strokeStyle","strokeWidth","getColor","getWidth","getLineDash","getLineDashOffset","getLineJoin","getLineCap","getMiterLimit","renderOptions","imageSize","draw_","createHitDetectionCanvas_","angle0","radiusC","setTransform","translate","beginPath","arc","PI","lineTo","fillStyle","lineWidth","closePath","drawHitDetectionCanvas_","CircleStyle","color_","lineCap_","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","geometry_","geometryFunction_","defaultGeometryFunction","image_","renderer","text_","zIndex_","getGeometry","getText","setRenderer","getGeometryFunction","feature","defaultStyles","createDefaultStyle","BaseVector","BaseVectorLayer","declutter_","renderBuffer_","style_","styleFunction_","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getRenderBuffer","getRenderOrder","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","setRenderOrder","styleFunction","styles_1","WebGLPointsLayerRenderer","projectionMatrixTransform","sourceRevision_","verticesBuffer_","hitVerticesBuffer_","indicesBuffer_","program_","hitDetectionEnabled_","hitFragmentShader","hitVertexShader","hitProgram_","customAttributes","attribute","concat","hitDetectionAttributes","previousExtent_","currentTransform_","renderTransform_","invertRenderTransform_","renderInstructions_","hitRenderInstructions_","hitRenderTarget_","worker_","Worker","received","projectionTransform","hitDetection","vertexBuffer","indexBuffer","renderInstructions","featureCache_","featureCount_","sourceListenKeys_","VectorEventType","handleSourceFeatureAdded_","handleSourceFeatureChanged_","handleSourceFeatureDelete_","forEachFeature","renderCount","layerIndex","parseFloat","renderHitDetection","vectorSource","viewNotMoving","viewHints","ViewHint","extentChanged","sourceChanged","loadFeatures","rebuildBuffers_","featureCache","totalInstructionsCount","totalHitInstructionsCount","hitColor","tmpCoords","tmpColor","renderIndex","hitIndex","featureUid","GeometryType","getFlatCoordinates","radix","j","customAttributesCount","postMessage","hitMessage","coordinateToPixelTransform","colorDecodeId","uid","getFeatureByUid","terminate","ValueTypes","Operators","getValueType","test","JSON","stringify","valueArr","v","operator","getReturnType","numberToGlsl","arrayToGlsl","join","getStringNumberEquivalent","string","stringLiteralsMap","expressionToGlsl","typeHint","toGlsl","stringToGlsl","assertNumber","assertNumbers","assertString","assertBoolean","assertArgsCount","args","count","assertArgsMinCount","assertArgsMaxCount","assertArgsEven","assertUniqueInferredType","types","valueType","log2","getEqualOperator","inFragmentShader","variables","parsedArgs","val","opt_typeHint","interpolation","outputType","input","result","stop1","output1","stop2","fallback","assertArgsOdd","ShaderBuilder","varyings","sizeExpression","rotationExpression","offsetExpression","colorExpression","texCoordExpression","discardExpression","addUniform","addAttribute","addVarying","expression","setSizeExpression","setRotationExpression","setSymbolOffsetExpression","setColorExpression","setTextureCoordinateExpression","setFragmentDiscardExpression","setSymbolRotateWithView","getSizeExpression","getOffsetExpression","getColorExpression","getTextureCoordinateExpression","getFragmentDiscardExpression","getSymbolVertexShader","forHitDetection","offsetMatrix","varying","getSymbolFragmentShader","hitDetectionBypass","WebGLPointsLayer","parseResult_","symbStyle","texCoord","textureCoord","vertContext","parsedSize","parsedOffset","parsedTexCoord","fragContext","parsedColor","parsedOpacity","parsedRotation","opacityFilter","visibleSize","st","builder","parsedFilter","varName","Image","attrName","attributeName","props","parseLiteralStyle","hitDetectionDisabled_","TileRange","contains","containsXY","containsTileRange","extend","getHeight","intersects","toSize","z","opt_tileCoord","tmpTileCoord","TileGrid","resolutions_","origins","zoomFactor_","origin","origins_","tileSizes_","tileSizes","tileSize_","extent_","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","getTileRangeForExtentAndZ","jj","forEachTileCoordParentTileRange","opt_tileRange","tileCoordExtent","getTileCoordExtent","getResolution","getResolutions","getTileCoordChildTileRange","getTileRangeExtent","getTileSize","getTileCoordForXYAndZ_","getTileCoordCenter","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","getZForResolution","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","ceil","getTileCoordForCoordAndZ","getTileCoordResolution","getFullTileRange","opt_direction","fullTileRanges"],"mappings":"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","file":"aol.all.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","/**\n * @module ol/util\n */\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n    return /** @type {?} */ ((function () {\n        throw new Error('Unimplemented abstract method.');\n    })());\n}\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nvar uidCounter_ = 0;\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n    return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport var VERSION = '6.2.1';\n//# sourceMappingURL=util.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/AssertionError\n */\nimport { VERSION } from './util.js';\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nvar AssertionError = /** @class */ (function (_super) {\n    __extends(AssertionError, _super);\n    /**\n     * @param {number} code Error code.\n     */\n    function AssertionError(code) {\n        var _this = this;\n        var path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n        var message = 'Assertion failed. See https://openlayers.org/en/' + path +\n            '/doc/errors/#' + code + ' for details.';\n        _this = _super.call(this, message) || this;\n        /**\n         * Error code. The meaning of the code can be found on\n         * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n         * the version found in the OpenLayers script's header comment if a version\n         * other than the latest is used).\n         * @type {number}\n         * @api\n         */\n        _this.code = code;\n        /**\n         * @type {string}\n         */\n        _this.name = 'AssertionError';\n        // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n        _this.message = message;\n        return _this;\n    }\n    return AssertionError;\n}(Error));\nexport default AssertionError;\n//# sourceMappingURL=AssertionError.js.map","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n    if (!assertion) {\n        throw new AssertionError(errorCode);\n    }\n}\n//# sourceMappingURL=asserts.js.map","import * as angular from 'angular';\r\nimport { Map, MapBrowserEvent, MapEvent } from 'ol';\r\nimport RenderEvent from 'ol/render/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport Control from 'ol/control/Control';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport { MapOptions } from 'ol/PluggableMap';\r\n\r\nexport class MapComponent implements angular.IController, MapOptions {\r\n  public instance: Map;\r\n  public componentType: string = 'map';\r\n  public host: angular.IRootElementService;\r\n  private onDblClick: Function = angular.noop;\r\n  private onPointerDrag: Function = angular.noop;\r\n  private onPointerMove: Function = angular.noop;\r\n  private onPostCompose: Function = angular.noop;\r\n  private onPostRender: Function = angular.noop;\r\n  private onPreCompose: Function = angular.noop;\r\n  private onPropertyChange: Function = angular.noop;\r\n  private onSingleClick: Function = angular.noop;\r\n  private onClick: Function = angular.noop;\r\n  private onMoveEnd: Function = angular.noop;\r\n\r\n  controls: Control[] = [];\r\n  interactions: Interaction[] = [];\r\n\r\n  constructor(host: angular.IRootElementService) {\r\n    this.host = host;\r\n  }\r\n\r\n  $onInit() {\r\n    this.instance = new Map(this);\r\n    this.instance.setTarget(this.host[0]);\r\n    this.instance.on('click', (event: MapBrowserEvent) =>\r\n      this.onClick({ event }),\r\n    );\r\n    this.instance.on('dblclick', (event: MapBrowserEvent) =>\r\n      this.onDblClick({ event }),\r\n    );\r\n    this.instance.on('moveend', (event: MapEvent) => this.onMoveEnd({ event }));\r\n    this.instance.on('pointerdrag', (event: MapBrowserEvent) =>\r\n      this.onPointerDrag({ event }),\r\n    );\r\n    this.instance.on('pointermove', (event: MapBrowserEvent) =>\r\n      this.onPointerMove({ event }),\r\n    );\r\n    this.instance.on('postcompose', (event: RenderEvent) =>\r\n      this.onPostCompose({ event }),\r\n    );\r\n    this.instance.on('postrender', (event: MapEvent) =>\r\n      this.onPostRender({ event }),\r\n    );\r\n    this.instance.on('precompose', (event: RenderEvent) =>\r\n      this.onPreCompose({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('singleclick', (event: MapBrowserEvent) =>\r\n      this.onSingleClick({ event }),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //   <div  >\r\n  //     <ng-transclude id='ngolMap'></ng-transclude>\r\n  //     <div  data-tag=\"map\"></div>\r\n  //   </div>\r\n  // `,\r\n  // transclude: true,\r\n  bindings: {\r\n    pixelRatio: '<?',\r\n    keyboardEventTarget: '<?',\r\n    onClick: '&?',\r\n    onDblClick: '&?',\r\n    onMoveEnd: '&?',\r\n    onPointerDrag: '&?',\r\n    onPointerMove: '&?',\r\n    onPostcompose: '&?',\r\n    onPostrender: '&?',\r\n    onPreCompose: '&?',\r\n    onPropertyChange: '&?',\r\n    onRenderComplete: '&?',\r\n    onSingleClick: '&?',\r\n  },\r\n  controller: ['$element', MapComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolMap',\r\n  ...component,\r\n};\r\n","/**\n * @module ol/array\n */\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n    var mid, cmp;\n    var comparator = opt_comparator || numberSafeCompareFunction;\n    var low = 0;\n    var high = haystack.length;\n    var found = false;\n    while (low < high) {\n        /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n         * to double (which gives the wrong results). */\n        mid = low + (high - low >> 1);\n        cmp = +comparator(haystack[mid], needle);\n        if (cmp < 0.0) { /* Too low. */\n            low = mid + 1;\n        }\n        else { /* Key found or too high */\n            high = mid;\n            found = !cmp;\n        }\n    }\n    /* Key not found. */\n    return found ? low : ~low;\n}\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n}\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n    return arr.indexOf(obj) >= 0;\n}\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n    var n = arr.length;\n    if (arr[0] <= target) {\n        return 0;\n    }\n    else if (target <= arr[n - 1]) {\n        return n - 1;\n    }\n    else {\n        var i = void 0;\n        if (direction > 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] < target) {\n                    return i - 1;\n                }\n            }\n        }\n        else if (direction < 0) {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] <= target) {\n                    return i;\n                }\n            }\n        }\n        else {\n            for (i = 1; i < n; ++i) {\n                if (arr[i] == target) {\n                    return i;\n                }\n                else if (arr[i] < target) {\n                    if (arr[i - 1] - target < target - arr[i]) {\n                        return i - 1;\n                    }\n                    else {\n                        return i;\n                    }\n                }\n            }\n        }\n        return n - 1;\n    }\n}\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n    while (begin < end) {\n        var tmp = arr[begin];\n        arr[begin] = arr[end];\n        arr[end] = tmp;\n        ++begin;\n        --end;\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n    var extension = Array.isArray(data) ? data : [data];\n    var length = extension.length;\n    for (var i = 0; i < length; i++) {\n        arr[arr.length] = extension[i];\n    }\n}\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n    var i = arr.indexOf(obj);\n    var found = i > -1;\n    if (found) {\n        arr.splice(i, 1);\n    }\n    return found;\n}\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n    var length = arr.length >>> 0;\n    var value;\n    for (var i = 0; i < length; i++) {\n        value = arr[i];\n        if (func(value, i, arr)) {\n            return value;\n        }\n    }\n    return null;\n}\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n    var len1 = arr1.length;\n    if (len1 !== arr2.length) {\n        return false;\n    }\n    for (var i = 0; i < len1; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n    var length = arr.length;\n    var tmp = Array(arr.length);\n    var i;\n    for (i = 0; i < length; i++) {\n        tmp[i] = { index: i, value: arr[i] };\n    }\n    tmp.sort(function (a, b) {\n        return compareFnc(a.value, b.value) || a.index - b.index;\n    });\n    for (i = 0; i < arr.length; i++) {\n        arr[i] = tmp[i].value;\n    }\n}\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n    var index;\n    var found = !arr.every(function (el, idx) {\n        index = idx;\n        return !func(el, idx, arr);\n    });\n    return found ? index : -1;\n}\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n    var compare = opt_func || numberSafeCompareFunction;\n    return arr.every(function (currentVal, index) {\n        if (index === 0) {\n            return true;\n        }\n        var res = compare(arr[index - 1], currentVal);\n        return !(res > 0 || opt_strict && res === 0);\n    });\n}\n//# sourceMappingURL=array.js.map","/**\n * @module ol/math\n */\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function () {\n    // Wrapped in a iife, to save the overhead of checking for the native\n    // implementation on every invocation.\n    var cosh;\n    if ('cosh' in Math) {\n        // The environment supports the native Math.cosh function, use it…\n        cosh = Math.cosh;\n    }\n    else {\n        // … else, use the reference implementation of MDN:\n        cosh = function (x) {\n            var y = /** @type {Math} */ (Math).exp(x);\n            return (y + 1 / y) / 2;\n        };\n    }\n    return cosh;\n}());\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    if (dx !== 0 || dy !== 0) {\n        var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n        if (t > 1) {\n            x1 = x2;\n            y1 = y2;\n        }\n        else if (t > 0) {\n            x1 += dx * t;\n            y1 += dy * t;\n        }\n    }\n    return squaredDistance(x, y, x1, y1);\n}\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    return dx * dx + dy * dy;\n}\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n    var n = mat.length;\n    for (var i = 0; i < n; i++) {\n        // Find max in the i-th column (ignoring i - 1 first rows)\n        var maxRow = i;\n        var maxEl = Math.abs(mat[i][i]);\n        for (var r = i + 1; r < n; r++) {\n            var absValue = Math.abs(mat[r][i]);\n            if (absValue > maxEl) {\n                maxEl = absValue;\n                maxRow = r;\n            }\n        }\n        if (maxEl === 0) {\n            return null; // matrix is singular\n        }\n        // Swap max row with i-th (current) row\n        var tmp = mat[maxRow];\n        mat[maxRow] = mat[i];\n        mat[i] = tmp;\n        // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n        for (var j = i + 1; j < n; j++) {\n            var coef = -mat[j][i] / mat[i][i];\n            for (var k = i; k < n + 1; k++) {\n                if (i == k) {\n                    mat[j][k] = 0;\n                }\n                else {\n                    mat[j][k] += coef * mat[i][k];\n                }\n            }\n        }\n    }\n    // Solve Ax=b for upper triangular matrix A (mat)\n    var x = new Array(n);\n    for (var l = n - 1; l >= 0; l--) {\n        x[l] = mat[l][n] / mat[l][l];\n        for (var m = l - 1; m >= 0; m--) {\n            mat[m][n] -= mat[m][l] * x[l];\n        }\n    }\n    return x;\n}\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n    return angleInRadians * 180 / Math.PI;\n}\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n    return angleInDegrees * Math.PI / 180;\n}\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n    var r = a % b;\n    return r * b < 0 ? r + b : r;\n}\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n    return a + x * (b - a);\n}\n//# sourceMappingURL=math.js.map","module.exports = angular;","/**\n * @module ol/extent\n */\nimport { assert } from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n    var extent = createEmpty();\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n    var minX = Math.min.apply(null, xs);\n    var minY = Math.min.apply(null, ys);\n    var maxX = Math.max.apply(null, xs);\n    var maxY = Math.max.apply(null, ys);\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0] - value;\n        opt_extent[1] = extent[1] - value;\n        opt_extent[2] = extent[2] + value;\n        opt_extent[3] = extent[3] + value;\n        return opt_extent;\n    }\n    else {\n        return [\n            extent[0] - value,\n            extent[1] - value,\n            extent[2] + value,\n            extent[3] + value\n        ];\n    }\n}\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent.slice();\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n    var dx, dy;\n    if (x < extent[0]) {\n        dx = extent[0] - x;\n    }\n    else if (extent[2] < x) {\n        dx = x - extent[2];\n    }\n    else {\n        dx = 0;\n    }\n    if (y < extent[1]) {\n        dy = extent[1] - y;\n    }\n    else if (extent[3] < y) {\n        dy = y - extent[3];\n    }\n    else {\n        dy = 0;\n    }\n    return dx * dx + dy * dy;\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n    return containsXY(extent, coordinate[0], coordinate[1]);\n}\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n    return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n        extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n    return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n    var minX = extent[0];\n    var minY = extent[1];\n    var maxX = extent[2];\n    var maxY = extent[3];\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var relationship = Relationship.UNKNOWN;\n    if (x < minX) {\n        relationship = relationship | Relationship.LEFT;\n    }\n    else if (x > maxX) {\n        relationship = relationship | Relationship.RIGHT;\n    }\n    if (y < minY) {\n        relationship = relationship | Relationship.BELOW;\n    }\n    else if (y > maxY) {\n        relationship = relationship | Relationship.ABOVE;\n    }\n    if (relationship === Relationship.UNKNOWN) {\n        relationship = Relationship.INTERSECTING;\n    }\n    return relationship;\n}\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n    return [Infinity, Infinity, -Infinity, -Infinity];\n}\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = minX;\n        opt_extent[1] = minY;\n        opt_extent[2] = maxX;\n        opt_extent[3] = maxY;\n        return opt_extent;\n    }\n    else {\n        return [minX, minY, maxX, maxY];\n    }\n}\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n    return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    return createOrUpdate(x, y, x, y, opt_extent);\n}\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendCoordinates(extent, coordinates);\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n    var extent = createOrUpdateEmpty(opt_extent);\n    return extendRings(extent, rings);\n}\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n    return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n        extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n    if (extent2[0] < extent1[0]) {\n        extent1[0] = extent2[0];\n    }\n    if (extent2[2] > extent1[2]) {\n        extent1[2] = extent2[2];\n    }\n    if (extent2[1] < extent1[1]) {\n        extent1[1] = extent2[1];\n    }\n    if (extent2[3] > extent1[3]) {\n        extent1[3] = extent2[3];\n    }\n    return extent1;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n    if (coordinate[0] < extent[0]) {\n        extent[0] = coordinate[0];\n    }\n    if (coordinate[0] > extent[2]) {\n        extent[2] = coordinate[0];\n    }\n    if (coordinate[1] < extent[1]) {\n        extent[1] = coordinate[1];\n    }\n    if (coordinate[1] > extent[3]) {\n        extent[3] = coordinate[1];\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n    for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        extendCoordinate(extent, coordinates[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n    for (; offset < end; offset += stride) {\n        extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n    for (var i = 0, ii = rings.length; i < ii; ++i) {\n        extendCoordinates(extent, rings[i]);\n    }\n    return extent;\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n    extent[0] = Math.min(extent[0], x);\n    extent[1] = Math.min(extent[1], y);\n    extent[2] = Math.max(extent[2], x);\n    extent[3] = Math.max(extent[3], y);\n}\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n    var val;\n    val = callback(getBottomLeft(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getBottomRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopRight(extent));\n    if (val) {\n        return val;\n    }\n    val = callback(getTopLeft(extent));\n    if (val) {\n        return val;\n    }\n    return false;\n}\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n    var area = 0;\n    if (!isEmpty(extent)) {\n        area = getWidth(extent) * getHeight(extent);\n    }\n    return area;\n}\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n    return [extent[0], extent[1]];\n}\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n    return [extent[2], extent[1]];\n}\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n    return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n    var coordinate;\n    if (corner === Corner.BOTTOM_LEFT) {\n        coordinate = getBottomLeft(extent);\n    }\n    else if (corner === Corner.BOTTOM_RIGHT) {\n        coordinate = getBottomRight(extent);\n    }\n    else if (corner === Corner.TOP_LEFT) {\n        coordinate = getTopLeft(extent);\n    }\n    else if (corner === Corner.TOP_RIGHT) {\n        coordinate = getTopRight(extent);\n    }\n    else {\n        assert(false, 13); // Invalid corner\n    }\n    return coordinate;\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n    var minX = Math.min(extent1[0], extent2[0]);\n    var minY = Math.min(extent1[1], extent2[1]);\n    var maxX = Math.max(extent1[2], extent2[2]);\n    var maxY = Math.max(extent1[3], extent2[3]);\n    return (maxX - minX) * (maxY - minY);\n}\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n    var dx = resolution * size[0] / 2;\n    var dy = resolution * size[1] / 2;\n    var cosRotation = Math.cos(rotation);\n    var sinRotation = Math.sin(rotation);\n    var xCos = dx * cosRotation;\n    var xSin = dx * sinRotation;\n    var yCos = dy * cosRotation;\n    var ySin = dy * sinRotation;\n    var x = center[0];\n    var y = center[1];\n    var x0 = x - xCos + ySin;\n    var x1 = x - xCos - ySin;\n    var x2 = x + xCos - ySin;\n    var x3 = x + xCos + ySin;\n    var y0 = y - xSin - yCos;\n    var y1 = y - xSin + yCos;\n    var y2 = y + xSin + yCos;\n    var y3 = y + xSin - yCos;\n    return createOrUpdate(Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3), Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3), opt_extent);\n}\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n    return extent[3] - extent[1];\n}\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n    var intersection = getIntersection(extent1, extent2);\n    return getArea(intersection);\n}\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n    var intersection = opt_extent ? opt_extent : createEmpty();\n    if (intersects(extent1, extent2)) {\n        if (extent1[0] > extent2[0]) {\n            intersection[0] = extent1[0];\n        }\n        else {\n            intersection[0] = extent2[0];\n        }\n        if (extent1[1] > extent2[1]) {\n            intersection[1] = extent1[1];\n        }\n        else {\n            intersection[1] = extent2[1];\n        }\n        if (extent1[2] < extent2[2]) {\n            intersection[2] = extent1[2];\n        }\n        else {\n            intersection[2] = extent2[2];\n        }\n        if (extent1[3] < extent2[3]) {\n            intersection[3] = extent1[3];\n        }\n        else {\n            intersection[3] = extent2[3];\n        }\n    }\n    else {\n        createOrUpdateEmpty(intersection);\n    }\n    return intersection;\n}\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n    return getWidth(extent) + getHeight(extent);\n}\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n    return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n    return [extent[0], extent[3]];\n}\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n    return [extent[2], extent[3]];\n}\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n    return extent[2] - extent[0];\n}\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n    return extent1[0] <= extent2[2] &&\n        extent1[2] >= extent2[0] &&\n        extent1[1] <= extent2[3] &&\n        extent1[3] >= extent2[1];\n}\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n    return extent[2] < extent[0] || extent[3] < extent[1];\n}\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n    if (opt_extent) {\n        opt_extent[0] = extent[0];\n        opt_extent[1] = extent[1];\n        opt_extent[2] = extent[2];\n        opt_extent[3] = extent[3];\n        return opt_extent;\n    }\n    else {\n        return extent;\n    }\n}\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n    var deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n    var deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n    extent[0] -= deltaX;\n    extent[2] += deltaX;\n    extent[1] -= deltaY;\n    extent[3] += deltaY;\n}\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n    var intersects = false;\n    var startRel = coordinateRelationship(extent, start);\n    var endRel = coordinateRelationship(extent, end);\n    if (startRel === Relationship.INTERSECTING ||\n        endRel === Relationship.INTERSECTING) {\n        intersects = true;\n    }\n    else {\n        var minX = extent[0];\n        var minY = extent[1];\n        var maxX = extent[2];\n        var maxY = extent[3];\n        var startX = start[0];\n        var startY = start[1];\n        var endX = end[0];\n        var endY = end[1];\n        var slope = (endY - startY) / (endX - startX);\n        var x = void 0, y = void 0;\n        if (!!(endRel & Relationship.ABOVE) &&\n            !(startRel & Relationship.ABOVE)) {\n            // potentially intersects top\n            x = endX - ((endY - maxY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.RIGHT) &&\n            !(startRel & Relationship.RIGHT)) {\n            // potentially intersects right\n            y = endY - ((endX - maxX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n        if (!intersects && !!(endRel & Relationship.BELOW) &&\n            !(startRel & Relationship.BELOW)) {\n            // potentially intersects bottom\n            x = endX - ((endY - minY) / slope);\n            intersects = x >= minX && x <= maxX;\n        }\n        if (!intersects && !!(endRel & Relationship.LEFT) &&\n            !(startRel & Relationship.LEFT)) {\n            // potentially intersects left\n            y = endY - ((endX - minX) * slope);\n            intersects = y >= minY && y <= maxY;\n        }\n    }\n    return intersects;\n}\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n    var coordinates = [\n        extent[0], extent[1],\n        extent[0], extent[3],\n        extent[2], extent[1],\n        extent[2], extent[3]\n    ];\n    transformFn(coordinates, coordinates, 2);\n    var xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n    var ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n    return _boundingExtentXYs(xs, ys, opt_extent);\n}\n//# sourceMappingURL=extent.js.map","// export * from './layer.component';\r\nexport * from './layertile.component';\r\nexport * from './layervector.component';\r\nexport * from './layergroup.component';\r\nexport * from './layerwebgl.component';\r\n","import Source, { AttributionLike } from 'ol/source/Source';\r\nimport { LayerComponent } from '../layers/layer.component';\r\n\r\nexport class SourceComponent implements angular.IController {\r\n  public instance: Source;\r\n  public componentType: string = 'source';\r\n\r\n  protected host: LayerComponent;\r\n  //   protected raster: SourceRasterComponent\r\n\r\n  attributions: AttributionLike;\r\n  attributionsCollapsible: boolean;\r\n\r\n  instanceDone?: Function;\r\n\r\n  //   constructor()\r\n  //   {}\r\n\r\n  $onDestroy() {\r\n    if (this.host) {\r\n      this.host.instance.setSource(null);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [];\r\n    // }\r\n  }\r\n\r\n  protected _register(source: Source) {\r\n    if (this.host) {\r\n      this.host.instance.setSource(source);\r\n      if (this.instanceDone) this.instanceDone({ instance: source });\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [source];\r\n    // }\r\n  }\r\n}\r\n\r\nexport const sourceComponentConfig = {\r\n  bindings: {\r\n    instance: '=?',\r\n    attributions: '<?',\r\n    attributionsCollapsible: '<?',\r\n    instanceDone: '&?',\r\n  },\r\n};\r\n","import { GeometryFunction } from 'ol/style/Style';\r\nimport aolFeature, { FeatureComponent } from '../feature.component';\r\nimport { aolLayerVector, LayerVectorComponent } from '../layers';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Fill, Image as ImageStyle, Stroke, Text, Style } from 'ol/style';\r\n// import { RenderFunction } from 'ol/layer/Layer';\r\n\r\nexport class StyleComponent implements ng.IController {\r\n  public componentType = 'style';\r\n  public instance: Style;\r\n\r\n  private host: LayerVectorComponent | FeatureComponent;\r\n\r\n  protected layerVectorHost: LayerVectorComponent;\r\n  protected featureHost: FeatureComponent;\r\n\r\n  geometry?: string | Geometry | GeometryFunction;\r\n  fill?: Fill;\r\n  image?: ImageStyle;\r\n  //   renderer?: RenderFunction;\r\n  stroke?: Stroke;\r\n  text?: Text;\r\n  zIndex?: number;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.featureHost) {\r\n      this.host = this.featureHost;\r\n    } else if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Style(this);\r\n    this.host.instance.setStyle(this.instance);\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n  // 因为在改变Stroke等属性值时style不会检查到变化，因此不会触发re-render\r\n  update() {\r\n    this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    let style = this.host.instance.getStyle();\r\n    if (style instanceof Array) {\r\n      style.splice(style.indexOf(this.instance), 1);\r\n    } else {\r\n      style = null;\r\n    }\r\n    this.host.instance.setStyle(style);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'image':\r\n            this.instance.setImage(changes[key].currentValue);\r\n            break;\r\n          case 'fill':\r\n            this.instance.setFill(changes[key].currentValue);\r\n            break;\r\n          case 'stroke':\r\n            this.instance.setStroke(changes[key].currentValue);\r\n            break;\r\n          case 'text':\r\n            this.instance.setText(changes[key].currentValue);\r\n          case 'zIndex':\r\n            this.instance.setZIndex(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            // properties[key] = changes[key].currentValue;\r\n            // this.instance.set(properties, false);\r\n            break;\r\n        }\r\n      }\r\n      this.host.instance.changed();\r\n    }\r\n  }\r\n}\r\n\r\nvar aolStyleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    geometry: '<?',\r\n    fill: '<?',\r\n    image: '<?',\r\n    stroke: '<?',\r\n    text: '<?',\r\n    zIndex: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `?^${aolLayerVector.name}`,\r\n    featureHost: `?^${aolFeature.name}`,\r\n  },\r\n  controller: [StyleComponent],\r\n};\r\n\r\nexport const aolStyle = {\r\n  name: 'aolStyle',\r\n  ...aolStyleComponent,\r\n};\r\n","module.exports = ol.style;","module.exports = ol.source;","module.exports = ol.interaction;","module.exports = ol;","import Event from 'ol/events/Event';\r\nimport { Extent } from 'ol/extent';\r\nimport mapComponent, { MapComponent } from '../map.component';\r\nimport { LayerGroupComponent } from './layergroup.component';\r\n\r\nexport abstract class LayerComponent implements angular.IController {\r\n  public instance: any;\r\n  public componentType: string = 'layer';\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n  private layerGroupComponent: LayerGroupComponent;\r\n  private mapComponent: MapComponent;\r\n\r\n  className?: string;\r\n  opacity?: number;\r\n  visible?: boolean;\r\n  extent?: Extent;\r\n  zIndex?: number;\r\n  minResolution?: number;\r\n  maxResolution?: number;\r\n\r\n  prerender: (evt: Event) => void;\r\n  postrender: (evt: Event) => void;\r\n\r\n  $onInit() {\r\n    this.host = this.layerGroupComponent || this.mapComponent;\r\n\r\n    if (this.prerender !== null && this.prerender !== undefined) {\r\n      this.instance.on('prerender', this.prerender);\r\n    }\r\n    if (this.postrender !== null && this.postrender !== undefined) {\r\n      this.instance.on('postrender', this.postrender);\r\n    }\r\n    if (this.instance.get('properties')) {\r\n      this.instance.setProperties(this.instance.get('properties'), false);\r\n      this.instance.set('properties', null, false);\r\n    }\r\n    this.host.instance.getLayers().push(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.getLayers().remove(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'prerender':\r\n            this.instance.un('prerender', changes[key].previousValue);\r\n            this.instance.on('prerender', changes[key].currentValue);\r\n            break;\r\n          case 'postrender':\r\n            this.instance.un('postrender', changes[key].previousValue);\r\n            this.instance.on('postrender', changes[key].currentValue);\r\n            break;\r\n          case 'source':\r\n            this.instance.setSource(changes[key].currentValue);\r\n            break;\r\n          case 'style':\r\n            this.instance.setStyle(changes[key].currentValue);\r\n            break;\r\n          case 'properties':\r\n            this.instance.set(changes[key].currentValue, false);\r\n            return;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-layer, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nexport const layerComponentConfig = {\r\n  bindings: {\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    className: '<?',\r\n    // preload:'<?',\r\n    prerender: '&?',\r\n    postrender: '&?',\r\n  },\r\n  require: {\r\n    mapComponent: `?^${mapComponent.name}`,\r\n    /**@FIXME:待修复 */\r\n    layerGroupComponent: `?^^aolLayerGroup`,\r\n  },\r\n};\r\n","import { Feature } from 'ol';\r\nimport { SourceVectorComponent, aolSourceVector } from './sources';\r\n\r\nexport class FeatureComponent implements ng.IController {\r\n  public componentType = 'feature';\r\n  public instance: Feature;\r\n  private host: SourceVectorComponent;\r\n  private properties: object;\r\n\r\n  id: string | number | undefined;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = new Feature();\r\n    if (this.id !== undefined) {\r\n      this.instance.setId(this.id);\r\n    }\r\n    if (this.properties !== undefined) {\r\n      this.instance.setProperties(this.properties);\r\n    }\r\n    this.host.instance.addFeature(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeFeature(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (this.instance) {\r\n      if (changes['properties']) {\r\n        this.instance.setProperties(changes['properties'], true);\r\n      } else {\r\n        this.instance.setId(this.id);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    properties: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolSourceVector.name}`,\r\n  },\r\n  controller: ['$element', FeatureComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolFeature',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Fill, Circle, Stroke } from 'ol/style';\r\n\r\nexport class styleCircleComponent implements ng.IController {\r\n  public componentType = 'style-circle';\r\n  public instance: Circle;\r\n\r\n  private host: StyleComponent;\r\n\r\n  fill: Fill;\r\n  radius: number = 5;\r\n  snapToPixel: boolean;\r\n  stroke: Stroke;\r\n  // atlasManager: ;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-circle must be applied to a feature or a layer');\r\n    }\r\n  }\r\n\r\n  $postLink() {\r\n    this.instance = new Circle(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  update() {\r\n    if (!!this.instance) {\r\n      this.instance = new Circle(this);\r\n      this.host.instance.setImage(this.instance);\r\n      // this.instance.setRadius(this.radius);\r\n    }\r\n    this.host.update();\r\n    // this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['radius']) {\r\n      this.instance.setRadius(changes['radius'].currentValue);\r\n    }\r\n    // this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStyleCircleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    fill: '<?',\r\n    radius: '<?',\r\n    snapToPixel: '<?',\r\n    stroke: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleCircleComponent],\r\n};\r\n\r\nexport const aolStyleCircle = {\r\n  name: 'aolStyleCircle',\r\n  ...aolStyleCircleComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport { View } from 'ol';\r\nimport { Extent } from 'ol/extent';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport mapComponent, { MapComponent } from './map.component';\r\n\r\nexport class ViewComponent implements angular.IController {\r\n  public instance: View;\r\n  public componentType: string = 'view';\r\n  public host: MapComponent;\r\n\r\n  constrainRotation: boolean | number;\r\n  enableRotation: boolean;\r\n  extent: Extent;\r\n  maxResolution: number;\r\n  minResolution: number;\r\n  maxZoom: number;\r\n  minZoom: number;\r\n  resolution: number;\r\n  resolutions: number[];\r\n  rotation: number;\r\n  zoom: number = 11;\r\n  zoomFactor: number;\r\n  center: Coordinate = [104.06, 30.67];\r\n  projection: string;\r\n\r\n  zoomAnimation: Boolean = false;\r\n\r\n  // defaultGive() {\r\n  //   if (this.zoom === undefined) this.zoom = 1;\r\n  //   if (this.center === undefined) this.center = [104.06, 30.67];\r\n  //   if (this.projection === undefined) this.projection = 'EPSG:4326';\r\n  //   if (this.zoomAnimation === undefined) this.zoomAnimation = false;\r\n  // }\r\n\r\n  //   constructor(host: angular.IRootElementService) {}\r\n\r\n  $onInit() {\r\n    // this.defaultGive();\r\n    this.instance = new View(this);\r\n    this.host.instance.setView(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'zoom':\r\n            /** Work-around: setting the zoom via setProperties does not work. */\r\n            if (this.zoomAnimation) {\r\n              this.instance.animate({ zoom: changes[key].currentValue });\r\n            } else {\r\n              this.instance.setZoom(changes[key].currentValue);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    constrainRotation: '<?',\r\n    enableRotation: '<?',\r\n    extent: '<?',\r\n    maxResolution: '<?',\r\n    minResolution: '<?',\r\n    maxZoom: '<?',\r\n    minZoom: '<?',\r\n    resolution: '<?',\r\n    resolutions: '<?',\r\n    rotation: '<?',\r\n    zoom: '<',\r\n    zoomFactor: '<?',\r\n    center: '<?',\r\n    projection: '<?',\r\n    zoomAnimation: '<?',\r\n  },\r\n  require: {\r\n    host: `^${mapComponent.name}`,\r\n  },\r\n  controller: ['$element', ViewComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolView',\r\n  ...component,\r\n};\r\n","export * from './xyz.component';\r\nexport * from './osmmaps.component';\r\nexport * from './vector.component';\r\nexport * from './cluster.component';\r\n\r\nexport * from './tiledebug.component';\r\n","import * as angular from 'angular';\r\nimport aolFeature from './feature.component';\r\nimport { FeatureComponent } from './feature.component';\r\nimport { LineString, Point, Polygon } from 'ol/geom';\r\nimport BaseEvent from 'ol/events/Event';\r\n\r\nexport class GeometryLinestringComponent implements ng.IController {\r\n  public componentType: string = 'geometry-linestring';\r\n  public instance: LineString;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('instancing aol-geometry-linestring');\r\n  //   }\r\n  public change: Function = angular.noop;\r\n\r\n  $onInit() {\r\n    this.instance = new LineString([]);\r\n    this.instance.on('change', (event: BaseEvent) => this.change({ event }));\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\nvar aolGeometryLinestringComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    change: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryLinestringComponent],\r\n};\r\n\r\nexport const aolGeometryLinestring = {\r\n  name: 'aolGeometryLinestring',\r\n  ...aolGeometryLinestringComponent,\r\n};\r\n\r\nexport class GeometryPointComponent implements ng.IController {\r\n  public componentType: string = 'geometry-point';\r\n  public instance: Point;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-point');\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new Point([0, 0]); // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\n\r\nvar aolGeometryPointComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPointComponent],\r\n};\r\n\r\nexport const aolGeometryPoint = {\r\n  name: 'aolGeometryPoint',\r\n  ...aolGeometryPointComponent,\r\n};\r\n\r\nexport class GeometryPolygonComponent implements ng.IController {\r\n  public componentType: string = 'geometry-polygon';\r\n  public instance: Polygon;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-polygon');\r\n  //   }\r\n\r\n  $onInit() {\r\n    // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.instance = new Polygon([\r\n      [\r\n        [0, 0],\r\n        [1, 0],\r\n        [1, 1],\r\n      ],\r\n    ]);\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  //   $onDestroy() {\r\n  //     // this.host.setGeometry(null);\r\n  //   }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPolygonComponent],\r\n};\r\n\r\nexport const aolGeometryPolygon = {\r\n  name: 'aolGeometryPolygon',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n","module.exports = ol.geom;","module.exports = ol.proj;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Text';\r\nimport { Text } from 'ol/style';\r\nimport TextPlacement from 'ol/style/TextPlacement';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\n\r\nexport class styleTextComponent implements ng.IController, Options {\r\n  public componentType = 'style-text';\r\n  public instance: Text;\r\n\r\n  private host: StyleComponent;\r\n\r\n  font?: string;\r\n  maxAngle?: number;\r\n  offsetX?: number;\r\n  offsetY?: number;\r\n  overflow?: boolean;\r\n  placement?: TextPlacement | string;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  text?: string;\r\n  textAlign?: string;\r\n  textBaseline?: string;\r\n  fill?: Fill;\r\n  stroke?: Stroke;\r\n  backgroundFill?: Fill;\r\n  backgroundStroke?: Stroke;\r\n  padding?: number[];\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Text(this);\r\n    this.host.instance.setText(this.instance);\r\n    this.host.update();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setText(null);\r\n    this.host.update();\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['font']) {\r\n      this.instance.setFont(changes['font'].currentValue);\r\n    }\r\n    if (changes['offsetX']) {\r\n      this.instance.setOffsetX(changes['offsetX'].currentValue);\r\n    }\r\n    if (changes['offsetY']) {\r\n      this.instance.setOffsetY(changes['offsetY'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['text']) {\r\n      this.instance.setText(changes['text'].currentValue);\r\n    }\r\n    if (changes['textAlign']) {\r\n      this.instance.setTextAlign(changes['textAlign'].currentValue);\r\n    }\r\n    if (changes['textBaseLine']) {\r\n      this.instance.setTextBaseline(changes['textBaseLine'].currentValue);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleTextComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    font: '<?',\r\n    maxAngle: '<?',\r\n    offsetX: '<?',\r\n    offsetY: '<?',\r\n    overflow: '<?',\r\n    placement: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    text: '<?',\r\n    textAlign: '<?',\r\n    textBaseline: '<?',\r\n    fill: '<?',\r\n    stroke: '<?',\r\n    backgroundFill: '<?',\r\n    backgroundStroke: '<?',\r\n    padding: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleTextComponent],\r\n};\r\n\r\nexport const aolStyleText = {\r\n  name: 'aolStyleText',\r\n  ...aolStyleTextComponent,\r\n};\r\n","import * as angular from 'angular';\r\n\r\nimport mapComponent from './map.component';\r\nimport viewComponent from './view.component';\r\nimport aolFeature from './feature.component';\r\n\r\nimport {\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerGroup,\r\n  aolLayerWebgl,\r\n} from './layers/index';\r\nimport {\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n} from './sources/index';\r\nimport {\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport {\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n} from './coordinate.component';\r\nimport {\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleFill,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n} from './styles';\r\n\r\nimport { aolOverlay } from './overlay.component';\r\nimport {\r\n  aolInteractionDefaults,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n} from './interactions';\r\nimport { aolInteractionDraw } from './interactions/draw.component';\r\n\r\nvar aolModule = angular.module('aol', []);\r\nfunction registerComponent(component: any) {\r\n  aolModule.component(component.name, component);\r\n}\r\n\r\n[\r\n  mapComponent,\r\n  viewComponent,\r\n  /**图层组件 */\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerWebgl,\r\n  aolLayerGroup,\r\n  /**数据源组件 */\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n  /**要素组件 */\r\n  aolFeature,\r\n  /**geo组件 */\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n  /**坐标组件 */\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n  /**样式组件 */\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n  aolStyleFill,\r\n  /**domTOMap */\r\n  aolOverlay,\r\n  /**交互 */\r\n  aolInteractionDefaults,\r\n  aolInteractionDraw,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n].forEach(component => {\r\n  registerComponent(component);\r\n});\r\n\r\nexport default aolModule;\r\n","import { sourceComponentConfig } from './source.component';\r\nimport { XYZ } from 'ol/source';\r\nimport { Options } from 'ol/source/XYZ';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\nimport { LoadFunction, UrlFunction } from 'ol/Tile';\r\nimport { Size } from 'ol/size';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport { SourceXYZExtend } from './xyz.component.extend';\r\n\r\nexport class SourceXYZComponent extends SourceXYZExtend\r\n  implements angular.IController, Options {\r\n  public instance: XYZ;\r\n  public componentType: string = 'sourceXYZComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  opaque?: boolean;\r\n  projection?: ProjectionLike;\r\n  reprojectionErrorThreshold?: number;\r\n  maxZoom?: number;\r\n  minZoom?: number;\r\n  tileGrid?: TileGrid;\r\n  tileLoadFunction?: LoadFunction;\r\n  tilePixelRatio?: number;\r\n  tileSize?: number | Size;\r\n  tileUrlFunction?: UrlFunction;\r\n  url?: string;\r\n  urls?: string[];\r\n  wrapX?: boolean;\r\n  transition?: number;\r\n  zDirection?: number;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    super.decorate();\r\n\r\n    this.instance = new XYZ(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url') || changes.hasOwnProperty('tileGrid')) {\r\n      // this.instance = new XYZ(this);\r\n      // this._register(this.instance);\r\n      this.$onInit();\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    projection: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    minZoom: '<?',\r\n    maxZoom: '<?',\r\n    tileGrid: '<?',\r\n    tileLoadFunction: '<?',\r\n    tilePixelRatio: '<?',\r\n    tileSize: '<?',\r\n    tileUrlFunction: '<?',\r\n    url: '<?',\r\n    urls: '<?',\r\n    wrapX: '<?',\r\n    transition: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: ['$element', SourceXYZComponent],\r\n};\r\n\r\nexport const aolSourceXyz = {\r\n  name: 'aolSourceXyz',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Tile as TileLayer } from 'ol/layer';\r\n\r\nexport class LayerTileComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: TileLayer;\r\n\r\n  preload: number;\r\n  useInterimTilesOnError: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new TileLayer(this);\r\n    super.$onInit();\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    preload: '<?',\r\n    useInterimTilesOnError: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerTileComponent],\r\n};\r\n\r\nexport const aolLayerTile = {\r\n  name: 'aolLayerTile',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { OrderFunction } from 'ol/render';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { StyleLike } from 'ol/style/Style';\r\n// import { Feature } from 'ol';\r\n// import Point from 'ol/geom/Point';\r\n\r\nexport class LayerVectorComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: VectorLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  renderOrder?: OrderFunction;\r\n  renderBuffer?: number;\r\n  source?: VectorSource<Geometry>;\r\n  declutter?: boolean;\r\n  style?: StyleLike;\r\n  updateWhileAnimating?: boolean;\r\n  updateWhileInteracting?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new VectorLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    renderOrder: '<?',\r\n    renderBuffer: '<?',\r\n    source: '<?',\r\n    declutter: '<?',\r\n    style: '<?',\r\n    updateWhileAnimating: '<?',\r\n    updateWhileInteracting: '<?',\r\n    properties: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerVectorComponent],\r\n};\r\n\r\nexport const aolLayerVector = {\r\n  name: 'aolLayerVector',\r\n  ...component,\r\n};\r\n","import { layerComponentConfig, LayerComponent } from './layer.component';\r\nimport { Options } from 'ol/layer/Group';\r\nimport { Group as LayerGroup } from 'ol/layer';\r\nimport { MapComponent } from '../map.component';\r\n\r\nexport class LayerGroupComponent extends LayerComponent\r\n  implements ng.IController, Options {\r\n  public componentType: string = 'LayerGroupComponent';\r\n  public instance: LayerGroup;\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n\r\n  $onInit() {\r\n    // console.log(`creating ol.layer.Group instance with:`, this);\r\n    this.instance = new LayerGroup(this);\r\n    super.$onInit();\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerGroupComponent],\r\n};\r\n\r\nexport const aolLayerGroup = {\r\n  name: 'aolLayerGroup',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport WebGLPointsLayer from 'ol/layer/WebGLPoints';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { LiteralStyle, SymbolType } from 'ol/style/LiteralStyle';\r\n\r\nexport class LayerWebglComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: WebGLPointsLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  style: any | LiteralStyle = {\r\n    symbol: {\r\n      symbolType: 'circle',\r\n      size: 6,\r\n      color: '#CD853F',\r\n      // [\r\n      //   \"interpolate\",\r\n      //   [\"linear\"],\r\n      //   [\"get\", \"webgltype\"],\r\n      //   \"00\",\r\n      //   \"#CD853F\",\r\n      //   \"01\", // 客船\r\n      //   \"#B0C4DE\",\r\n      //   \"02\", // 货船\r\n      //   \"#08B012\",\r\n      //   \"03\", // 液货船\r\n      //   \"#EA1600\",\r\n      //   \"04\", // 工程船\r\n      //   \"#FF8C00\",\r\n      //   \"05\", // 工作船\r\n      //   \"#D00BC5\",\r\n      //   \"06\", // 拖船\r\n      //   \"#2CD9DC\",\r\n      //   \"0909\", // 游艇\r\n      //   \"#00D28E\",\r\n      //   \"0905\", // 公务船\r\n      //   \"#F5F5F5\",\r\n      //   \"0903\", // 救助船\r\n      //   \"#FFFF00\",\r\n      //   \"90\", // 渔船\r\n      //   \"#1F4EC2\"\r\n      //   // \"09\", // 其他\r\n      // ],\r\n      // rotateWithView: false,\r\n      offset: [0, 0],\r\n    },\r\n  };\r\n  source?: VectorSource<Geometry>;\r\n  disableHitDetection?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new WebGLPointsLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    style: '<?',\r\n    className: '<?',\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    source: '<?',\r\n    disableHitDetection: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerWebglComponent],\r\n};\r\n\r\nexport const aolLayerWebgl = {\r\n  name: 'aolLayerWebgl',\r\n  ...component,\r\n};\r\n","/*\r\n * @Author: lich\r\n * @Date: 2020-03-17 13:33:45\r\n * @Last Modified by:   lich\r\n * @Last Modified time: 2020-03-17 13:33:45\r\n * 为了解决地图偏移\r\n */\r\nimport TileGrid, { Options } from 'ol/tilegrid/TileGrid';\r\nimport { SourceComponent } from './source.component';\r\n\r\nconst resolutions = [\r\n  156543.03392804097,\r\n  78271.51696402048,\r\n  39135.75848201024,\r\n  19567.87924100512,\r\n  9783.93962050256,\r\n  4891.96981025128,\r\n  2445.98490512564,\r\n  1222.99245256282,\r\n  611.49622628141,\r\n  305.748113140705,\r\n  152.8740565703525,\r\n  76.43702828517625,\r\n  38.21851414258813,\r\n  19.109257071294063,\r\n  9.554628535647032,\r\n  4.777314267823516,\r\n  2.388657133911758,\r\n  1.194328566955879,\r\n  0.5971642834779395,\r\n  0.29858214173896974,\r\n  0.14929107086948487,\r\n  0.07464553543474244,\r\n  0.03732276771737122,\r\n  0.01866138385868561,\r\n  0.009330691929342804,\r\n  0.004665345964671402,\r\n  0.002332672982335701,\r\n  0.0011663364911678506,\r\n  0.0005831682455839253,\r\n  0.00029158412279196264,\r\n  0.00014579206139598132,\r\n  0.00007289603069799066,\r\n  0.00003644801534899533,\r\n  0.000018224007674497665,\r\n  0.000009112003837248832,\r\n  0.000004556001918624416,\r\n  0.000002278000959312208,\r\n  0.000001139000479656104,\r\n  5.69500239828052e-7,\r\n  2.84750119914026e-7,\r\n  1.42375059957013e-7,\r\n  7.11875299785065e-8,\r\n  3.559376498925325e-8,\r\n];\r\n\r\nconst resolutions_4326 = [\r\n  1.40625,\r\n  0.703125,\r\n  0.3515625,\r\n  0.17578125,\r\n  0.087890625,\r\n  0.0439453125,\r\n  0.02197265625,\r\n  0.010986328125,\r\n  0.0054931640625,\r\n  0.00274658203125,\r\n  0.001373291015625,\r\n  0.0006866455078125,\r\n  0.00034332275390625,\r\n  0.000171661376953125,\r\n  0.0000858306884765625,\r\n  0.00004291534423828125,\r\n  0.000021457672119140625,\r\n  0.000010728836059570312,\r\n  0.000005364418029785156,\r\n  0.000002682209014892578,\r\n  0.000001341104507446289,\r\n  6.705522537231445e-7,\r\n  3.3527612686157227e-7,\r\n  1.6763806343078613e-7,\r\n  8.381903171539307e-8,\r\n  4.190951585769653e-8,\r\n  2.0954757928848267e-8,\r\n  1.0477378964424133e-8,\r\n  5.238689482212067e-9,\r\n  2.6193447411060333e-9,\r\n  1.3096723705530167e-9,\r\n  6.548361852765083e-10,\r\n  3.2741809263825417e-10,\r\n  1.6370904631912708e-10,\r\n  8.185452315956354e-11,\r\n  4.092726157978177e-11,\r\n  2.0463630789890885e-11,\r\n  1.0231815394945443e-11,\r\n  5.115907697472721e-12,\r\n  2.5579538487363607e-12,\r\n  1.2789769243681803e-12,\r\n  6.394884621840902e-13,\r\n  3.197442310920451e-13,\r\n];\r\n\r\nexport class SourceXYZExtend extends SourceComponent {\r\n  tileGrid?: any;\r\n  projection?: any;\r\n  decorate() {\r\n    if (!this.tileGrid || this.tileGrid.forEachTileCoord) return;\r\n    if (!this.tileGrid.resolutions) {\r\n      this.tileGrid.resolutions =\r\n        this.projection === 'EPSG:4326' ? resolutions_4326 : resolutions;\r\n    }\r\n    this.tileGrid = new TileGrid(this.tileGrid);\r\n  }\r\n}\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { OSM } from 'ol/source';\r\nimport { LoadFunction } from 'ol/Tile';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\n\r\nexport class SourceOSMComponent extends SourceComponent\r\n  implements ng.IController {\r\n  public instance: OSM;\r\n  public componentType: string = 'SourceOSMComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  maxZoom?: number;\r\n  opaque?: boolean;\r\n  reprojectionErrorThreshold?: number;\r\n  tileLoadFunction?: LoadFunction;\r\n  url?: string;\r\n  wrapX?: boolean;\r\n\r\n  $onInit() {\r\n    this.instance = new OSM(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url')) {\r\n      this.instance = new OSM(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    maxZoom: '<?',\r\n    tileLoadFunction: '<?',\r\n    url: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceOSMComponent],\r\n};\r\n\r\nexport const aolSourceOsm = {\r\n  name: 'aolSourceOsm',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport {\r\n  aolLayerVector,\r\n  LayerVectorComponent,\r\n  LayerGroupComponent,\r\n  aolLayerWebgl,\r\n} from '../layers';\r\nimport { LoadingStrategy } from 'ol/source/Vector';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Feature, Collection } from 'ol';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { FeatureLoader, FeatureUrlFunction } from 'ol/featureloader';\r\n\r\nexport class SourceVectorComponent extends SourceComponent\r\n  implements angular.IController {\r\n  public instance: VectorSource;\r\n  public componentType: string = 'SourceVectorComponent';\r\n  public host: LayerVectorComponent | LayerGroupComponent;\r\n  public layerVectorHost: LayerVectorComponent;\r\n  public layerWebglHost: LayerGroupComponent;\r\n\r\n  features?: Feature<Geometry>[] | Collection<Feature<Geometry>>;\r\n  format?: FeatureFormat;\r\n  loader?: FeatureLoader;\r\n  overlaps?: boolean;\r\n  strategy?: LoadingStrategy;\r\n  url?: string | FeatureUrlFunction;\r\n  useSpatialIndex?: boolean;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else if (this.layerWebglHost) {\r\n      this.host = this.layerWebglHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-source-vector must be applied to a Style or layerWebglHost or layerVectorHost component',\r\n      );\r\n    }\r\n\r\n    this.instance = new VectorSource(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'features':\r\n            this.instance.addFeatures(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    // if (changes.hasOwnProperty('url')) {\r\n    //   this.instance = new VectorSource(this);\r\n    //   this._register(this.instance);\r\n    // }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    features: '<?',\r\n    format: '<?',\r\n    loader: '<?',\r\n    overlaps: '<?',\r\n    strategy: '<?',\r\n    url: '<?',\r\n    useSpatialIndex: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `^?${aolLayerVector.name}`,\r\n    layerWebglHost: `^?${aolLayerWebgl.name}`,\r\n  },\r\n  controller: [SourceVectorComponent],\r\n};\r\n\r\nexport const aolSourceVector = {\r\n  name: 'aolSourceVector',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from \"./source.component\";\r\nimport { Cluster  } from \"ol/source\";\r\nimport { Options  } from \"ol/source/Cluster\";\r\nimport { Feature } from \"ol\";\r\nimport { Geometry, Point } from \"ol/geom\";\r\nimport { Vector } from \"ol/source\";\r\nimport { LayerVectorComponent, aolLayerVector } from \"../layers\";\r\n\r\nexport class SourceClusterComponent extends SourceComponent\r\n  implements angular.IController , Options {\r\n  public instance: Cluster;\r\n  public componentType: string = 'SourceClusterComponent';\r\n  public host: LayerVectorComponent;\r\n\r\n  distance?: number;\r\n  geometryFunction?: (p0: Feature<Geometry>) => Point;\r\n  source: Vector<Geometry>;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if(!this.source) return ;\r\n    this.instance = new Cluster(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('source')) {\r\n      this.$onDestroy();\r\n      this.instance = new Cluster(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    distance: '<?',\r\n    geometryFunction: '<?',\r\n    source: '<',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerVector.name}`,\r\n  },\r\n  controller: ['$element', SourceClusterComponent],\r\n};\r\n\r\n\r\nexport const aolSourceCluster = {\r\n  name: 'aolSourceCluster',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { TileDebug } from 'ol/source';\r\nimport { Options } from 'ol/source/TileDebug';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\n\r\nexport class SourceTiledebugComponent extends SourceComponent\r\n  implements ng.IController, Options {\r\n  public instance: TileDebug;\r\n  public componentType: string = 'SourceTiledebugComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  projection?: ProjectionLike;\r\n  tileGrid?: TileGrid;\r\n  wrapX?: boolean;\r\n  zDirection?: number;\r\n\r\n  $onInit() {\r\n    this.instance = new TileDebug(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    projection: '<?',\r\n    tileGrid: '<?',\r\n    wrapX: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceTiledebugComponent],\r\n};\r\n\r\nexport const aolSourceTiledebug = {\r\n  name: 'aolSourceTiledebug',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { MapComponent } from './map.component';\r\nimport { ViewComponent } from './view.component';\r\nimport {\r\n  GeometryPointComponent,\r\n  aolGeometryPoint,\r\n  GeometryLinestringComponent,\r\n  GeometryPolygonComponent,\r\n  aolGeometryLinestring,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport Projection from 'ol/proj/Projection';\r\nimport { transform } from 'ol/proj';\r\nimport aolView from './view.component';\r\nimport aolMap from './map.component';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\nexport class CoordinateComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private viewHost?: ViewComponent;\r\n  private geometryPointHost?: GeometryPointComponent;\r\n  // private overlayHost?:GeometryPointComponent;\r\n\r\n  x: number;\r\n  y: number;\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    if (this.geometryPointHost) {\r\n      this.host = this.geometryPointHost;\r\n    } else if (this.viewHost) {\r\n      this.host = this.viewHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n    //    else if (overlayHost !== null) {\r\n    //     this.host = overlayHost;\r\n    //   }\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !angular.isNumber(this.x) || !angular.isNumber(this.y))\r\n      return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: number[];\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = [this.x, this.y];\r\n    } else {\r\n      transformedCoordinates = transform(\r\n        [this.x, this.y],\r\n        this.srid,\r\n        referenceProjectionCode,\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-point':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'view':\r\n        this.host.instance.setCenter(transformedCoordinates);\r\n        break;\r\n      // case \"overlay\":\r\n      //   this.host.instance.setPosition(transformedCoordinates);\r\n      //   break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    x: '<',\r\n    y: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    viewHost: `?^${aolView.name}`,\r\n    geometryPointHost: `?^${aolGeometryPoint.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CoordinateComponent],\r\n};\r\n\r\nexport const aolCoordinate = {\r\n  name: 'aolCoordinate',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n\r\nexport class CollectionCoordinatesComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private geometryLinestring?: GeometryLinestringComponent;\r\n  private geometryPolygon?: GeometryPolygonComponent;\r\n\r\n  coordinates: [number, number][];\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    // console.log('creating aol-collection-coordinates');\r\n    if (!!this.geometryLinestring) {\r\n      this.host = this.geometryLinestring;\r\n    } else if (!!this.geometryPolygon) {\r\n      this.host = this.geometryPolygon;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !(this.coordinates instanceof Array)) return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: Array<Coordinate>;\r\n\r\n    // console.log('coordinates change: ', this.coordinates);\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = this.coordinates;\r\n    } else {\r\n      transformedCoordinates = [];\r\n      this.coordinates.forEach(\r\n        function(coordinate: Coordinate) {\r\n          transformedCoordinates.push(\r\n            transform(coordinate, this.srid, referenceProjectionCode),\r\n          );\r\n        }.bind(this),\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-linestring':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'geometry-polygon':\r\n        this.host.instance.setCoordinates([transformedCoordinates]);\r\n        break;\r\n      default:\r\n        throw new Error(\r\n          \"aol-collection-coordinates' host is of unknown type: \" +\r\n            this.host.componentType,\r\n        );\r\n      // break;\r\n    }\r\n  }\r\n}\r\n\r\nconst aolCollectionCoordinatesComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    coordinates: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    geometryPolygon: `?^${aolGeometryPolygon.name}`,\r\n    geometryLinestring: `?^${aolGeometryLinestring.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CollectionCoordinatesComponent],\r\n};\r\n\r\nexport const aolCollectionCoordinates = {\r\n  name: 'aolCollectionCoordinates',\r\n  ...aolCollectionCoordinatesComponent,\r\n};\r\n","export * from \"./style.component\";\r\nexport * from \"./stroke.component\";\r\nexport * from \"./fill.component\";\r\nexport * from \"./circle.component\";\r\nexport * from \"./icon.component\";\r\nexport * from \"./text.component\";","import { Options } from 'ol/style/Stroke';\r\nimport { Stroke } from 'ol/style';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\n\r\nexport class StrokeComponent implements ng.IController, Options {\r\n  public componentType = 'style-stroke';\r\n  public instance: Stroke;\r\n\r\n  private host: any; // StyleComponent | CircleComponent;\r\n\r\n  color?: Color | ColorLike;\r\n  lineCap?: CanvasLineCap;\r\n  lineJoin?: CanvasLineJoin;\r\n  lineDash?: number[];\r\n  lineDashOffset?: number;\r\n  miterLimit?: number;\r\n  width?: number;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n  protected styleCircleHost: styleCircleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Stroke(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = this.instance;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n\r\n  $onDestroy() {\r\n    // this.host.instance.setStroke(null);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = null;\r\n        this.host.update();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'color':\r\n            this.instance.setColor(changes[key].currentValue);\r\n            break;\r\n          case 'lineCap':\r\n            this.instance.setLineCap(changes[key].currentValue);\r\n            break;\r\n          case 'lineDash':\r\n            this.instance.setLineDash(changes[key].currentValue);\r\n            break;\r\n          case 'lineDashOffset':\r\n            this.instance.setLineDashOffset(changes[key].currentValue);\r\n            break;\r\n          case 'lineJoin':\r\n            this.instance.setLineJoin(changes[key].currentValue);\r\n            break;\r\n          case 'miterLimit':\r\n            this.instance.setMiterLimit(changes[key].currentValue);\r\n            break;\r\n          case 'width':\r\n            this.instance.setWidth(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStrokeComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n    lineCap: '<?',\r\n    lineJoin: '<?',\r\n    lineDash: '<?',\r\n    lineDashOffset: '<?',\r\n    miterLimit: '<?',\r\n    width: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n  },\r\n  controller: [StrokeComponent],\r\n};\r\n\r\nexport const aolStyleStroke = {\r\n  name: 'aolStyleStroke',\r\n  ...aolStrokeComponent,\r\n};\r\n","import { Options } from 'ol/style/Stroke';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { Fill } from 'ol/style';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\nimport { styleTextComponent, aolStyleText } from './text.component';\r\n\r\nexport class FillComponent implements ng.IController, Options {\r\n  public componentType = 'fill';\r\n  public instance: Fill;\r\n\r\n  private host: any; // StyleComponent;\r\n  private styleHost: StyleComponent;\r\n  private styleCircleHost: styleCircleComponent;\r\n  private styleTextHost: styleTextComponent;\r\n\r\n  color?: Color | ColorLike;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleTextHost) {\r\n      this.host = this.styleTextHost;\r\n    } else if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-style-fill must be applied to a Style or styleCircleHost or StyleText component',\r\n      );\r\n    }\r\n    this.instance = new Fill(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n  $onDestroy() {\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    // this.host.instance.setFill(new Fill({color:changes['color'].currentValue}))\r\n    this.instance = new Fill({ color: changes['color'].currentValue });\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolFillComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n    styleTextHost: `?^${aolStyleText.name}`,\r\n  },\r\n  controller: [FillComponent],\r\n};\r\n\r\nexport const aolStyleFill = {\r\n  name: 'aolStyleFill',\r\n  ...aolFillComponent,\r\n};\r\n","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Icon';\r\nimport { Icon } from 'ol/style';\r\nimport IconOrigin from 'ol/style/IconOrigin';\r\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits';\r\nimport { Color } from 'ol/color';\r\nimport { Size } from 'ol/size';\r\n\r\nexport class styleIconComponent implements ng.IController, Options {\r\n  public componentType = 'style-icon';\r\n  public instance: Icon;\r\n\r\n  private host: StyleComponent;\r\n\r\n  anchor?: number[];\r\n  anchorOrigin?: IconOrigin;\r\n  anchorXUnits?: IconAnchorUnits;\r\n  anchorYUnits?: IconAnchorUnits;\r\n  color?: Color | string;\r\n  crossOrigin?: string;\r\n  img?: HTMLImageElement | HTMLCanvasElement;\r\n  offset?: number[];\r\n  offsetOrigin?: IconOrigin;\r\n  opacity?: number;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  size?: Size;\r\n  imgSize?: Size;\r\n  src?: string;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    if (this.img && !this.imgSize) {\r\n      this.imgSize = [this.img.width, this.img.height];\r\n    }\r\n\r\n    this.instance = new Icon(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['opacity']) {\r\n      this.instance.setOpacity(changes['opacity'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['src']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    if (changes['img']) {\r\n      if (this.img && !this.imgSize) {\r\n        this.imgSize = [this.img.width, this.img.height];\r\n      }\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    if (changes['imgSize']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleIconComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    anchor: '<?',\r\n    anchorOrigin: '<?',\r\n    anchorXUnits: '<?',\r\n    anchorYUnits: '<?',\r\n    color: '<?',\r\n    crossOrigin: '<?',\r\n    img: '<?',\r\n    offset: '<?',\r\n    offsetOrigin: '<?',\r\n    opacity: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    size: '<?',\r\n    imgSize: '<?',\r\n    src: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleIconComponent],\r\n};\r\n\r\nexport const aolStyleIcon = {\r\n  name: 'aolStyleIcon',\r\n  ...aolStyleIconComponent,\r\n};\r\n","import { Overlay } from 'ol';\r\nimport { Options, PanOptions } from 'ol/Overlay';\r\nimport OverlayPositioning from 'ol/OverlayPositioning';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport aolMap, { MapComponent } from './map.component';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nexport class OverlayComponent implements ng.IController, Options {\r\n  componentType = 'overlay';\r\n  private instance: Overlay;\r\n  protected host: MapComponent;\r\n\r\n  $element: ng.IRootElementService;\r\n\r\n  // element: Element;\r\n\r\n  id: number | string;\r\n  element: HTMLElement;\r\n  offset?: number[];\r\n  position?: Coordinate;\r\n  positioning?: OverlayPositioning;\r\n  projection?: string;\r\n  stopEvent?: boolean;\r\n  insertFirst?: boolean;\r\n  autoPan?: boolean;\r\n  autoPanAnimation?: PanOptions;\r\n  autoPanMargin?: number;\r\n  className?: string;\r\n\r\n  constructor($element: ng.IRootElementService) {\r\n    this.$element = $element;\r\n  }\r\n\r\n  $onInit() {\r\n    /**@TODO: this.element , $element */\r\n    if (this.$element[0]) {\r\n      this.element = this.$element[0];\r\n      this.position =\r\n        this.projection == 'EPSG:4326'\r\n          ? this.position\r\n          : fromLonLat(this.position);\r\n      this.instance = new Overlay(this);\r\n      this.host.instance.addOverlay(this.instance);\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'position':\r\n            this.position =\r\n              this.projection == 'EPSG:4326'\r\n                ? this.position\r\n                : fromLonLat(this.position);\r\n            this.instance.setPosition(this.position);\r\n            return;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    if (this.instance) {\r\n      this.host.instance.removeOverlay(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    element: '<?',\r\n    offset: '<?',\r\n    position: '<?',\r\n    positioning: '<?',\r\n    stopEvent: '<?',\r\n    insertFirst: '<?',\r\n    autoPan: '<?',\r\n    autoPanAnimation: '<?',\r\n    autoPanMargin: '<?',\r\n    className: '<',\r\n    projection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', OverlayComponent],\r\n};\r\n\r\nexport const aolOverlay = {\r\n  name: 'aolOverlay',\r\n  ...component,\r\n};\r\n","export * from './default.component';\r\nexport * from './modify.component';\r\nexport * from './select.component';\r\nexport * from './draganddrop.component';\r\n","import { Collection } from 'ol';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport {\r\n  defaults as defaultInteraction,\r\n  DefaultsOptions,\r\n} from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\n\r\nexport class DefaultInteractionComponent\r\n  implements ng.IController, DefaultsOptions {\r\n  instance: Collection<Interaction>;\r\n  private host: MapComponent;\r\n\r\n  altShiftDragRotate?: boolean;\r\n  onFocusOnly?: boolean;\r\n  doubleClickZoom?: boolean;\r\n  keyboard?: boolean;\r\n  mouseWheelZoom?: boolean;\r\n  shiftDragZoom?: boolean;\r\n  dragPan?: boolean;\r\n  pinchRotate?: boolean;\r\n  pinchZoom?: boolean;\r\n  zoomDelta?: number;\r\n  zoomDuration?: number;\r\n\r\n  //   constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = defaultInteraction(this);\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.addInteraction(interaction),\r\n    );\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.removeInteraction(interaction),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    altShiftDragRotate: '<?',\r\n    onFocusOnly: '<?',\r\n    doubleClickZoom: '<?',\r\n    keyboard: '<?',\r\n    mouseWheelZoom: '<?',\r\n    shiftDragZoom: '<?',\r\n    dragPan: '<?',\r\n    pinchRotate: '<?',\r\n    pinchZoom: '<?',\r\n    zoomDelta: '<?',\r\n    zoomDuration: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DefaultInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDefaults = {\r\n  name: 'aolInteractionDefaults',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Modify } from 'ol/interaction';\r\nimport { Options, ModifyEvent } from 'ol/interaction/Modify';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Collection, Feature } from 'ol';\r\n\r\nexport class ModifyInteractionComponent implements ng.IController, Options {\r\n  private instance: Modify;\r\n  protected host: MapComponent;\r\n\r\n  condition?: Condition;\r\n  deleteCondition?: Condition;\r\n  insertVertexCondition?: Condition;\r\n  pixelTolerance?: number;\r\n  style?: StyleLike;\r\n  source?: VectorSource<Geometry>;\r\n  features?: Collection<Feature<Geometry>>;\r\n  wrapX?: boolean;\r\n\r\n  onModifyEnd = angular.noop;\r\n  onModifyStart = angular.noop;\r\n  onChange = angular.noop;\r\n  onChangeActive = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.source && !this.features) {\r\n      console.error('The modify interaction requires features or a source');\r\n      return;\r\n    }\r\n    this.instance = new Modify(this);\r\n    this.instance.on('change', (event: ModifyEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('change:active', (event: ModifyEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ModifyEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('modifyend', (event: ModifyEvent) =>\r\n      this.onModifyEnd({ event }),\r\n    );\r\n    this.instance.on('modifystart', (event: ModifyEvent) =>\r\n      this.onModifyStart({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    condition: '<',\r\n    deleteCondition: '<?',\r\n    insertVertexCondition: '<?',\r\n    pixelTolerance: '<?',\r\n    style: '<?',\r\n    source: '<?',\r\n    features: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', ModifyInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionModify = {\r\n  name: 'aolInteractionModify',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { Select } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport {\r\n  Options,\r\n  FilterFunction,\r\n  SelectEvent,\r\n  SelectEventType,\r\n} from 'ol/interaction/Select';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { Source } from 'ol/source';\r\nimport { Layer } from 'ol/layer';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { SelectInteractionExtend } from './select.component.extend';\r\n\r\nexport class SelectInteractionComponent extends SelectInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Select;\r\n  protected host: MapComponent;\r\n\r\n  addCondition?: Condition;\r\n  condition?: Condition;\r\n  layers?: Layer<Source>[] | ((p0: Layer<Source>) => boolean);\r\n  style?: StyleLike;\r\n  removeCondition?: Condition;\r\n  toggleCondition?: Condition;\r\n  multi?: boolean;\r\n  features?: Collection<Feature<Geometry>>;\r\n  filter?: FilterFunction;\r\n  hitTolerance?: number;\r\n\r\n  onSelect = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The select interaction requires map component');\r\n      return;\r\n    }\r\n    super.initCondition();\r\n    this.instance = new Select(this);\r\n    this.instance.on('select', (event: SelectEvent | any) => {\r\n      if (event.selected.length) {\r\n        event.remove = () => {\r\n          this.instance.getFeatures().remove(event.selected[0]);\r\n          this.instance.dispatchEvent({\r\n            type: 'select',\r\n            selected: [],\r\n            deselected: [event.selected[0]],\r\n            mapBrowserEvent: null,\r\n          });\r\n        };\r\n      }\r\n      this.onSelect({ event });\r\n    });\r\n    this.instance.on('change', (event: SelectEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: SelectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    addCondition: '<',\r\n    condition: '<?',\r\n    layers: '<?',\r\n    style: '<?',\r\n    removeCondition: '<?',\r\n    toggleCondition: '<?',\r\n    multi: '<?',\r\n    features: '<?',\r\n    filter: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onSelect: '&?',\r\n    onPropertyChange: '&?',\r\n    instance: '=?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', SelectInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionSelect = {\r\n  name: 'aolInteractionSelect',\r\n  ...component,\r\n};\r\n","import {\r\n  Condition,\r\n  altKeyOnly,\r\n  altShiftKeysOnly,\r\n  click,\r\n  doubleClick,\r\n  mouseActionButton,\r\n  mouseOnly,\r\n  noModifierKeys,\r\n  penOnly,\r\n  focus,\r\n  platformModifierKeyOnly,\r\n  pointerMove,\r\n  primaryAction,\r\n  shiftKeyOnly,\r\n  singleClick,\r\n  targetNotEditable,\r\n  touchOnly,\r\n} from 'ol/events/condition';\r\n\r\n// var conditionType:\r\n//   | 'altKeyOnly'\r\n//   | 'altShiftKeysOnly'\r\n//   | 'click'\r\n//   | 'doubleClick'\r\n//   | 'focus'\r\n//   | 'mouseActionButton'\r\n//   | 'mouseOnly'\r\n//   | 'noModifierKeys'\r\n//   | 'penOnly'\r\n//   | 'platformModifierKeyOnly'\r\n//   | 'pointerMove'\r\n//   | 'primaryAction'\r\n//   | 'shiftKeyOnly'\r\n//   | 'singleClick'\r\n//   | 'targetNotEditable'\r\n//   | 'touchOnly';\r\n\r\nexport class SelectInteractionExtend {\r\n  condition?: Condition;\r\n  /**初始化condition状态 */\r\n  initCondition() {\r\n    var key: conditionType | Condition = this.condition;\r\n    if (typeof key === 'function') return key;\r\n    switch (key) {\r\n      case 'altKeyOnly':\r\n        this.condition = altKeyOnly;\r\n        break;\r\n      case 'altShiftKeysOnly':\r\n        this.condition = altShiftKeysOnly;\r\n        break;\r\n      case 'click':\r\n        this.condition = click;\r\n        break;\r\n      case 'doubleClick':\r\n        this.condition = doubleClick;\r\n        break;\r\n      case 'focus':\r\n        this.condition = focus;\r\n        break;\r\n      case 'mouseActionButton':\r\n        this.condition = mouseActionButton;\r\n        break;\r\n      case 'mouseOnly':\r\n        this.condition = mouseOnly;\r\n        break;\r\n      case 'noModifierKeys':\r\n        this.condition = noModifierKeys;\r\n        break;\r\n      case 'penOnly':\r\n        this.condition = penOnly;\r\n        break;\r\n      case 'platformModifierKeyOnly':\r\n        this.condition = platformModifierKeyOnly;\r\n        break;\r\n      case 'pointerMove':\r\n        this.condition = pointerMove;\r\n        break;\r\n      case 'primaryAction':\r\n        this.condition = primaryAction;\r\n        break;\r\n      case 'shiftKeyOnly':\r\n        this.condition = shiftKeyOnly;\r\n        break;\r\n      case 'singleClick':\r\n        this.condition = singleClick;\r\n        break;\r\n      case 'targetNotEditable':\r\n        this.condition = targetNotEditable;\r\n        break;\r\n      case 'touchOnly':\r\n        this.condition = touchOnly;\r\n        break;\r\n      default:\r\n        this.condition = click;\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nenum conditionType {\r\n  altKeyOnly = 'altKeyOnly',\r\n  altShiftKeysOnly = 'altShiftKeysOnly',\r\n  click = 'click',\r\n  doubleClick = 'doubleClick',\r\n  focus = 'focus',\r\n  mouseActionButton = 'mouseActionButton',\r\n  mouseOnly = 'mouseOnly',\r\n  noModifierKeys = 'noModifierKeys',\r\n  penOnly = 'penOnly',\r\n  platformModifierKeyOnly = 'platformModifierKeyOnly',\r\n  pointerMove = 'pointerMove',\r\n  primaryAction = 'primaryAction',\r\n  shiftKeyOnly = 'shiftKeyOnly',\r\n  singleClick = 'singleClick',\r\n  targetNotEditable = 'targetNotEditable',\r\n  touchOnly = 'touchOnly',\r\n}\r\n","module.exports = ol.events.condition;","import * as angular from 'angular';\r\nimport { Options, DragAndDropEvent } from 'ol/interaction/DragAndDrop';\r\nimport { DragAndDrop } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { Vector } from 'ol/source';\r\nimport { Geometry } from 'ol/geom';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { DraganddropInteractionExtend } from './draganddrop.component.extend';\r\n\r\nexport class DraganddropInteractionComponent\r\n  extends DraganddropInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: DragAndDrop;\r\n  protected host: MapComponent;\r\n\r\n  formatConstructors?: FeatureFormat[];\r\n  source?: Vector<Geometry>;\r\n  projection?: ProjectionLike;\r\n  target?: HTMLElement;\r\n\r\n  onAddFeatures = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The DragAndDrop interaction requires map component');\r\n      return;\r\n    }\r\n    super.decorate(this);\r\n    this.instance = new DragAndDrop(this);\r\n    this.instance.on('addfeatures', (event: DragAndDropEvent) =>\r\n      this.onAddFeatures({ event }),\r\n    );\r\n    this.instance.on('change', (event: BaseEvent) => this.onChange({ event }));\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    formatConstructors: '<',\r\n    source: '<?',\r\n    projection: '<?',\r\n    target: '<?',\r\n    onChange: '&?',\r\n    onAddFeatures: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: [DraganddropInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraganddrop = {\r\n  name: 'aolInteractionDraganddrop',\r\n  ...component,\r\n};\r\n","import { DraganddropInteractionComponent } from './draganddrop.component';\r\n// import FeatureFormat from 'ol/format/Feature';\r\nimport {\r\n  GPX,\r\n  GeoJSON,\r\n  IGC,\r\n  KML,\r\n  TopoJSON,\r\n  EsriJSON,\r\n  GML,\r\n  IIIFInfo,\r\n  MVT,\r\n  OWS,\r\n  Polyline,\r\n  WFS,\r\n  WKT,\r\n  WMSCapabilities,\r\n  WMSGetFeatureInfo,\r\n  WMTSCapabilities,\r\n} from 'ol/format';\r\n\r\nexport abstract class DraganddropInteractionExtend {\r\n  defaultFormat: { [index: string]: any } = {\r\n    GPX,\r\n    GeoJSON,\r\n    IGC,\r\n    KML,\r\n    TopoJSON,\r\n    EsriJSON,\r\n    GML,\r\n    IIIFInfo,\r\n    MVT,\r\n    OWS,\r\n    Polyline,\r\n    WFS,\r\n    WKT,\r\n    WMSCapabilities,\r\n    WMSGetFeatureInfo,\r\n    WMTSCapabilities,\r\n  };\r\n\r\n  decorate(child: DraganddropInteractionComponent) {\r\n    if (child.formatConstructors) {\r\n      child.formatConstructors = this.getFormat(child.formatConstructors);\r\n    }\r\n  }\r\n\r\n  getFormat(featureConlist: any[]) {\r\n    return featureConlist.map(item => {\r\n      //@FIXME: ol打包问题产生 && item instanceof FeatureFormat\r\n      if (typeof item === 'function') {\r\n        return item;\r\n      }\r\n      let formatCon = this.defaultFormat[item];\r\n      if (formatCon) {\r\n        return formatCon;\r\n      } else {\r\n        throw new Error('DragandDrop不存在当前FeatureFormat');\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = ol.format;","import * as angular from 'angular';\r\nimport { Options, GeometryFunction, DrawEvent } from 'ol/interaction/Draw';\r\nimport { Draw } from 'ol/interaction';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { DrawInteractionExtend } from './draw.component.extend';\r\n\r\nexport class DrawInteractionComponent extends DrawInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Draw;\r\n  protected host: MapComponent;\r\n\r\n  type: GeometryType;\r\n  clickTolerance?: number;\r\n  features?: Collection<Feature<Geometry>>;\r\n  source?: VectorSource<Geometry>;\r\n  dragVertexDelay?: number;\r\n  snapTolerance?: number;\r\n  stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  finishCondition?: Condition;\r\n  style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  geometryName?: string;\r\n  condition?: Condition;\r\n  freehand?: boolean;\r\n  freehandCondition?: Condition;\r\n  wrapX?: boolean;\r\n\r\n  public onChange = angular.noop;\r\n  public onChangeActive = angular.noop;\r\n  public onDrawEnd = angular.noop;\r\n  public onDrawStart = angular.noop;\r\n  public onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    super.init(this.type);\r\n    this.instance = new Draw(this);\r\n    this.instance.on('change', (event: DrawEvent) => this.onChange({ event }));\r\n    this.instance.on('change:active', (event: DrawEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('drawend', (event: DrawEvent) =>\r\n      this.onDrawEnd({ event }),\r\n    );\r\n    this.instance.on('drawstart', (event: DrawEvent) =>\r\n      this.onDrawStart({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: DrawEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    type: '<',\r\n    clickTolerance: '<?',\r\n    features: '<?',\r\n    source: '<?',\r\n    dragVertexDelay: '<?',\r\n    snapTolerance: '<?',\r\n    stopClick: '<?',\r\n    maxPoints: '<?',\r\n    minPoints: '<?',\r\n    finishCondition: '<?',\r\n    style: '<?',\r\n    geometryFunction: '<?',\r\n    geometryName: '<?',\r\n    condition: '<?',\r\n    freehand: '<?',\r\n    freehandCondition: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onChangeActive: '&?',\r\n    onDrawEnd: '&?',\r\n    onDrawStart: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DrawInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraw = {\r\n  name: 'aolInteractionDraw',\r\n  ...component,\r\n};\r\n","import GeometryType from 'ol/geom/GeometryType';\r\nimport { Options, GeometryFunction } from 'ol/interaction/Draw';\r\nimport { Polygon } from 'ol/geom';\r\n\r\nexport abstract class DrawInteractionExtend implements Options {\r\n  type: any;\r\n  // clickTolerance?: number;\r\n  // features?: Collection<Feature<Geometry>>;\r\n  // source?: VectorSource<Geometry>;\r\n  // dragVertexDelay?: number;\r\n  // snapTolerance?: number;\r\n  // stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  // finishCondition?: Condition;\r\n  // style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  // geometryName?: string;\r\n  // condition?: Condition;\r\n  // freehand?: boolean;\r\n  // freehandCondition?: Condition;\r\n  // wrapX?: boolean;\r\n\r\n  init(type: GeometryType | 'Rectangle') {\r\n    switch (type) {\r\n      case 'Rectangle':\r\n        this.__createRectangleParams();\r\n        break;\r\n      default:\r\n        this.type = type;\r\n        break;\r\n    }\r\n  }\r\n\r\n  __createRectangleParams() {\r\n    this.maxPoints = 2;\r\n    this.type = 'LineString';\r\n    this.geometryFunction = (coordinates: any, geometry) => {\r\n      //如果geometry对象不存在或者为空，则创建\r\n      if (!geometry) {\r\n        //多面几何图形下设置\r\n        geometry = new Polygon([]);\r\n      }\r\n      // 开始坐标\r\n      var start = coordinates[0];\r\n      // 结束坐标\r\n      var end = coordinates[1];\r\n      // 根据开始与结束坐标绘制,从起始点，回到起始点\r\n      geometry.setCoordinates([\r\n        [start, [start[0], end[1]], end, [end[0], start[1]], start],\r\n      ]);\r\n      // 返回几何图形坐标进行渲染\r\n      return geometry;\r\n    };\r\n  }\r\n}\r\n","/**\n * @module ol/obj\n */\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = (typeof Object.assign === 'function') ? Object.assign : function (target, var_sources) {\n    if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n    }\n    var output = Object(target);\n    for (var i = 1, ii = arguments.length; i < ii; ++i) {\n        var source = arguments[i];\n        if (source !== undefined && source !== null) {\n            for (var key in source) {\n                if (source.hasOwnProperty(key)) {\n                    output[key] = source[key];\n                }\n            }\n        }\n    }\n    return output;\n};\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n    for (var property in object) {\n        delete object[property];\n    }\n}\n/**\n * Polyfill for Object.values().  Get an array of property values from an object.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values\n *\n * @param {!Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport var getValues = (typeof Object.values === 'function') ? Object.values : function (object) {\n    var values = [];\n    for (var property in object) {\n        values.push(object[property]);\n    }\n    return values;\n};\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n    var property;\n    for (property in object) {\n        return false;\n    }\n    return !property;\n}\n//# sourceMappingURL=obj.js.map","/**\n * @module ol/webgl\n */\n/**\n * Constants taken from goog.webgl\n */\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\nexport var ARRAY_BUFFER = 0x8892;\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\nexport var ELEMENT_ARRAY_BUFFER = 0x8893;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var STREAM_DRAW = 0x88E0;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var STATIC_DRAW = 0x88E4;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\nexport var DYNAMIC_DRAW = 0x88E8;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_BYTE = 0x1401;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_SHORT = 0x1403;\n/**\n * @const\n * @type {number}\n */\nexport var UNSIGNED_INT = 0x1405;\n/**\n * @const\n * @type {number}\n */\nexport var FLOAT = 0x1406;\n/** end of goog.webgl constants\n */\n/**\n * @const\n * @type {Array<string>}\n */\nvar CONTEXT_IDS = [\n    'experimental-webgl',\n    'webgl',\n    'webkit-3d',\n    'moz-webgl'\n];\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object=} opt_attributes Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\nexport function getContext(canvas, opt_attributes) {\n    var ii = CONTEXT_IDS.length;\n    for (var i = 0; i < ii; ++i) {\n        try {\n            var context = canvas.getContext(CONTEXT_IDS[i], opt_attributes);\n            if (context) {\n                return /** @type {!WebGLRenderingContext} */ (context);\n            }\n        }\n        catch (e) {\n            // pass\n        }\n    }\n    return null;\n}\n/**\n * @type {Array<string>}\n */\nvar supportedExtensions;\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\nexport function getSupportedExtensions() {\n    if (!supportedExtensions) {\n        var canvas = document.createElement('canvas');\n        var gl = getContext(canvas);\n        if (gl) {\n            supportedExtensions = gl.getSupportedExtensions();\n        }\n    }\n    return supportedExtensions;\n}\n//# sourceMappingURL=webgl.js.map","/**\n * @module ol/webgl/Buffer\n */\nimport { STATIC_DRAW, STREAM_DRAW, DYNAMIC_DRAW } from '../webgl.js';\nimport { ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER } from '../webgl.js';\nimport { assert } from '../asserts.js';\n/**\n * Used to describe the intended usage for the data: `STATIC_DRAW`, `STREAM_DRAW`\n * or `DYNAMIC_DRAW`.\n * @enum {number}\n */\nexport var BufferUsage = {\n    STATIC_DRAW: STATIC_DRAW,\n    STREAM_DRAW: STREAM_DRAW,\n    DYNAMIC_DRAW: DYNAMIC_DRAW\n};\n/**\n * @classdesc\n * Object used to store an array of data as well as usage information for that data.\n * Stores typed arrays internally, either Float32Array or Uint16/32Array depending on\n * the buffer type (ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER) and available extensions.\n *\n * To populate the array, you can either use:\n * * A size using `#ofSize(buffer)`\n * * An `ArrayBuffer` object using `#fromArrayBuffer(buffer)`\n * * A plain array using `#fromArray(array)`\n *\n * Note:\n * See the documentation of [WebGLRenderingContext.bufferData](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData)\n * for more info on buffer usage.\n * @api\n */\nvar WebGLArrayBuffer = /** @class */ (function () {\n    /**\n     * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n     * @param {number=} opt_usage Intended usage, either `STATIC_DRAW`, `STREAM_DRAW` or `DYNAMIC_DRAW`.\n     * Default is `DYNAMIC_DRAW`.\n     */\n    function WebGLArrayBuffer(type, opt_usage) {\n        /**\n         * @private\n         * @type {Float32Array|Uint32Array}\n         */\n        this.array = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.type = type;\n        assert(type === ARRAY_BUFFER || type === ELEMENT_ARRAY_BUFFER, 62);\n        /**\n         * @private\n         * @type {number}\n         */\n        this.usage = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n    }\n    /**\n     * Populates the buffer with an array of the given size (all values will be zeroes).\n     * @param {number} size Array size\n     */\n    WebGLArrayBuffer.prototype.ofSize = function (size) {\n        this.array = new (getArrayClassForType(this.type))(size);\n    };\n    /**\n     * Populates the buffer with an array of the given size (all values will be zeroes).\n     * @param {Array<number>} array Numerical array\n     */\n    WebGLArrayBuffer.prototype.fromArray = function (array) {\n        this.array = (getArrayClassForType(this.type)).from(array);\n    };\n    /**\n     * Populates the buffer with a raw binary array buffer.\n     * @param {ArrayBuffer} buffer Raw binary buffer to populate the array with. Note that this buffer must have been\n     * initialized for the same typed array class.\n     */\n    WebGLArrayBuffer.prototype.fromArrayBuffer = function (buffer) {\n        this.array = new (getArrayClassForType(this.type))(buffer);\n    };\n    /**\n     * @return {number} Buffer type.\n     */\n    WebGLArrayBuffer.prototype.getType = function () {\n        return this.type;\n    };\n    /**\n     * Will return null if the buffer was not initialized\n     * @return {Float32Array|Uint32Array} Array.\n     */\n    WebGLArrayBuffer.prototype.getArray = function () {\n        return this.array;\n    };\n    /**\n     * @return {number} Usage.\n     */\n    WebGLArrayBuffer.prototype.getUsage = function () {\n        return this.usage;\n    };\n    /**\n     * Will return 0 if the buffer is not initialized\n     * @return {number} Array size\n     */\n    WebGLArrayBuffer.prototype.getSize = function () {\n        return this.array ? this.array.length : 0;\n    };\n    return WebGLArrayBuffer;\n}());\n/**\n * Returns a typed array constructor based on the given buffer type\n * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n * @returns {Float32ArrayConstructor|Uint32ArrayConstructor} The typed array class to use for this buffer.\n */\nexport function getArrayClassForType(type) {\n    switch (type) {\n        case ARRAY_BUFFER:\n            return Float32Array;\n        case ELEMENT_ARRAY_BUFFER:\n            return Uint32Array;\n        default:\n            return Float32Array;\n    }\n}\nexport default WebGLArrayBuffer;\n//# sourceMappingURL=Buffer.js.map","/**\n * @module ol/Disposable\n */\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nvar Disposable = /** @class */ (function () {\n    function Disposable() {\n        /**\n         * The object has already been disposed.\n         * @type {boolean}\n         * @private\n         */\n        this.disposed_ = false;\n    }\n    /**\n     * Clean up.\n     */\n    Disposable.prototype.dispose = function () {\n        if (!this.disposed_) {\n            this.disposed_ = true;\n            this.disposeInternal();\n        }\n    };\n    /**\n     * Extension point for disposable objects.\n     * @protected\n     */\n    Disposable.prototype.disposeInternal = function () { };\n    return Disposable;\n}());\nexport default Disposable;\n//# sourceMappingURL=Disposable.js.map","/**\n * @module ol/webgl/ContextEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    LOST: 'webglcontextlost',\n    RESTORED: 'webglcontextrestored'\n};\n//# sourceMappingURL=ContextEventType.js.map","/**\n * @module ol/transform\n */\nimport { assert } from './asserts.js';\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n/**\n * @private\n * @type {Transform}\n */\nvar tmp_ = new Array(6);\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n    return set(transform, 1, 0, 0, 1, 0, 0);\n}\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n    var a1 = transform1[0];\n    var b1 = transform1[1];\n    var c1 = transform1[2];\n    var d1 = transform1[3];\n    var e1 = transform1[4];\n    var f1 = transform1[5];\n    var a2 = transform2[0];\n    var b2 = transform2[1];\n    var c2 = transform2[2];\n    var d2 = transform2[3];\n    var e2 = transform2[4];\n    var f2 = transform2[5];\n    transform1[0] = a1 * a2 + c1 * b2;\n    transform1[1] = b1 * a2 + d1 * b2;\n    transform1[2] = a1 * c2 + c1 * d2;\n    transform1[3] = b1 * c2 + d1 * d2;\n    transform1[4] = a1 * e2 + c1 * f2 + e1;\n    transform1[5] = b1 * e2 + d1 * f2 + f1;\n    return transform1;\n}\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n    transform[0] = a;\n    transform[1] = b;\n    transform[2] = c;\n    transform[3] = d;\n    transform[4] = e;\n    transform[5] = f;\n    return transform;\n}\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n    transform1[0] = transform2[0];\n    transform1[1] = transform2[1];\n    transform1[2] = transform2[2];\n    transform1[3] = transform2[3];\n    transform1[4] = transform2[4];\n    transform1[5] = transform2[5];\n    return transform1;\n}\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n    var x = coordinate[0];\n    var y = coordinate[1];\n    coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n    coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n    return coordinate;\n}\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n    return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n    return set(target, x, 0, 0, y, 0, 0);\n}\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n    return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n    var sin = Math.sin(angle);\n    var cos = Math.cos(angle);\n    transform[0] = sx * cos;\n    transform[1] = sy * sin;\n    transform[2] = -sx * sin;\n    transform[3] = sy * cos;\n    transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n    transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n    return transform;\n}\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` porperty of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n    return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n    return makeInverse(source, source);\n}\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n    var det = determinant(source);\n    assert(det !== 0, 32); // Transformation matrix cannot be inverted\n    var a = source[0];\n    var b = source[1];\n    var c = source[2];\n    var d = source[3];\n    var e = source[4];\n    var f = source[5];\n    target[0] = d / det;\n    target[1] = -b / det;\n    target[2] = -c / det;\n    target[3] = a / det;\n    target[4] = (c * f - d * e) / det;\n    target[5] = -(a * f - b * e) / det;\n    return target;\n}\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n    return mat[0] * mat[3] - mat[1] * mat[2];\n}\n/**\n * A string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n    return 'matrix(' + mat.join(', ') + ')';\n}\n//# sourceMappingURL=transform.js.map","/**\n * @module ol/vec/mat4\n */\n/**\n * @return {Array<number>} \"4x4 matrix representing a 3D identity transform.\"\n */\nexport function create() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n/**\n * @param {Array<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {import(\"../transform.js\").Transform} transform Transformation matrix.\n * @return {Array<number>} \"2D transformation matrix as flattened 4x4 matrix.\"\n */\nexport function fromTransform(mat4, transform) {\n    mat4[0] = transform[0];\n    mat4[1] = transform[1];\n    mat4[4] = transform[2];\n    mat4[5] = transform[3];\n    mat4[12] = transform[4];\n    mat4[13] = transform[5];\n    return mat4;\n}\n//# sourceMappingURL=mat4.js.map","/**\n * @module ol/webgl/PostProcessingPass\n */\nvar DEFAULT_VERTEX_SHADER = \"\\n  precision mediump float;\\n  \\n  attribute vec2 a_position;\\n  varying vec2 v_texCoord;\\n  varying vec2 v_screenCoord;\\n  \\n  uniform vec2 u_screenSize;\\n   \\n  void main() {\\n    v_texCoord = a_position * 0.5 + 0.5;\\n    v_screenCoord = v_texCoord * u_screenSize;\\n    gl_Position = vec4(a_position, 0.0, 1.0);\\n  }\\n\";\nvar DEFAULT_FRAGMENT_SHADER = \"\\n  precision mediump float;\\n   \\n  uniform sampler2D u_image;\\n   \\n  varying vec2 v_texCoord;\\n   \\n  void main() {\\n    gl_FragColor = texture2D(u_image, v_texCoord);\\n  }\\n\";\n/**\n * @typedef {Object} Options\n * @property {WebGLRenderingContext} webGlContext WebGL context; mandatory.\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,import(\"./Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {import(\"./Helper\").UniformValue} value Value\n * @property {number} location Location\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n/**\n * @classdesc\n * This class is used to define Post Processing passes with custom shaders and uniforms.\n * This is used internally by {@link module:ol/webgl/Helper~WebGLHelper}.\n *\n * Please note that the final output on the DOM canvas is expected to have premultiplied alpha, which means that\n * a pixel which is 100% red with an opacity of 50% must have a color of (r=0.5, g=0, b=0, a=0.5).\n * Failing to provide pixel colors with premultiplied alpha will result in render anomalies.\n *\n * The default post-processing pass does *not* multiply color values with alpha value, it expects color values to be\n * premultiplied.\n *\n * Default shaders are shown hereafter:\n *\n * * Vertex shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   attribute vec2 a_position;\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   uniform vec2 u_screenSize;\n *\n *   void main() {\n *     v_texCoord = a_position * 0.5 + 0.5;\n *     v_screenCoord = v_texCoord * u_screenSize;\n *     gl_Position = vec4(a_position, 0.0, 1.0);\n *   }\n *   ```\n *\n * * Fragment shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   uniform sampler2D u_image;\n *\n *   varying vec2 v_texCoord;\n *\n *   void main() {\n *     gl_FragColor = texture2D(u_image, v_texCoord);\n *   }\n *   ```\n *\n * @api\n */\nvar WebGLPostProcessingPass = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function WebGLPostProcessingPass(options) {\n        this.gl_ = options.webGlContext;\n        var gl = this.gl_;\n        this.scaleRatio_ = options.scaleRatio || 1;\n        this.renderTargetTexture_ = gl.createTexture();\n        this.renderTargetTextureSize_ = null;\n        this.frameBuffer_ = gl.createFramebuffer();\n        // compile the program for the frame buffer\n        // TODO: make compilation errors show up\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, options.vertexShader || DEFAULT_VERTEX_SHADER);\n        gl.compileShader(vertexShader);\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, options.fragmentShader || DEFAULT_FRAGMENT_SHADER);\n        gl.compileShader(fragmentShader);\n        this.renderTargetProgram_ = gl.createProgram();\n        gl.attachShader(this.renderTargetProgram_, vertexShader);\n        gl.attachShader(this.renderTargetProgram_, fragmentShader);\n        gl.linkProgram(this.renderTargetProgram_);\n        // bind the vertices buffer for the frame buffer\n        this.renderTargetVerticesBuffer_ = gl.createBuffer();\n        var verticesArray = [\n            -1, -1,\n            1, -1,\n            -1, 1,\n            1, -1,\n            1, 1,\n            -1, 1\n        ];\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArray), gl.STATIC_DRAW);\n        this.renderTargetAttribLocation_ = gl.getAttribLocation(this.renderTargetProgram_, 'a_position');\n        this.renderTargetUniformLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_screenSize');\n        this.renderTargetTextureLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_image');\n        /**\n         * Holds info about custom uniforms used in the post processing pass\n         * @type {Array<UniformInternalDescription>}\n         * @private\n         */\n        this.uniforms_ = [];\n        options.uniforms && Object.keys(options.uniforms).forEach(function (name) {\n            this.uniforms_.push({\n                value: options.uniforms[name],\n                location: gl.getUniformLocation(this.renderTargetProgram_, name)\n            });\n        }.bind(this));\n    }\n    /**\n     * Get the WebGL rendering context\n     * @return {WebGLRenderingContext} The rendering context.\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.getGL = function () {\n        return this.gl_;\n    };\n    /**\n     * Initialize the render target texture of the post process, make sure it is at the\n     * right size and bind it as a render target for the next draw calls.\n     * The last step to be initialized will be the one where the primitives are rendered.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.init = function (frameState) {\n        var gl = this.getGL();\n        var textureSize = [\n            gl.drawingBufferWidth * this.scaleRatio_,\n            gl.drawingBufferHeight * this.scaleRatio_\n        ];\n        // rendering goes to my buffer\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.getFrameBuffer());\n        gl.viewport(0, 0, textureSize[0], textureSize[1]);\n        // if size has changed: adjust canvas & render target texture\n        if (!this.renderTargetTextureSize_ ||\n            this.renderTargetTextureSize_[0] !== textureSize[0] || this.renderTargetTextureSize_[1] !== textureSize[1]) {\n            this.renderTargetTextureSize_ = textureSize;\n            // create a new texture\n            var level = 0;\n            var internalFormat = gl.RGBA;\n            var border = 0;\n            var format = gl.RGBA;\n            var type = gl.UNSIGNED_BYTE;\n            var data = null;\n            gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, textureSize[0], textureSize[1], border, format, type, data);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            // bind the texture to the framebuffer\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.renderTargetTexture_, 0);\n        }\n    };\n    /**\n     * Render to the next postprocessing pass (or to the canvas if final pass).\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {WebGLPostProcessingPass} [nextPass] Next pass, optional\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.apply = function (frameState, nextPass) {\n        var gl = this.getGL();\n        var size = frameState.size;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, nextPass ? nextPass.getFrameBuffer() : null);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n        // render the frame buffer to the canvas\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n        gl.useProgram(this.renderTargetProgram_);\n        gl.enableVertexAttribArray(this.renderTargetAttribLocation_);\n        gl.vertexAttribPointer(this.renderTargetAttribLocation_, 2, gl.FLOAT, false, 0, 0);\n        gl.uniform2f(this.renderTargetUniformLocation_, size[0], size[1]);\n        gl.uniform1i(this.renderTargetTextureLocation_, 0);\n        this.applyUniforms(frameState);\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    };\n    /**\n     * @returns {WebGLFramebuffer} Frame buffer\n     * @api\n     */\n    WebGLPostProcessingPass.prototype.getFrameBuffer = function () {\n        return this.frameBuffer_;\n    };\n    /**\n     * Sets the custom uniforms based on what was given in the constructor.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPostProcessingPass.prototype.applyUniforms = function (frameState) {\n        var gl = this.getGL();\n        var value;\n        var textureSlot = 1;\n        this.uniforms_.forEach(function (uniform) {\n            value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value;\n            // apply value based on type\n            if (value instanceof HTMLCanvasElement || value instanceof ImageData) {\n                // create a texture & put data\n                if (!uniform.texture) {\n                    uniform.texture = gl.createTexture();\n                }\n                gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n                gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                if (value instanceof ImageData) {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, value.width, value.height, 0, gl.UNSIGNED_BYTE, new Uint8Array(value.data));\n                }\n                else {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n                }\n                // fill texture slots\n                gl.uniform1i(uniform.location, textureSlot++);\n            }\n            else if (Array.isArray(value)) {\n                switch (value.length) {\n                    case 2:\n                        gl.uniform2f(uniform.location, value[0], value[1]);\n                        return;\n                    case 3:\n                        gl.uniform3f(uniform.location, value[0], value[1], value[2]);\n                        return;\n                    case 4:\n                        gl.uniform4f(uniform.location, value[0], value[1], value[2], value[3]);\n                        return;\n                    default: return;\n                }\n            }\n            else if (typeof value === 'number') {\n                gl.uniform1f(uniform.location, value);\n            }\n        });\n    };\n    return WebGLPostProcessingPass;\n}());\nexport default WebGLPostProcessingPass;\n//# sourceMappingURL=PostProcessingPass.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/webgl/Helper\n */\nimport { getUid } from '../util.js';\nimport Disposable from '../Disposable.js';\nimport { clear } from '../obj.js';\nimport ContextEventType from '../webgl/ContextEventType.js';\nimport { compose as composeTransform, create as createTransform, reset as resetTransform, rotate as rotateTransform, scale as scaleTransform } from '../transform.js';\nimport { create, fromTransform } from '../vec/mat4.js';\nimport WebGLPostProcessingPass from './PostProcessingPass.js';\nimport { FLOAT, getContext, getSupportedExtensions, UNSIGNED_BYTE, UNSIGNED_INT, UNSIGNED_SHORT } from '../webgl.js';\nimport { includes } from '../array.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {import(\"./Buffer.js\").default} buffer\n * @property {WebGLBuffer} webGlBuffer\n */\n/**\n * Shader types, either `FRAGMENT_SHADER` or `VERTEX_SHADER`.\n * @enum {number}\n */\nexport var ShaderType = {\n    FRAGMENT_SHADER: 0x8B30,\n    VERTEX_SHADER: 0x8B31\n};\n/**\n * Uniform names used in the default shaders: `PROJECTION_MATRIX`, `OFFSET_SCALE_MATRIX`.\n * and `OFFSET_ROTATION_MATRIX`.\n * @enum {string}\n */\nexport var DefaultUniform = {\n    PROJECTION_MATRIX: 'u_projectionMatrix',\n    OFFSET_SCALE_MATRIX: 'u_offsetScaleMatrix',\n    OFFSET_ROTATION_MATRIX: 'u_offsetRotateMatrix',\n    TIME: 'u_time',\n    ZOOM: 'u_zoom',\n    RESOLUTION: 'u_resolution'\n};\n/**\n * Attribute types, either `UNSIGNED_BYTE`, `UNSIGNED_SHORT`, `UNSIGNED_INT` or `FLOAT`\n * Note: an attribute stored in a `Float32Array` should be of type `FLOAT`.\n * @enum {number}\n */\nexport var AttributeType = {\n    UNSIGNED_BYTE: UNSIGNED_BYTE,\n    UNSIGNED_SHORT: UNSIGNED_SHORT,\n    UNSIGNED_INT: UNSIGNED_INT,\n    FLOAT: FLOAT\n};\n/**\n * Description of an attribute in a buffer\n * @typedef {Object} AttributeDescription\n * @property {string} name Attribute name to use in shaders\n * @property {number} size Number of components per attributes\n * @property {AttributeType} [type] Attribute type, i.e. number of bytes used to store the value. This is\n * determined by the class of typed array which the buffer uses (eg. `Float32Array` for a `FLOAT` attribute).\n * Default is `FLOAT`.\n */\n/**\n * @typedef {number|Array<number>|HTMLCanvasElement|HTMLImageElement|ImageData|import(\"../transform\").Transform} UniformLiteralValue\n */\n/**\n * Uniform value can be a number, array of numbers (2 to 4), canvas element or a callback returning\n * one of the previous types.\n * @typedef {UniformLiteralValue|function(import(\"../PluggableMap.js\").FrameState):UniformLiteralValue} UniformValue\n */\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas which will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} Options\n * @property {Object.<string,UniformValue>} [uniforms] Uniform definitions; property names must match the uniform\n * names in the provided or default shaders.\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {string} name Name\n * @property {UniformValue=} value Value\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n/**\n * @classdesc\n * This class is intended to provide low-level functions related to WebGL rendering, so that accessing\n * directly the WebGL API should not be required anymore.\n *\n * Several operations are handled by the `WebGLHelper` class:\n *\n * ### Define custom shaders and uniforms\n *\n *   *Shaders* are low-level programs executed on the GPU and written in GLSL. There are two types of shaders:\n *\n *   Vertex shaders are used to manipulate the position and attribute of *vertices* of rendered primitives (ie. corners of a square).\n *   Outputs are:\n *\n *   * `gl_Position`: position of the vertex in screen space\n *\n *   * Varyings usually prefixed with `v_` are passed on to the fragment shader\n *\n *   Fragment shaders are used to control the actual color of the pixels drawn on screen. Their only output is `gl_FragColor`.\n *\n *   Both shaders can take *uniforms* or *attributes* as input. Attributes are explained later. Uniforms are common, read-only values that\n *   can be changed at every frame and can be of type float, arrays of float or images.\n *\n *   Shaders must be compiled and assembled into a program like so:\n *   ```js\n *   // here we simply create two shaders and assemble them in a program which is then used\n *   // for subsequent rendering calls\n *   const vertexShader = new WebGLVertex(VERTEX_SHADER);\n *   const fragmentShader = new WebGLFragment(FRAGMENT_SHADER);\n *   const program = this.context.getProgram(fragmentShader, vertexShader);\n *   helper.useProgram(this.program);\n *   ```\n *\n *   Uniforms are defined using the `uniforms` option and can either be explicit values or callbacks taking the frame state as argument.\n *   You can also change their value along the way like so:\n *   ```js\n *   helper.setUniformFloatValue('u_value', valueAsNumber);\n *   ```\n *\n * ### Defining post processing passes\n *\n *   *Post processing* describes the act of rendering primitives to a texture, and then rendering this texture to the final canvas\n *   while applying special effects in screen space.\n *   Typical uses are: blurring, color manipulation, depth of field, filtering...\n *\n *   The `WebGLHelper` class offers the possibility to define post processes at creation time using the `postProcesses` option.\n *   A post process step accepts the following options:\n *\n *   * `fragmentShader` and `vertexShader`: text literals in GLSL language that will be compiled and used in the post processing step.\n *   * `uniforms`: uniforms can be defined for the post processing steps just like for the main render.\n *   * `scaleRatio`: allows using an intermediate texture smaller or higher than the final canvas in the post processing step.\n *     This is typically used in blur steps to reduce the performance overhead by using an already downsampled texture as input.\n *\n *   The {@link module:ol/webgl/PostProcessingPass~WebGLPostProcessingPass} class is used internally, refer to its documentation for more info.\n *\n * ### Binding WebGL buffers and flushing data into them\n *\n *   Data that must be passed to the GPU has to be transferred using {@link module:ol/webgl/Buffer~WebGLArrayBuffer} objects.\n *   A buffer has to be created only once, but must be bound every time the buffer content will be used for rendering.\n *   This is done using {@link bindBuffer}.\n *   When the buffer's array content has changed, the new data has to be flushed to the GPU memory; this is done using\n *   {@link flushBufferData}. Note: this operation is expensive and should be done as infrequently as possible.\n *\n *   When binding an array buffer, a `target` parameter must be given: it should be either {@link module:ol/webgl.ARRAY_BUFFER}\n *   (if the buffer contains vertices data) or {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER} (if the buffer contains indices data).\n *\n *   Examples below:\n *   ```js\n *   // at initialization phase\n *   const verticesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *   const indicesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *\n *   // when array values have changed\n *   helper.flushBufferData(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.flushBufferData(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *\n *   // at rendering phase\n *   helper.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *   ```\n *\n * ### Specifying attributes\n *\n *   The GPU only receives the data as arrays of numbers. These numbers must be handled differently depending on what it describes (position, texture coordinate...).\n *   Attributes are used to specify these uses. Use {@link enableAttributeArray_} and either\n *   the default attribute names in {@link module:ol/webgl/Helper.DefaultAttrib} or custom ones.\n *\n *   Please note that you will have to specify the type and offset of the attributes in the data array. You can refer to the documentation of [WebGLRenderingContext.vertexAttribPointer](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer) for more explanation.\n *   ```js\n *   // here we indicate that the data array has the following structure:\n *   // [posX, posY, offsetX, offsetY, texCoordU, texCoordV, posX, posY, ...]\n *   helper.enableAttributes([\n *     {\n *        name: 'a_position',\n *        size: 2\n *     },\n *     {\n *       name: 'a_offset',\n *       size: 2\n *     },\n *     {\n *       name: 'a_texCoord',\n *       size: 2\n *     }\n *   ])\n *   ```\n *\n * ### Rendering primitives\n *\n *   Once all the steps above have been achieved, rendering primitives to the screen is done using {@link prepareDraw}, {@link drawElements} and {@link finalizeDraw}.\n *   ```js\n *   // frame preparation step\n *   helper.prepareDraw(frameState);\n *\n *   // call this for every data array that has to be rendered on screen\n *   helper.drawElements(0, this.indicesBuffer.getArray().length);\n *\n *   // finalize the rendering by applying post processes\n *   helper.finalizeDraw(frameState);\n *   ```\n *\n * For an example usage of this class, refer to {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n *\n * @api\n */\nvar WebGLHelper = /** @class */ (function (_super) {\n    __extends(WebGLHelper, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function WebGLHelper(opt_options) {\n        var _this = _super.call(this) || this;\n        var options = opt_options || {};\n        /** @private */\n        _this.boundHandleWebGLContextLost_ = _this.handleWebGLContextLost.bind(_this);\n        /** @private */\n        _this.boundHandleWebGLContextRestored_ = _this.handleWebGLContextRestored.bind(_this);\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = document.createElement('canvas');\n        _this.canvas_.style.position = 'absolute';\n        _this.canvas_.style.left = '0';\n        /**\n         * @private\n         * @type {WebGLRenderingContext}\n         */\n        _this.gl_ = getContext(_this.canvas_);\n        var gl = _this.getGL();\n        /**\n         * @private\n         * @type {!Object<string, BufferCacheEntry>}\n         */\n        _this.bufferCache_ = {};\n        /**\n         * @private\n         * @type {WebGLProgram}\n         */\n        _this.currentProgram_ = null;\n        assert(includes(getSupportedExtensions(), 'OES_element_index_uint'), 63);\n        gl.getExtension('OES_element_index_uint');\n        _this.canvas_.addEventListener(ContextEventType.LOST, _this.boundHandleWebGLContextLost_);\n        _this.canvas_.addEventListener(ContextEventType.RESTORED, _this.boundHandleWebGLContextRestored_);\n        /**\n         * @private\n         * @type {import(\"../transform.js\").Transform}\n         */\n        _this.offsetRotateMatrix_ = createTransform();\n        /**\n         * @private\n         * @type {import(\"../transform.js\").Transform}\n         */\n        _this.offsetScaleMatrix_ = createTransform();\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.tmpMat4_ = create();\n        /**\n         * @private\n         * @type {Object.<string, WebGLUniformLocation>}\n         */\n        _this.uniformLocations_ = {};\n        /**\n         * @private\n         * @type {Object.<string, number>}\n         */\n        _this.attribLocations_ = {};\n        /**\n         * Holds info about custom uniforms used in the post processing pass.\n         * If the uniform is a texture, the WebGL Texture object will be stored here.\n         * @type {Array<UniformInternalDescription>}\n         * @private\n         */\n        _this.uniforms_ = [];\n        if (options.uniforms) {\n            for (var name_1 in options.uniforms) {\n                _this.uniforms_.push({\n                    name: name_1,\n                    value: options.uniforms[name_1]\n                });\n            }\n        }\n        /**\n         * An array of PostProcessingPass objects is kept in this variable, built from the steps provided in the\n         * options. If no post process was given, a default one is used (so as not to have to make an exception to\n         * the frame buffer logic).\n         * @type {Array<WebGLPostProcessingPass>}\n         * @private\n         */\n        _this.postProcessPasses_ = options.postProcesses ? options.postProcesses.map(function (options) {\n            return new WebGLPostProcessingPass({\n                webGlContext: gl,\n                scaleRatio: options.scaleRatio,\n                vertexShader: options.vertexShader,\n                fragmentShader: options.fragmentShader,\n                uniforms: options.uniforms\n            });\n        }) : [new WebGLPostProcessingPass({ webGlContext: gl })];\n        /**\n         * @type {string|null}\n         * @private\n         */\n        _this.shaderCompileErrors_ = null;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.startTime_ = Date.now();\n        return _this;\n    }\n    /**\n     * Just bind the buffer if it's in the cache. Otherwise create\n     * the WebGL buffer, bind it, populate it, and add an entry to\n     * the cache.\n     * @param {import(\"./Buffer\").default} buffer Buffer.\n     * @api\n     */\n    WebGLHelper.prototype.bindBuffer = function (buffer) {\n        var gl = this.getGL();\n        var bufferKey = getUid(buffer);\n        var bufferCache = this.bufferCache_[bufferKey];\n        if (!bufferCache) {\n            var webGlBuffer = gl.createBuffer();\n            bufferCache = {\n                buffer: buffer,\n                webGlBuffer: webGlBuffer\n            };\n            this.bufferCache_[bufferKey] = bufferCache;\n        }\n        gl.bindBuffer(buffer.getType(), bufferCache.webGlBuffer);\n    };\n    /**\n     * Update the data contained in the buffer array; this is required for the\n     * new data to be rendered\n     * @param {import(\"./Buffer\").default} buffer Buffer.\n     * @api\n     */\n    WebGLHelper.prototype.flushBufferData = function (buffer) {\n        var gl = this.getGL();\n        this.bindBuffer(buffer);\n        gl.bufferData(buffer.getType(), buffer.getArray(), buffer.getUsage());\n    };\n    /**\n     * @param {import(\"./Buffer.js\").default} buf Buffer.\n     */\n    WebGLHelper.prototype.deleteBuffer = function (buf) {\n        var gl = this.getGL();\n        var bufferKey = getUid(buf);\n        var bufferCacheEntry = this.bufferCache_[bufferKey];\n        if (!gl.isContextLost()) {\n            gl.deleteBuffer(bufferCacheEntry.buffer);\n        }\n        delete this.bufferCache_[bufferKey];\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLHelper.prototype.disposeInternal = function () {\n        this.canvas_.removeEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n        this.canvas_.removeEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n    };\n    /**\n     * Clear the buffer & set the viewport to draw.\n     * Post process passes will be initialized here, the first one being bound as a render target for\n     * subsequent draw calls.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLHelper.prototype.prepareDraw = function (frameState) {\n        var gl = this.getGL();\n        var canvas = this.getCanvas();\n        var size = frameState.size;\n        var pixelRatio = frameState.pixelRatio;\n        canvas.width = size[0] * pixelRatio;\n        canvas.height = size[1] * pixelRatio;\n        canvas.style.width = size[0] + 'px';\n        canvas.style.height = size[1] + 'px';\n        gl.useProgram(this.currentProgram_);\n        // loop backwards in post processes list\n        for (var i = this.postProcessPasses_.length - 1; i >= 0; i--) {\n            this.postProcessPasses_[i].init(frameState);\n        }\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.useProgram(this.currentProgram_);\n        this.applyFrameState(frameState);\n        this.applyUniforms(frameState);\n    };\n    /**\n     * Clear the render target & bind it for future draw operations.\n     * This is similar to `prepareDraw`, only post processes will not be applied.\n     * Note: the whole viewport will be drawn to the render target, regardless of its size.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @param {import(\"./RenderTarget.js\").default} renderTarget Render target to draw to\n     * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n     */\n    WebGLHelper.prototype.prepareDrawToRenderTarget = function (frameState, renderTarget, opt_disableAlphaBlend) {\n        var gl = this.getGL();\n        var size = renderTarget.getSize();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget.getFramebuffer());\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.bindTexture(gl.TEXTURE_2D, renderTarget.getTexture());\n        gl.clearColor(0.0, 0.0, 0.0, 0.0);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n        gl.useProgram(this.currentProgram_);\n        this.applyFrameState(frameState);\n        this.applyUniforms(frameState);\n    };\n    /**\n     * Execute a draw call based on the currently bound program, texture, buffers, attributes.\n     * @param {number} start Start index.\n     * @param {number} end End index.\n     * @api\n     */\n    WebGLHelper.prototype.drawElements = function (start, end) {\n        var gl = this.getGL();\n        var elementType = gl.UNSIGNED_INT;\n        var elementSize = 4;\n        var numItems = end - start;\n        var offsetInBytes = start * elementSize;\n        gl.drawElements(gl.TRIANGLES, numItems, elementType, offsetInBytes);\n    };\n    /**\n     * Apply the successive post process passes which will eventually render to the actual canvas.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n     * @api\n     */\n    WebGLHelper.prototype.finalizeDraw = function (frameState) {\n        // apply post processes using the next one as target\n        for (var i = 0; i < this.postProcessPasses_.length; i++) {\n            this.postProcessPasses_[i].apply(frameState, this.postProcessPasses_[i + 1] || null);\n        }\n    };\n    /**\n     * @return {HTMLCanvasElement} Canvas.\n     * @api\n     */\n    WebGLHelper.prototype.getCanvas = function () {\n        return this.canvas_;\n    };\n    /**\n     * Get the WebGL rendering context\n     * @return {WebGLRenderingContext} The rendering context.\n     * @api\n     */\n    WebGLHelper.prototype.getGL = function () {\n        return this.gl_;\n    };\n    /**\n     * Sets the default matrix uniforms for a given frame state. This is called internally in `prepareDraw`.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLHelper.prototype.applyFrameState = function (frameState) {\n        var size = frameState.size;\n        var rotation = frameState.viewState.rotation;\n        var offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n        scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n        var offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n        if (rotation !== 0) {\n            rotateTransform(offsetRotateMatrix, -rotation);\n        }\n        this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX, fromTransform(this.tmpMat4_, offsetScaleMatrix));\n        this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX, fromTransform(this.tmpMat4_, offsetRotateMatrix));\n        this.setUniformFloatValue(DefaultUniform.TIME, (Date.now() - this.startTime_) * 0.001);\n        this.setUniformFloatValue(DefaultUniform.ZOOM, frameState.viewState.zoom);\n        this.setUniformFloatValue(DefaultUniform.RESOLUTION, frameState.viewState.resolution);\n    };\n    /**\n     * Sets the custom uniforms based on what was given in the constructor. This is called internally in `prepareDraw`.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLHelper.prototype.applyUniforms = function (frameState) {\n        var gl = this.getGL();\n        var value;\n        var textureSlot = 0;\n        this.uniforms_.forEach(function (uniform) {\n            value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value;\n            // apply value based on type\n            if (value instanceof HTMLCanvasElement || value instanceof HTMLImageElement || value instanceof ImageData) {\n                // create a texture & put data\n                if (!uniform.texture) {\n                    uniform.texture = gl.createTexture();\n                }\n                gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n                gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                var imageReady = !(value instanceof HTMLImageElement) || /** @type {HTMLImageElement} */ (value).complete;\n                if (imageReady) {\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n                }\n                // fill texture slots by increasing index\n                gl.uniform1i(this.getUniformLocation(uniform.name), textureSlot++);\n            }\n            else if (Array.isArray(value) && value.length === 6) {\n                this.setUniformMatrixValue(uniform.name, fromTransform(this.tmpMat4_, value));\n            }\n            else if (Array.isArray(value) && value.length <= 4) {\n                switch (value.length) {\n                    case 2:\n                        gl.uniform2f(this.getUniformLocation(uniform.name), value[0], value[1]);\n                        return;\n                    case 3:\n                        gl.uniform3f(this.getUniformLocation(uniform.name), value[0], value[1], value[2]);\n                        return;\n                    case 4:\n                        gl.uniform4f(this.getUniformLocation(uniform.name), value[0], value[1], value[2], value[3]);\n                        return;\n                    default:\n                        return;\n                }\n            }\n            else if (typeof value === 'number') {\n                gl.uniform1f(this.getUniformLocation(uniform.name), value);\n            }\n        }.bind(this));\n    };\n    /**\n     * Use a program.  If the program is already in use, this will return `false`.\n     * @param {WebGLProgram} program Program.\n     * @return {boolean} Changed.\n     * @api\n     */\n    WebGLHelper.prototype.useProgram = function (program) {\n        if (program == this.currentProgram_) {\n            return false;\n        }\n        else {\n            var gl = this.getGL();\n            gl.useProgram(program);\n            this.currentProgram_ = program;\n            this.uniformLocations_ = {};\n            this.attribLocations_ = {};\n            return true;\n        }\n    };\n    /**\n     * Will attempt to compile a vertex or fragment shader based on source\n     * On error, the shader will be returned but\n     * `gl.getShaderParameter(shader, gl.COMPILE_STATUS)` will return `true`\n     * Use `gl.getShaderInfoLog(shader)` to have details\n     * @param {string} source Shader source\n     * @param {ShaderType} type VERTEX_SHADER or FRAGMENT_SHADER\n     * @return {WebGLShader} Shader object\n     */\n    WebGLHelper.prototype.compileShader = function (source, type) {\n        var gl = this.getGL();\n        var shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        return shader;\n    };\n    /**\n     * Create a program for a vertex and fragment shader. The shaders compilation may have failed:\n     * use `WebGLHelper.getShaderCompileErrors()`to have details if any.\n     * @param {string} fragmentShaderSource Fragment shader source.\n     * @param {string} vertexShaderSource Vertex shader source.\n     * @return {WebGLProgram} Program\n     * @api\n     */\n    WebGLHelper.prototype.getProgram = function (fragmentShaderSource, vertexShaderSource) {\n        var gl = this.getGL();\n        var fragmentShader = this.compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\n        var vertexShader = this.compileShader(vertexShaderSource, gl.VERTEX_SHADER);\n        this.shaderCompileErrors_ = null;\n        if (gl.getShaderInfoLog(fragmentShader)) {\n            this.shaderCompileErrors_ =\n                \"Fragment shader compilation failed:\\n\" + gl.getShaderInfoLog(fragmentShader);\n        }\n        if (gl.getShaderInfoLog(vertexShader)) {\n            this.shaderCompileErrors_ = (this.shaderCompileErrors_ || '') +\n                (\"Vertex shader compilation failed:\\n\" + gl.getShaderInfoLog(vertexShader));\n        }\n        var program = gl.createProgram();\n        gl.attachShader(program, fragmentShader);\n        gl.attachShader(program, vertexShader);\n        gl.linkProgram(program);\n        return program;\n    };\n    /**\n     * Will return the last shader compilation errors. If no error happened, will return null;\n     * @return {string|null} Errors description, or null if last compilation was successful\n     * @api\n     */\n    WebGLHelper.prototype.getShaderCompileErrors = function () {\n        return this.shaderCompileErrors_;\n    };\n    /**\n     * Will get the location from the shader or the cache\n     * @param {string} name Uniform name\n     * @return {WebGLUniformLocation} uniformLocation\n     * @api\n     */\n    WebGLHelper.prototype.getUniformLocation = function (name) {\n        if (this.uniformLocations_[name] === undefined) {\n            this.uniformLocations_[name] = this.getGL().getUniformLocation(this.currentProgram_, name);\n        }\n        return this.uniformLocations_[name];\n    };\n    /**\n     * Will get the location from the shader or the cache\n     * @param {string} name Attribute name\n     * @return {number} attribLocation\n     * @api\n     */\n    WebGLHelper.prototype.getAttributeLocation = function (name) {\n        if (this.attribLocations_[name] === undefined) {\n            this.attribLocations_[name] = this.getGL().getAttribLocation(this.currentProgram_, name);\n        }\n        return this.attribLocations_[name];\n    };\n    /**\n     * Modifies the given transform to apply the rotation/translation/scaling of the given frame state.\n     * The resulting transform can be used to convert world space coordinates to view coordinates.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {import(\"../transform\").Transform} transform Transform to update.\n     * @return {import(\"../transform\").Transform} The updated transform object.\n     * @api\n     */\n    WebGLHelper.prototype.makeProjectionTransform = function (frameState, transform) {\n        var size = frameState.size;\n        var rotation = frameState.viewState.rotation;\n        var resolution = frameState.viewState.resolution;\n        var center = frameState.viewState.center;\n        resetTransform(transform);\n        composeTransform(transform, 0, 0, 2 / (resolution * size[0]), 2 / (resolution * size[1]), -rotation, -center[0], -center[1]);\n        return transform;\n    };\n    /**\n     * Give a value for a standard float uniform\n     * @param {string} uniform Uniform name\n     * @param {number} value Value\n     * @api\n     */\n    WebGLHelper.prototype.setUniformFloatValue = function (uniform, value) {\n        this.getGL().uniform1f(this.getUniformLocation(uniform), value);\n    };\n    /**\n     * Give a value for a standard matrix4 uniform\n     * @param {string} uniform Uniform name\n     * @param {Array<number>} value Matrix value\n     * @api\n     */\n    WebGLHelper.prototype.setUniformMatrixValue = function (uniform, value) {\n        this.getGL().uniformMatrix4fv(this.getUniformLocation(uniform), false, value);\n    };\n    /**\n     * Will set the currently bound buffer to an attribute of the shader program. Used by `#enableAttributes`\n     * internally.\n     * @param {string} attribName Attribute name\n     * @param {number} size Number of components per attributes\n     * @param {number} type UNSIGNED_INT, UNSIGNED_BYTE, UNSIGNED_SHORT or FLOAT\n     * @param {number} stride Stride in bytes (0 means attribs are packed)\n     * @param {number} offset Offset in bytes\n     * @private\n     */\n    WebGLHelper.prototype.enableAttributeArray_ = function (attribName, size, type, stride, offset) {\n        var location = this.getAttributeLocation(attribName);\n        // the attribute has not been found in the shaders; do not enable it\n        if (location < 0) {\n            return;\n        }\n        this.getGL().enableVertexAttribArray(location);\n        this.getGL().vertexAttribPointer(location, size, type, false, stride, offset);\n    };\n    /**\n     * Will enable the following attributes to be read from the currently bound buffer,\n     * i.e. tell the GPU where to read the different attributes in the buffer. An error in the\n     * size/type/order of attributes will most likely break the rendering and throw a WebGL exception.\n     * @param {Array<AttributeDescription>} attributes Ordered list of attributes to read from the buffer\n     * @api\n     */\n    WebGLHelper.prototype.enableAttributes = function (attributes) {\n        var stride = computeAttributesStride(attributes);\n        var offset = 0;\n        for (var i = 0; i < attributes.length; i++) {\n            var attr = attributes[i];\n            this.enableAttributeArray_(attr.name, attr.size, attr.type || FLOAT, stride, offset);\n            offset += attr.size * getByteSizeFromType(attr.type);\n        }\n    };\n    /**\n     * WebGL context was lost\n     * @private\n     */\n    WebGLHelper.prototype.handleWebGLContextLost = function () {\n        clear(this.bufferCache_);\n        this.currentProgram_ = null;\n    };\n    /**\n     * WebGL context was restored\n     * @private\n     */\n    WebGLHelper.prototype.handleWebGLContextRestored = function () {\n    };\n    /**\n     * Will create or reuse a given webgl texture and apply the given size. If no image data\n     * specified, the texture will be empty, otherwise image data will be used and the `size`\n     * parameter will be ignored.\n     * Note: wrap parameters are set to clamp to edge, min filter is set to linear.\n     * @param {Array<number>} size Expected size of the texture\n     * @param {ImageData|HTMLImageElement|HTMLCanvasElement} [opt_data] Image data/object to bind to the texture\n     * @param {WebGLTexture} [opt_texture] Existing texture to reuse\n     * @return {WebGLTexture} The generated texture\n     * @api\n     */\n    WebGLHelper.prototype.createTexture = function (size, opt_data, opt_texture) {\n        var gl = this.getGL();\n        var texture = opt_texture || gl.createTexture();\n        // set params & size\n        var level = 0;\n        var internalFormat = gl.RGBA;\n        var border = 0;\n        var format = gl.RGBA;\n        var type = gl.UNSIGNED_BYTE;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        if (opt_data) {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, format, type, opt_data);\n        }\n        else {\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, size[0], size[1], border, format, type, null);\n        }\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        return texture;\n    };\n    return WebGLHelper;\n}(Disposable));\n/**\n * Compute a stride in bytes based on a list of attributes\n * @param {Array<AttributeDescription>} attributes Ordered list of attributes\n * @returns {number} Stride, ie amount of values for each vertex in the vertex buffer\n * @api\n */\nexport function computeAttributesStride(attributes) {\n    var stride = 0;\n    for (var i = 0; i < attributes.length; i++) {\n        var attr = attributes[i];\n        stride += attr.size * getByteSizeFromType(attr.type);\n    }\n    return stride;\n}\n/**\n * Computes the size in byte of an attribute type.\n * @param {AttributeType} type Attribute type\n * @returns {number} The size in bytes\n */\nfunction getByteSizeFromType(type) {\n    switch (type) {\n        case AttributeType.UNSIGNED_BYTE: return Uint8Array.BYTES_PER_ELEMENT;\n        case AttributeType.UNSIGNED_SHORT: return Uint16Array.BYTES_PER_ELEMENT;\n        case AttributeType.UNSIGNED_INT: return Uint32Array.BYTES_PER_ELEMENT;\n        case AttributeType.FLOAT:\n        default: return Float32Array.BYTES_PER_ELEMENT;\n    }\n}\nexport default WebGLHelper;\n//# sourceMappingURL=Helper.js.map","/**\n * @module ol/geom/GeometryType\n */\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n    POINT: 'Point',\n    LINE_STRING: 'LineString',\n    LINEAR_RING: 'LinearRing',\n    POLYGON: 'Polygon',\n    MULTI_POINT: 'MultiPoint',\n    MULTI_LINE_STRING: 'MultiLineString',\n    MULTI_POLYGON: 'MultiPolygon',\n    GEOMETRY_COLLECTION: 'GeometryCollection',\n    CIRCLE: 'Circle'\n};\n//# sourceMappingURL=GeometryType.js.map","/**\n * @module ol/ImageState\n */\n/**\n * @enum {number}\n */\nexport default {\n    IDLE: 0,\n    LOADING: 1,\n    LOADED: 2,\n    ERROR: 3,\n    EMPTY: 4\n};\n//# sourceMappingURL=ImageState.js.map","/**\n * @module ol/events\n */\nimport { clear } from './obj.js';\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener\n * @property {import(\"./events/Target.js\").EventTargetLike} target\n * @property {string} type\n * @api\n */\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n    if (opt_this && opt_this !== target) {\n        listener = listener.bind(opt_this);\n    }\n    if (opt_once) {\n        var originalListener_1 = listener;\n        listener = function () {\n            target.removeEventListener(type, listener);\n            originalListener_1.apply(this, arguments);\n        };\n    }\n    var eventsKey = {\n        target: target,\n        type: type,\n        listener: listener\n    };\n    target.addEventListener(type, listener);\n    return eventsKey;\n}\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n    return listen(target, type, listener, opt_this, true);\n}\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n    if (key && key.target) {\n        key.target.removeEventListener(key.type, key.listener);\n        clear(key);\n    }\n}\n//# sourceMappingURL=events.js.map","/**\n * @module ol/functions\n */\nimport { equals as arrayEquals } from './array.js';\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n    return true;\n}\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n    return false;\n}\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() { }\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n    var called = false;\n    /** @type {ReturnType} */\n    var lastResult;\n    /** @type {Array<any>} */\n    var lastArgs;\n    var lastThis;\n    return function () {\n        var nextArgs = Array.prototype.slice.call(arguments);\n        if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n            called = true;\n            lastThis = this;\n            lastArgs = nextArgs;\n            lastResult = fn.apply(this, arguments);\n        }\n        return lastResult;\n    };\n}\n//# sourceMappingURL=functions.js.map","/**\n * @module ol/events/Event\n */\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nvar BaseEvent = /** @class */ (function () {\n    /**\n     * @param {string} type Type.\n     */\n    function BaseEvent(type) {\n        /**\n         * @type {boolean}\n         */\n        this.propagationStopped;\n        /**\n         * The event type.\n         * @type {string}\n         * @api\n         */\n        this.type = type;\n        /**\n         * The event target.\n         * @type {Object}\n         * @api\n         */\n        this.target = null;\n    }\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.preventDefault = function () {\n        this.propagationStopped = true;\n    };\n    /**\n     * Stop event propagation.\n     * @api\n     */\n    BaseEvent.prototype.stopPropagation = function () {\n        this.propagationStopped = true;\n    };\n    return BaseEvent;\n}());\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n    evt.stopPropagation();\n}\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n    evt.preventDefault();\n}\nexport default BaseEvent;\n//# sourceMappingURL=Event.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport { VOID } from '../functions.js';\nimport Event from './Event.js';\nimport { clear } from '../obj.js';\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nvar Target = /** @class */ (function (_super) {\n    __extends(Target, _super);\n    /**\n     * @param {*=} opt_target Default event target for dispatched events.\n     */\n    function Target(opt_target) {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {*}\n         */\n        _this.eventTarget_ = opt_target;\n        /**\n         * @private\n         * @type {!Object<string, number>}\n         */\n        _this.pendingRemovals_ = {};\n        /**\n         * @private\n         * @type {!Object<string, number>}\n         */\n        _this.dispatching_ = {};\n        /**\n         * @private\n         * @type {!Object<string, Array<import(\"../events.js\").ListenerFunction>>}\n         */\n        _this.listeners_ = {};\n        return _this;\n    }\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n     */\n    Target.prototype.addEventListener = function (type, listener) {\n        if (!type || !listener) {\n            return;\n        }\n        var listeners = this.listeners_[type];\n        if (!listeners) {\n            listeners = [];\n            this.listeners_[type] = listeners;\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    /**\n     * Dispatches an event and calls all listeners listening for events\n     * of this type. The event parameter can either be a string or an\n     * Object with a `type` property.\n     *\n     * @param {{type: string,\n     *     target: (EventTargetLike|undefined),\n     *     propagationStopped: (boolean|undefined)}|\n     *     import(\"./Event.js\").default|string} event Event object.\n     * @return {boolean|undefined} `false` if anyone called preventDefault on the\n     *     event object or if any of the listeners returned false.\n     * @api\n     */\n    Target.prototype.dispatchEvent = function (event) {\n        var evt = typeof event === 'string' ? new Event(event) : event;\n        var type = evt.type;\n        if (!evt.target) {\n            evt.target = this.eventTarget_ || this;\n        }\n        var listeners = this.listeners_[type];\n        var propagate;\n        if (listeners) {\n            if (!(type in this.dispatching_)) {\n                this.dispatching_[type] = 0;\n                this.pendingRemovals_[type] = 0;\n            }\n            ++this.dispatching_[type];\n            for (var i = 0, ii = listeners.length; i < ii; ++i) {\n                if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n                    propagate = false;\n                    break;\n                }\n            }\n            --this.dispatching_[type];\n            if (this.dispatching_[type] === 0) {\n                var pendingRemovals = this.pendingRemovals_[type];\n                delete this.pendingRemovals_[type];\n                while (pendingRemovals--) {\n                    this.removeEventListener(type, VOID);\n                }\n                delete this.dispatching_[type];\n            }\n            return propagate;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    Target.prototype.disposeInternal = function () {\n        clear(this.listeners_);\n    };\n    /**\n     * Get the listeners for a specified event type. Listeners are returned in the\n     * order that they will be called in.\n     *\n     * @param {string} type Type.\n     * @return {Array<import(\"../events.js\").ListenerFunction>} Listeners.\n     */\n    Target.prototype.getListeners = function (type) {\n        return this.listeners_[type];\n    };\n    /**\n     * @param {string=} opt_type Type. If not provided,\n     *     `true` will be returned if this event target has any listeners.\n     * @return {boolean} Has listeners.\n     */\n    Target.prototype.hasListener = function (opt_type) {\n        return opt_type ?\n            opt_type in this.listeners_ :\n            Object.keys(this.listeners_).length > 0;\n    };\n    /**\n     * @param {string} type Type.\n     * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n     */\n    Target.prototype.removeEventListener = function (type, listener) {\n        var listeners = this.listeners_[type];\n        if (listeners) {\n            var index = listeners.indexOf(listener);\n            if (index !== -1) {\n                if (type in this.pendingRemovals_) {\n                    // make listener a no-op, and remove later in #dispatchEvent()\n                    listeners[index] = VOID;\n                    ++this.pendingRemovals_[type];\n                }\n                else {\n                    listeners.splice(index, 1);\n                    if (listeners.length === 0) {\n                        delete this.listeners_[type];\n                    }\n                }\n            }\n        }\n    };\n    return Target;\n}(Disposable));\nexport default Target;\n//# sourceMappingURL=Target.js.map","/**\n * @module ol/events/EventType\n */\n/**\n * @enum {string}\n * @const\n */\nexport default {\n    /**\n     * Generic change event. Triggered when the revision counter is increased.\n     * @event module:ol/events/Event~BaseEvent#change\n     * @api\n     */\n    CHANGE: 'change',\n    /**\n     * Generic error event. Triggered when an error occurs.\n     * @event module:ol/events/Event~BaseEvent#error\n     * @api\n     */\n    ERROR: 'error',\n    BLUR: 'blur',\n    CLEAR: 'clear',\n    CONTEXTMENU: 'contextmenu',\n    CLICK: 'click',\n    DBLCLICK: 'dblclick',\n    DRAGENTER: 'dragenter',\n    DRAGOVER: 'dragover',\n    DROP: 'drop',\n    FOCUS: 'focus',\n    KEYDOWN: 'keydown',\n    KEYPRESS: 'keypress',\n    LOAD: 'load',\n    RESIZE: 'resize',\n    TOUCHMOVE: 'touchmove',\n    WHEEL: 'wheel'\n};\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Observable\n */\nimport { listen, unlistenByKey, listenOnce } from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nvar Observable = /** @class */ (function (_super) {\n    __extends(Observable, _super);\n    function Observable() {\n        var _this = _super.call(this) || this;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.revision_ = 0;\n        return _this;\n    }\n    /**\n     * Increases the revision counter and dispatches a 'change' event.\n     * @api\n     */\n    Observable.prototype.changed = function () {\n        ++this.revision_;\n        this.dispatchEvent(EventType.CHANGE);\n    };\n    /**\n     * Get the version number for this object.  Each time the object is modified,\n     * its version number will be incremented.\n     * @return {number} Revision.\n     * @api\n     */\n    Observable.prototype.getRevision = function () {\n        return this.revision_;\n    };\n    /**\n     * Listen for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n     *     called with an array of event types as the first argument, the return\n     *     will be an array of keys.\n     * @api\n     */\n    Observable.prototype.on = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listen(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listen(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * Listen once for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n     *     called with an array of event types as the first argument, the return\n     *     will be an array of keys.\n     * @api\n     */\n    Observable.prototype.once = function (type, listener) {\n        if (Array.isArray(type)) {\n            var len = type.length;\n            var keys = new Array(len);\n            for (var i = 0; i < len; ++i) {\n                keys[i] = listenOnce(this, type[i], listener);\n            }\n            return keys;\n        }\n        else {\n            return listenOnce(this, /** @type {string} */ (type), listener);\n        }\n    };\n    /**\n     * Unlisten for a certain type of event.\n     * @param {string|Array<string>} type The event type or array of event types.\n     * @param {function(?): ?} listener The listener function.\n     * @api\n     */\n    Observable.prototype.un = function (type, listener) {\n        if (Array.isArray(type)) {\n            for (var i = 0, ii = type.length; i < ii; ++i) {\n                this.removeEventListener(type[i], listener);\n            }\n        }\n        else {\n            this.removeEventListener(type, listener);\n        }\n    };\n    return Observable;\n}(EventTarget));\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n    if (Array.isArray(key)) {\n        for (var i = 0, ii = key.length; i < ii; ++i) {\n            unlistenByKey(key[i]);\n        }\n    }\n    else {\n        unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n    }\n}\nexport default Observable;\n//# sourceMappingURL=Observable.js.map","/**\n * @module ol/source/State\n */\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n    UNDEFINED: 'undefined',\n    LOADING: 'loading',\n    READY: 'ready',\n    ERROR: 'error'\n};\n//# sourceMappingURL=State.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/Layer\n */\nimport { abstract } from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport EventType from '../events/EventType.js';\nimport SourceState from '../source/State.js';\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nvar LayerRenderer = /** @class */ (function (_super) {\n    __extends(LayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     */\n    function LayerRenderer(layer) {\n        var _this = _super.call(this) || this;\n        /** @private */\n        _this.boundHandleImageChange_ = _this.handleImageChange_.bind(_this);\n        /**\n         * @private\n         * @type {LayerType}\n         */\n        _this.layer_ = layer;\n        return _this;\n    }\n    /**\n     * Asynchronous layer level hit detection.\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    LayerRenderer.prototype.getFeatures = function (pixel) {\n        return abstract();\n    };\n    /**\n     * Determine whether render should be called.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @return {boolean} Layer is ready to be rendered.\n     */\n    LayerRenderer.prototype.prepareFrame = function (frameState) {\n        return abstract();\n    };\n    /**\n     * Render the layer.\n     * @abstract\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target that may be used to render content to.\n     * @return {HTMLElement} The rendered element.\n     */\n    LayerRenderer.prototype.renderFrame = function (frameState, target) {\n        return abstract();\n    };\n    /**\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @param {number} zoom Zoom level.\n     * @param {import(\"../Tile.js\").default} tile Tile.\n     */\n    LayerRenderer.prototype.loadedTileCallback = function (tiles, zoom, tile) {\n        if (!tiles[zoom]) {\n            tiles[zoom] = {};\n        }\n        tiles[zoom][tile.tileCoord.toString()] = tile;\n    };\n    /**\n     * Create a function that adds loaded tiles to the tile lookup.\n     * @param {import(\"../source/Tile.js\").default} source Tile source.\n     * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n     * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n     * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n     *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n     * @protected\n     */\n    LayerRenderer.prototype.createLoadedTileFinder = function (source, projection, tiles) {\n        return (\n        /**\n         * @param {number} zoom Zoom level.\n         * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n         * @return {boolean} The tile range is fully loaded.\n         * @this {LayerRenderer}\n         */\n        function (zoom, tileRange) {\n            var callback = this.loadedTileCallback.bind(this, tiles, zoom);\n            return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n        }).bind(this);\n    };\n    /**\n     * @abstract\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @param {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default): T} callback Feature callback.\n     * @param {Array<import(\"../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n     * @return {T|void} Callback result.\n     * @template T\n     */\n    LayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) { };\n    /**\n     * @abstract\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n     *    location, null will be returned.  If there is data, but pixel values cannot be\n     *    returned, and empty array will be returned.\n     */\n    LayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n        return abstract();\n    };\n    /**\n     * @return {LayerType} Layer.\n     */\n    LayerRenderer.prototype.getLayer = function () {\n        return this.layer_;\n    };\n    /**\n     * Perform action necessary to get the layer rendered after new fonts have loaded\n     * @abstract\n     */\n    LayerRenderer.prototype.handleFontsChanged = function () { };\n    /**\n     * Handle changes in image state.\n     * @param {import(\"../events/Event.js\").default} event Image change event.\n     * @private\n     */\n    LayerRenderer.prototype.handleImageChange_ = function (event) {\n        var image = /** @type {import(\"../Image.js\").default} */ (event.target);\n        if (image.getState() === ImageState.LOADED) {\n            this.renderIfReadyAndVisible();\n        }\n    };\n    /**\n     * Load the image if not already loaded, and register the image change\n     * listener if needed.\n     * @param {import(\"../ImageBase.js\").default} image Image.\n     * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n     * @protected\n     */\n    LayerRenderer.prototype.loadImage = function (image) {\n        var imageState = image.getState();\n        if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n            image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n        }\n        if (imageState == ImageState.IDLE) {\n            image.load();\n            imageState = image.getState();\n        }\n        return imageState == ImageState.LOADED;\n    };\n    /**\n     * @protected\n     */\n    LayerRenderer.prototype.renderIfReadyAndVisible = function () {\n        var layer = this.getLayer();\n        if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n            layer.changed();\n        }\n    };\n    return LayerRenderer;\n}(Observable));\nexport default LayerRenderer;\n//# sourceMappingURL=Layer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/Layer\n */\nimport LayerRenderer from '../Layer.js';\nimport WebGLHelper from '../../webgl/Helper.js';\n/**\n * @enum {string}\n */\nexport var WebGLWorkerMessageType = {\n    GENERATE_BUFFERS: 'GENERATE_BUFFERS'\n};\n/**\n * @typedef {Object} WebGLWorkerGenerateBuffersMessage\n * This message will trigger the generation of a vertex and an index buffer based on the given render instructions.\n * When the buffers are generated, the worked will send a message of the same type to the main thread, with\n * the generated buffers in it.\n * Note that any addition properties present in the message *will* be sent back to the main thread.\n * @property {WebGLWorkerMessageType} type Message type\n * @property {ArrayBuffer} renderInstructions Render instructions raw binary buffer.\n * @property {ArrayBuffer} [vertexBuffer] Vertices array raw binary buffer (sent by the worker).\n * @property {ArrayBuffer} [indexBuffer] Indices array raw binary buffer (sent by the worker).\n * @property {number} [customAttributesCount] Amount of custom attributes count in the render instructions.\n */\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n/**\n * @typedef {Object} Options\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * Base WebGL renderer class.\n * Holds all logic related to data manipulation & some common rendering logic\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n */\nvar WebGLLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLLayerRenderer, _super);\n    /**\n     * @param {LayerType} layer Layer.\n     * @param {Options=} [opt_options] Options.\n     */\n    function WebGLLayerRenderer(layer, opt_options) {\n        var _this = _super.call(this, layer) || this;\n        var options = opt_options || {};\n        /**\n         * @type {WebGLHelper}\n         * @protected\n         */\n        _this.helper = new WebGLHelper({\n            postProcesses: options.postProcesses,\n            uniforms: options.uniforms\n        });\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    WebGLLayerRenderer.prototype.disposeInternal = function () {\n        this.helper.dispose();\n        _super.prototype.disposeInternal.call(this);\n    };\n    /**\n     * Will return the last shader compilation errors. If no error happened, will return null;\n     * @return {string|null} Errors, or null if last compilation was successful\n     * @api\n     */\n    WebGLLayerRenderer.prototype.getShaderCompileErrors = function () {\n        return this.helper.getShaderCompileErrors();\n    };\n    return WebGLLayerRenderer;\n}(LayerRenderer));\nvar tmpArray_ = [];\nvar bufferPositions_ = { vertexPosition: 0, indexPosition: 0 };\nfunction writePointVertex(buffer, pos, x, y, index) {\n    buffer[pos + 0] = x;\n    buffer[pos + 1] = y;\n    buffer[pos + 2] = index;\n}\n/**\n * An object holding positions both in an index and a vertex buffer.\n * @typedef {Object} BufferPositions\n * @property {number} vertexPosition Position in the vertex buffer\n * @property {number} indexPosition Position in the index buffer\n */\n/**\n * Pushes a quad (two triangles) based on a point geometry\n * @param {Float32Array} instructions Array of render instructions for points.\n * @param {number} elementIndex Index from which render instructions will be read.\n * @param {Float32Array} vertexBuffer Buffer in the form of a typed array.\n * @param {Uint32Array} indexBuffer Buffer in the form of a typed array.\n * @param {number} customAttributesCount Amount of custom attributes for each element.\n * @param {BufferPositions} [bufferPositions] Buffer write positions; if not specified, positions will be set at 0.\n * @return {BufferPositions} New buffer positions where to write next\n * @property {number} vertexPosition New position in the vertex buffer where future writes should start.\n * @property {number} indexPosition New position in the index buffer where future writes should start.\n * @private\n */\nexport function writePointFeatureToBuffers(instructions, elementIndex, vertexBuffer, indexBuffer, customAttributesCount, bufferPositions) {\n    // This is for x, y and index\n    var baseVertexAttrsCount = 3;\n    var baseInstructionsCount = 2;\n    var stride = baseVertexAttrsCount + customAttributesCount;\n    var x = instructions[elementIndex + 0];\n    var y = instructions[elementIndex + 1];\n    // read custom numerical attributes on the feature\n    var customAttrs = tmpArray_;\n    customAttrs.length = customAttributesCount;\n    for (var i = 0; i < customAttrs.length; i++) {\n        customAttrs[i] = instructions[elementIndex + baseInstructionsCount + i];\n    }\n    var vPos = bufferPositions ? bufferPositions.vertexPosition : 0;\n    var iPos = bufferPositions ? bufferPositions.indexPosition : 0;\n    var baseIndex = vPos / stride;\n    // push vertices for each of the four quad corners (first standard then custom attributes)\n    writePointVertex(vertexBuffer, vPos, x, y, 0);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 1);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 2);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    writePointVertex(vertexBuffer, vPos, x, y, 3);\n    customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n    vPos += stride;\n    indexBuffer[iPos++] = baseIndex;\n    indexBuffer[iPos++] = baseIndex + 1;\n    indexBuffer[iPos++] = baseIndex + 3;\n    indexBuffer[iPos++] = baseIndex + 1;\n    indexBuffer[iPos++] = baseIndex + 2;\n    indexBuffer[iPos++] = baseIndex + 3;\n    bufferPositions_.vertexPosition = vPos;\n    bufferPositions_.indexPosition = iPos;\n    return bufferPositions_;\n}\n/**\n * Returns a texture of 1x1 pixel, white\n * @private\n * @return {ImageData} Image data.\n */\nexport function getBlankImageData() {\n    var canvas = document.createElement('canvas');\n    var image = canvas.getContext('2d').createImageData(1, 1);\n    image.data[0] = 255;\n    image.data[1] = 255;\n    image.data[2] = 255;\n    image.data[3] = 255;\n    return image;\n}\n/**\n * Generates a color array based on a numerical id\n * Note: the range for each component is 0 to 1 with 256 steps\n * @param {number} id Id\n * @param {Array<number>} [opt_array] Reusable array\n * @return {Array<number>} Color array containing the encoded id\n */\nexport function colorEncodeId(id, opt_array) {\n    var array = opt_array || [];\n    var radix = 256;\n    var divide = radix - 1;\n    array[0] = Math.floor(id / radix / radix / radix) / divide;\n    array[1] = (Math.floor(id / radix / radix) % radix) / divide;\n    array[2] = (Math.floor(id / radix) % radix) / divide;\n    array[3] = (id % radix) / divide;\n    return array;\n}\n/**\n * Reads an id from a color-encoded array\n * Note: the expected range for each component is 0 to 1 with 256 steps.\n * @param {Array<number>} color Color array containing the encoded id\n * @return {number} Decoded id\n */\nexport function colorDecodeId(color) {\n    var id = 0;\n    var radix = 256;\n    var mult = radix - 1;\n    id += Math.round(color[0] * radix * radix * radix * mult);\n    id += Math.round(color[1] * radix * radix * mult);\n    id += Math.round(color[2] * radix * mult);\n    id += Math.round(color[3] * mult);\n    return id;\n}\nexport default WebGLLayerRenderer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/ViewHint\n */\n/**\n * @enum {number}\n */\nexport default {\n    ANIMATING: 0,\n    INTERACTING: 1\n};\n//# sourceMappingURL=ViewHint.js.map","var source = \"var e=\\\"function\\\"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError(\\\"Cannot convert undefined or null to object\\\");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n=\\\"GENERATE_BUFFERS\\\",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};\";\nvar blob = new Blob([source], { type: 'application/javascript' });\nvar url = URL.createObjectURL(blob);\nexport function create() {\n    return new Worker(url);\n}\n//# sourceMappingURL=webgl.js.map","/**\n * A wrapper class to simplify rendering to a texture instead of the final canvas\n * @module ol/webgl/RenderTarget\n */\nimport { equals } from '../array.js';\n// for pixel color reading\nvar tmpArray4 = new Uint8Array(4);\n/**\n * @classdesc\n * This class is a wrapper around the association of both a `WebGLTexture` and a `WebGLFramebuffer` instances,\n * simplifying initialization and binding for rendering.\n * @api\n */\nvar WebGLRenderTarget = /** @class */ (function () {\n    /**\n     * @param {import(\"./Helper.js\").default} helper WebGL helper; mandatory.\n     * @param {Array<number>} [opt_size] Expected size of the render target texture; note: this can be changed later on.\n     */\n    function WebGLRenderTarget(helper, opt_size) {\n        /**\n         * @private\n         * @type {import(\"./Helper.js\").default}\n         */\n        this.helper_ = helper;\n        var gl = helper.getGL();\n        /**\n         * @private\n         * @type {WebGLTexture}\n         */\n        this.texture_ = gl.createTexture();\n        /**\n         * @private\n         * @type {WebGLFramebuffer}\n         */\n        this.framebuffer_ = gl.createFramebuffer();\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.size_ = opt_size || [1, 1];\n        /**\n         * @type {Uint8Array}\n         * @private\n         */\n        this.data_ = new Uint8Array(0);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.dataCacheDirty_ = true;\n        this.updateSize_();\n    }\n    /**\n     * Changes the size of the render target texture. Note: will do nothing if the size\n     * is already the same.\n     * @param {Array<number>} size Expected size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.setSize = function (size) {\n        if (equals(size, this.size_)) {\n            return;\n        }\n        this.size_[0] = size[0];\n        this.size_[1] = size[1];\n        this.updateSize_();\n    };\n    /**\n     * Returns the size of the render target texture\n     * @return {Array<number>} Size of the render target texture\n     * @api\n     */\n    WebGLRenderTarget.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * This will cause following calls to `#readAll` or `#readPixel` to download the content of the\n     * render target into memory, which is an expensive operation.\n     * This content will be kept in cache but should be cleared after each new render.\n     * @api\n     */\n    WebGLRenderTarget.prototype.clearCachedData = function () {\n        this.dataCacheDirty_ = true;\n    };\n    /**\n     * Returns the full content of the frame buffer as a series of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * @return {Uint8Array} Integer array of color values\n     * @api\n     */\n    WebGLRenderTarget.prototype.readAll = function () {\n        if (this.dataCacheDirty_) {\n            var size = this.size_;\n            var gl = this.helper_.getGL();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n            gl.readPixels(0, 0, size[0], size[1], gl.RGBA, gl.UNSIGNED_BYTE, this.data_);\n            this.dataCacheDirty_ = false;\n        }\n        return this.data_;\n    };\n    /**\n     * Reads one pixel of the frame buffer as an array of r, g, b, a components\n     * in the 0-255 range (unsigned byte).\n     * If x and/or y are outside of existing data, an array filled with 0 is returned.\n     * @param {number} x Pixel coordinate\n     * @param {number} y Pixel coordinate\n     * @returns {Uint8Array} Integer array with one color value (4 components)\n     * @api\n     */\n    WebGLRenderTarget.prototype.readPixel = function (x, y) {\n        if (x < 0 || y < 0 || x > this.size_[0] || y >= this.size_[1]) {\n            tmpArray4[0] = 0;\n            tmpArray4[1] = 0;\n            tmpArray4[2] = 0;\n            tmpArray4[3] = 0;\n            return tmpArray4;\n        }\n        this.readAll();\n        var index = Math.floor(x) + (this.size_[1] - Math.floor(y) - 1) * this.size_[0];\n        tmpArray4[0] = this.data_[index * 4];\n        tmpArray4[1] = this.data_[index * 4 + 1];\n        tmpArray4[2] = this.data_[index * 4 + 2];\n        tmpArray4[3] = this.data_[index * 4 + 3];\n        return tmpArray4;\n    };\n    /**\n     * @return {WebGLTexture} Texture to render to\n     */\n    WebGLRenderTarget.prototype.getTexture = function () {\n        return this.texture_;\n    };\n    /**\n     * @return {WebGLFramebuffer} Frame buffer of the render target\n     */\n    WebGLRenderTarget.prototype.getFramebuffer = function () {\n        return this.framebuffer_;\n    };\n    /**\n     * @private\n     */\n    WebGLRenderTarget.prototype.updateSize_ = function () {\n        var size = this.size_;\n        var gl = this.helper_.getGL();\n        this.texture_ = this.helper_.createTexture(size, null, this.texture_);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer_);\n        gl.viewport(0, 0, size[0], size[1]);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture_, 0);\n        this.data_ = new Uint8Array(size[0] * size[1] * 4);\n    };\n    return WebGLRenderTarget;\n}());\nexport default WebGLRenderTarget;\n//# sourceMappingURL=RenderTarget.js.map","/**\n * @module ol/ObjectEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a property is changed.\n     * @event module:ol/Object.ObjectEvent#propertychange\n     * @api\n     */\n    PROPERTYCHANGE: 'propertychange'\n};\n//# sourceMappingURL=ObjectEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Object\n */\nimport { getUid } from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport { assign } from './obj.js';\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nvar ObjectEvent = /** @class */ (function (_super) {\n    __extends(ObjectEvent, _super);\n    /**\n     * @param {string} type The event type.\n     * @param {string} key The property name.\n     * @param {*} oldValue The old value for `key`.\n     */\n    function ObjectEvent(type, key, oldValue) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * The name of the property whose value is changing.\n         * @type {string}\n         * @api\n         */\n        _this.key = key;\n        /**\n         * The old value. To get the new value use `e.target.get(e.key)` where\n         * `e` is the event object.\n         * @type {*}\n         * @api\n         */\n        _this.oldValue = oldValue;\n        return _this;\n    }\n    return ObjectEvent;\n}(Event));\nexport { ObjectEvent };\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nvar BaseObject = /** @class */ (function (_super) {\n    __extends(BaseObject, _super);\n    /**\n     * @param {Object<string, *>=} opt_values An object with key-value pairs.\n     */\n    function BaseObject(opt_values) {\n        var _this = _super.call(this) || this;\n        // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n        // the same as the order in which they were created.  This also helps to\n        // ensure that object properties are always added in the same order, which\n        // helps many JavaScript engines generate faster code.\n        getUid(_this);\n        /**\n         * @private\n         * @type {!Object<string, *>}\n         */\n        _this.values_ = {};\n        if (opt_values !== undefined) {\n            _this.setProperties(opt_values);\n        }\n        return _this;\n    }\n    /**\n     * Gets a value.\n     * @param {string} key Key name.\n     * @return {*} Value.\n     * @api\n     */\n    BaseObject.prototype.get = function (key) {\n        var value;\n        if (this.values_.hasOwnProperty(key)) {\n            value = this.values_[key];\n        }\n        return value;\n    };\n    /**\n     * Get a list of object property names.\n     * @return {Array<string>} List of property names.\n     * @api\n     */\n    BaseObject.prototype.getKeys = function () {\n        return Object.keys(this.values_);\n    };\n    /**\n     * Get an object of all property names and values.\n     * @return {Object<string, *>} Object.\n     * @api\n     */\n    BaseObject.prototype.getProperties = function () {\n        return assign({}, this.values_);\n    };\n    /**\n     * @param {string} key Key name.\n     * @param {*} oldValue Old value.\n     */\n    BaseObject.prototype.notify = function (key, oldValue) {\n        var eventType;\n        eventType = getChangeEventType(key);\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n        eventType = ObjectEventType.PROPERTYCHANGE;\n        this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    };\n    /**\n     * Sets a value.\n     * @param {string} key Key name.\n     * @param {*} value Value.\n     * @param {boolean=} opt_silent Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.set = function (key, value, opt_silent) {\n        if (opt_silent) {\n            this.values_[key] = value;\n        }\n        else {\n            var oldValue = this.values_[key];\n            this.values_[key] = value;\n            if (oldValue !== value) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    /**\n     * Sets a collection of key-value pairs.  Note that this changes any existing\n     * properties and adds new ones (it does not remove any existing properties).\n     * @param {Object<string, *>} values Values.\n     * @param {boolean=} opt_silent Update without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.setProperties = function (values, opt_silent) {\n        for (var key in values) {\n            this.set(key, values[key], opt_silent);\n        }\n    };\n    /**\n     * Unsets a property.\n     * @param {string} key Key name.\n     * @param {boolean=} opt_silent Unset without triggering an event.\n     * @api\n     */\n    BaseObject.prototype.unset = function (key, opt_silent) {\n        if (key in this.values_) {\n            var oldValue = this.values_[key];\n            delete this.values_[key];\n            if (!opt_silent) {\n                this.notify(key, oldValue);\n            }\n        }\n    };\n    return BaseObject;\n}(Observable));\n/**\n * @type {Object<string, string>}\n */\nvar changeEventTypeCache = {};\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n    return changeEventTypeCache.hasOwnProperty(key) ?\n        changeEventTypeCache[key] :\n        (changeEventTypeCache[key] = 'change:' + key);\n}\nexport default BaseObject;\n//# sourceMappingURL=Object.js.map","/**\n * @module ol/layer/Property\n */\n/**\n * @enum {string}\n */\nexport default {\n    OPACITY: 'opacity',\n    VISIBLE: 'visible',\n    EXTENT: 'extent',\n    Z_INDEX: 'zIndex',\n    MAX_RESOLUTION: 'maxResolution',\n    MIN_RESOLUTION: 'minResolution',\n    MAX_ZOOM: 'maxZoom',\n    MIN_ZOOM: 'minZoom',\n    SOURCE: 'source'\n};\n//# sourceMappingURL=Property.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Base\n */\nimport { abstract } from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport { clamp } from '../math.js';\nimport { assign } from '../obj.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n */\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /** @class */ (function (_super) {\n    __extends(BaseLayer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function BaseLayer(options) {\n        var _this = _super.call(this) || this;\n        /**\n         * @type {Object<string, *>}\n         */\n        var properties = assign({}, options);\n        properties[LayerProperty.OPACITY] =\n            options.opacity !== undefined ? options.opacity : 1;\n        assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n        properties[LayerProperty.VISIBLE] =\n            options.visible !== undefined ? options.visible : true;\n        properties[LayerProperty.Z_INDEX] = options.zIndex;\n        properties[LayerProperty.MAX_RESOLUTION] =\n            options.maxResolution !== undefined ? options.maxResolution : Infinity;\n        properties[LayerProperty.MIN_RESOLUTION] =\n            options.minResolution !== undefined ? options.minResolution : 0;\n        properties[LayerProperty.MIN_ZOOM] =\n            options.minZoom !== undefined ? options.minZoom : -Infinity;\n        properties[LayerProperty.MAX_ZOOM] =\n            options.maxZoom !== undefined ? options.maxZoom : Infinity;\n        /**\n         * @type {string}\n         * @private\n         */\n        _this.className_ = properties.className !== undefined ? options.className : 'ol-layer';\n        delete properties.className;\n        _this.setProperties(properties);\n        /**\n         * @type {import(\"./Layer.js\").State}\n         * @private\n         */\n        _this.state_ = null;\n        return _this;\n    }\n    /**\n     * @return {string} CSS class name.\n     */\n    BaseLayer.prototype.getClassName = function () {\n        return this.className_;\n    };\n    /**\n     * This method is not meant to be called by layers or layer renderers because the state\n     * is incorrect if the layer is included in a layer group.\n     *\n     * @param {boolean=} opt_managed Layer is managed.\n     * @return {import(\"./Layer.js\").State} Layer state.\n     */\n    BaseLayer.prototype.getLayerState = function (opt_managed) {\n        /** @type {import(\"./Layer.js\").State} */\n        var state = this.state_ || /** @type {?} */ ({\n            layer: this,\n            managed: opt_managed === undefined ? true : opt_managed\n        });\n        var zIndex = this.getZIndex();\n        state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n        state.sourceState = this.getSourceState();\n        state.visible = this.getVisible();\n        state.extent = this.getExtent();\n        state.zIndex = zIndex !== undefined ? zIndex : (state.managed === false ? Infinity : 0);\n        state.maxResolution = this.getMaxResolution();\n        state.minResolution = Math.max(this.getMinResolution(), 0);\n        state.minZoom = this.getMinZoom();\n        state.maxZoom = this.getMaxZoom();\n        this.state_ = state;\n        return state;\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n     *     modified in place).\n     * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n     */\n    BaseLayer.prototype.getLayersArray = function (opt_array) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n     *     states (to be modified in place).\n     * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n     */\n    BaseLayer.prototype.getLayerStatesArray = function (opt_states) {\n        return abstract();\n    };\n    /**\n     * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n     * will be visible regardless of extent.\n     * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getExtent = function () {\n        return (\n        /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT)));\n    };\n    /**\n     * Return the maximum resolution of the layer.\n     * @return {number} The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n    };\n    /**\n     * Return the minimum resolution of the layer.\n     * @return {number} The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinResolution = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n    };\n    /**\n     * Return the minimum zoom level of the layer.\n     * @return {number} The minimum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMinZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n    };\n    /**\n     * Return the maximum zoom level of the layer.\n     * @return {number} The maximum zoom level of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getMaxZoom = function () {\n        return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n    };\n    /**\n     * Return the opacity of the layer (between 0 and 1).\n     * @return {number} The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getOpacity = function () {\n        return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n    };\n    /**\n     * @abstract\n     * @return {import(\"../source/State.js\").default} Source state.\n     */\n    BaseLayer.prototype.getSourceState = function () {\n        return abstract();\n    };\n    /**\n     * Return the visibility of the layer (`true` or `false`).\n     * @return {boolean} The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getVisible = function () {\n        return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n    };\n    /**\n     * Return the Z-index of the layer, which is used to order layers before\n     * rendering. The default Z-index is 0.\n     * @return {number} The Z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.getZIndex = function () {\n        return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n    };\n    /**\n     * Set the extent at which the layer is visible.  If `undefined`, the layer\n     * will be visible at all extents.\n     * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setExtent = function (extent) {\n        this.set(LayerProperty.EXTENT, extent);\n    };\n    /**\n     * Set the maximum resolution at which the layer is visible.\n     * @param {number} maxResolution The maximum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxResolution = function (maxResolution) {\n        this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n    };\n    /**\n     * Set the minimum resolution at which the layer is visible.\n     * @param {number} minResolution The minimum resolution of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinResolution = function (minResolution) {\n        this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n    };\n    /**\n     * Set the maximum zoom (exclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} maxZoom The maximum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMaxZoom = function (maxZoom) {\n        this.set(LayerProperty.MAX_ZOOM, maxZoom);\n    };\n    /**\n     * Set the minimum zoom (inclusive) at which the layer is visible.\n     * Note that the zoom levels for layer visibility are based on the\n     * view zoom level, which may be different from a tile source zoom level.\n     * @param {number} minZoom The minimum zoom of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setMinZoom = function (minZoom) {\n        this.set(LayerProperty.MIN_ZOOM, minZoom);\n    };\n    /**\n     * Set the opacity of the layer, allowed values range from 0 to 1.\n     * @param {number} opacity The opacity of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setOpacity = function (opacity) {\n        assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n        this.set(LayerProperty.OPACITY, opacity);\n    };\n    /**\n     * Set the visibility of the layer (`true` or `false`).\n     * @param {boolean} visible The visibility of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setVisible = function (visible) {\n        this.set(LayerProperty.VISIBLE, visible);\n    };\n    /**\n     * Set Z-index of the layer, which is used to order layers before rendering.\n     * The default Z-index is 0.\n     * @param {number} zindex The z-index of the layer.\n     * @observable\n     * @api\n     */\n    BaseLayer.prototype.setZIndex = function (zindex) {\n        this.set(LayerProperty.Z_INDEX, zindex);\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseLayer.prototype.disposeInternal = function () {\n        if (this.state_) {\n            this.state_.layer = null;\n            this.state_ = null;\n        }\n        _super.prototype.disposeInternal.call(this);\n    };\n    return BaseLayer;\n}(BaseObject));\nexport default BaseLayer;\n//# sourceMappingURL=Base.js.map","/**\n * @module ol/render/EventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered before a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#prerender\n     * @api\n     */\n    PRERENDER: 'prerender',\n    /**\n     * Triggered after a layer is rendered.\n     * @event module:ol/render/Event~RenderEvent#postrender\n     * @api\n     */\n    POSTRENDER: 'postrender',\n    /**\n     * Triggered before layers are rendered.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#precompose\n     * @api\n     */\n    PRECOMPOSE: 'precompose',\n    /**\n     * Triggered after all layers are rendered.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#postcompose\n     * @api\n     */\n    POSTCOMPOSE: 'postcompose',\n    /**\n     * Triggered when rendering is complete, i.e. all sources and tiles have\n     * finished loading for the current viewport, and all tiles are faded in.\n     * The event object will not have a `context` set.\n     * @event module:ol/render/Event~RenderEvent#rendercomplete\n     * @api\n     */\n    RENDERCOMPLETE: 'rendercomplete'\n};\n//# sourceMappingURL=EventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/Layer\n */\nimport { listen, unlistenByKey } from '../events.js';\nimport EventType from '../events/EventType.js';\nimport { getChangeEventType } from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport { assign } from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\nimport { assert } from '../asserts.js';\n/**\n * @typedef {function(import(\"../PluggableMap.js\").FrameState):HTMLElement} RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n */\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n * @property {number} minZoom\n * @property {number} maxZoom\n */\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is be added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * Please note that for performance reasons several layers might get rendered to\n * the same HTML element, which will cause {@link module:ol/Map~Map#forEachLayerAtPixel} to\n * give false positives. To avoid this, apply different `className` properties to the\n * layers at creation time.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} SourceType\n * @api\n */\nvar Layer = /** @class */ (function (_super) {\n    __extends(Layer, _super);\n    /**\n     * @param {Options} options Layer options.\n     */\n    function Layer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        delete baseOptions.source;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapPrecomposeKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.mapRenderKey_ = null;\n        /**\n         * @private\n         * @type {?import(\"../events.js\").EventsKey}\n         */\n        _this.sourceChangeKey_ = null;\n        /**\n         * @private\n         * @type {import(\"../renderer/Layer.js\").default}\n         */\n        _this.renderer_ = null;\n        // Overwrite default render method with a custom one\n        if (options.render) {\n            _this.render = options.render;\n        }\n        if (options.map) {\n            _this.setMap(options.map);\n        }\n        _this.addEventListener(getChangeEventType(LayerProperty.SOURCE), _this.handleSourcePropertyChange_);\n        var source = options.source ? /** @type {SourceType} */ (options.source) : null;\n        _this.setSource(source);\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.getLayersArray = function (opt_array) {\n        var array = opt_array ? opt_array : [];\n        array.push(this);\n        return array;\n    };\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.getLayerStatesArray = function (opt_states) {\n        var states = opt_states ? opt_states : [];\n        states.push(this.getLayerState());\n        return states;\n    };\n    /**\n     * Get the layer source.\n     * @return {SourceType} The layer source (or `null` if not yet set).\n     * @observable\n     * @api\n     */\n    Layer.prototype.getSource = function () {\n        return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n    };\n    /**\n      * @inheritDoc\n      */\n    Layer.prototype.getSourceState = function () {\n        var source = this.getSource();\n        return !source ? SourceState.UNDEFINED : source.getState();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourceChange_ = function () {\n        this.changed();\n    };\n    /**\n     * @private\n     */\n    Layer.prototype.handleSourcePropertyChange_ = function () {\n        if (this.sourceChangeKey_) {\n            unlistenByKey(this.sourceChangeKey_);\n            this.sourceChangeKey_ = null;\n        }\n        var source = this.getSource();\n        if (source) {\n            this.sourceChangeKey_ = listen(source, EventType.CHANGE, this.handleSourceChange_, this);\n        }\n        this.changed();\n    };\n    /**\n     * @param {import(\"../pixel\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n     * an array of features.\n     */\n    Layer.prototype.getFeatures = function (pixel) {\n        return this.renderer_.getFeatures(pixel);\n    };\n    /**\n     * In charge to manage the rendering of the layer. One layer type is\n     * bounded with one layer renderer.\n     * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n     * @param {HTMLElement} target Target which the renderer may (but need not) use\n     * for rendering its content.\n     * @return {HTMLElement} The rendered element.\n     */\n    Layer.prototype.render = function (frameState, target) {\n        var layerRenderer = this.getRenderer();\n        if (layerRenderer.prepareFrame(frameState)) {\n            return layerRenderer.renderFrame(frameState, target);\n        }\n    };\n    /**\n     * Sets the layer to be rendered on top of other layers on a map. The map will\n     * not manage this layer in its layers collection, and the callback in\n     * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n     * is useful for temporary layers. To remove an unmanaged layer from the map,\n     * use `#setMap(null)`.\n     *\n     * To add the layer to a map and have it managed by the map, use\n     * {@link module:ol/Map#addLayer} instead.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Layer.prototype.setMap = function (map) {\n        if (this.mapPrecomposeKey_) {\n            unlistenByKey(this.mapPrecomposeKey_);\n            this.mapPrecomposeKey_ = null;\n        }\n        if (!map) {\n            this.changed();\n        }\n        if (this.mapRenderKey_) {\n            unlistenByKey(this.mapRenderKey_);\n            this.mapRenderKey_ = null;\n        }\n        if (map) {\n            this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function (evt) {\n                var renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n                var layerStatesArray = renderEvent.frameState.layerStatesArray;\n                var layerState = this.getLayerState(false);\n                // A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\n                assert(!layerStatesArray.some(function (arrayLayerState) {\n                    return arrayLayerState.layer === layerState.layer;\n                }), 67);\n                layerStatesArray.push(layerState);\n            }, this);\n            this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n            this.changed();\n        }\n    };\n    /**\n     * Set the layer source.\n     * @param {SourceType} source The layer source.\n     * @observable\n     * @api\n     */\n    Layer.prototype.setSource = function (source) {\n        this.set(LayerProperty.SOURCE, source);\n    };\n    /**\n     * Get the renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} The layer renderer.\n     */\n    Layer.prototype.getRenderer = function () {\n        if (!this.renderer_) {\n            this.renderer_ = this.createRenderer();\n        }\n        return this.renderer_;\n    };\n    /**\n     * @return {boolean} The layer has a renderer.\n     */\n    Layer.prototype.hasRenderer = function () {\n        return !!this.renderer_;\n    };\n    /**\n     * Create a renderer for this layer.\n     * @return {import(\"../renderer/Layer.js\").default} A layer renderer.\n     * @protected\n     */\n    Layer.prototype.createRenderer = function () {\n        return null;\n    };\n    /**\n     * @inheritDoc\n     */\n    Layer.prototype.disposeInternal = function () {\n        this.setSource(null);\n        _super.prototype.disposeInternal.call(this);\n    };\n    return Layer;\n}(BaseLayer));\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n    if (!layerState.visible) {\n        return false;\n    }\n    var resolution = viewState.resolution;\n    if (resolution < layerState.minResolution || resolution >= layerState.maxResolution) {\n        return false;\n    }\n    var zoom = viewState.zoom;\n    return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\nexport default Layer;\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/color\n */\nimport { assert } from './asserts.js';\nimport { clamp } from './math.js';\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nvar HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nvar NAMED_COLOR_RE_ = /^([a-z]*)$|^hsla?\\(.*\\)$/i;\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n    if (typeof color === 'string') {\n        return color;\n    }\n    else {\n        return toString(color);\n    }\n}\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n    var el = document.createElement('div');\n    el.style.color = color;\n    if (el.style.color !== '') {\n        document.body.appendChild(el);\n        var rgb = getComputedStyle(el).color;\n        document.body.removeChild(el);\n        return rgb;\n    }\n    else {\n        return '';\n    }\n}\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport var fromString = (function () {\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n    /**\n     * @const\n     * @type {number}\n     */\n    var MAX_CACHE_SIZE = 1024;\n    /**\n     * @type {Object<string, Color>}\n     */\n    var cache = {};\n    /**\n     * @type {number}\n     */\n    var cacheSize = 0;\n    return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n        var color;\n        if (cache.hasOwnProperty(s)) {\n            color = cache[s];\n        }\n        else {\n            if (cacheSize >= MAX_CACHE_SIZE) {\n                var i = 0;\n                for (var key in cache) {\n                    if ((i++ & 3) === 0) {\n                        delete cache[key];\n                        --cacheSize;\n                    }\n                }\n            }\n            color = fromStringInternal_(s);\n            cache[s] = color;\n            ++cacheSize;\n        }\n        return color;\n    });\n})();\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n    if (Array.isArray(color)) {\n        return color;\n    }\n    else {\n        return fromString(color);\n    }\n}\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n    var r, g, b, a, color;\n    if (NAMED_COLOR_RE_.exec(s)) {\n        s = fromNamed(s);\n    }\n    if (HEX_COLOR_RE_.exec(s)) { // hex\n        var n = s.length - 1; // number of hex digits\n        var d = // number of digits per channel\n         void 0; // number of digits per channel\n        if (n <= 4) {\n            d = 1;\n        }\n        else {\n            d = 2;\n        }\n        var hasAlpha = n === 4 || n === 8;\n        r = parseInt(s.substr(1 + 0 * d, d), 16);\n        g = parseInt(s.substr(1 + 1 * d, d), 16);\n        b = parseInt(s.substr(1 + 2 * d, d), 16);\n        if (hasAlpha) {\n            a = parseInt(s.substr(1 + 3 * d, d), 16);\n        }\n        else {\n            a = 255;\n        }\n        if (d == 1) {\n            r = (r << 4) + r;\n            g = (g << 4) + g;\n            b = (b << 4) + b;\n            if (hasAlpha) {\n                a = (a << 4) + a;\n            }\n        }\n        color = [r, g, b, a / 255];\n    }\n    else if (s.indexOf('rgba(') == 0) { // rgba()\n        color = s.slice(5, -1).split(',').map(Number);\n        normalize(color);\n    }\n    else if (s.indexOf('rgb(') == 0) { // rgb()\n        color = s.slice(4, -1).split(',').map(Number);\n        color.push(1);\n        normalize(color);\n    }\n    else {\n        assert(false, 14); // Invalid color\n    }\n    return color;\n}\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n    color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n    color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n    color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n    color[3] = clamp(color[3], 0, 1);\n    return color;\n}\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n    var r = color[0];\n    if (r != (r | 0)) {\n        r = (r + 0.5) | 0;\n    }\n    var g = color[1];\n    if (g != (g | 0)) {\n        g = (g + 0.5) | 0;\n    }\n    var b = color[2];\n    if (b != (b | 0)) {\n        b = (b + 0.5) | 0;\n    }\n    var a = color[3] === undefined ? 1 : color[3];\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n    if (NAMED_COLOR_RE_.test(s)) {\n        s = fromNamed(s);\n    }\n    return HEX_COLOR_RE_.test(s) || s.indexOf('rgba(') === 0 || s.indexOf('rgb(') === 0;\n}\n//# sourceMappingURL=color.js.map","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n    if (Array.isArray(color)) {\n        return toString(color);\n    }\n    else {\n        return color;\n    }\n}\n//# sourceMappingURL=colorlike.js.map","/**\n * @module ol/dom\n */\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @param {Array<HTMLCanvasElement>=} opt_canvasPool Canvas pool to take existing canvas from.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height, opt_canvasPool) {\n    var canvas = opt_canvasPool && opt_canvasPool.length ?\n        opt_canvasPool.shift() : document.createElement('canvas');\n    if (opt_width) {\n        canvas.width = opt_width;\n    }\n    if (opt_height) {\n        canvas.height = opt_height;\n    }\n    return canvas.getContext('2d');\n}\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n    var width = element.offsetWidth;\n    var style = getComputedStyle(element);\n    width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n    return width;\n}\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n    var height = element.offsetHeight;\n    var style = getComputedStyle(element);\n    height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n    return height;\n}\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n    var parent = oldNode.parentNode;\n    if (parent) {\n        parent.replaceChild(newNode, oldNode);\n    }\n}\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n    return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n    while (node.lastChild) {\n        node.removeChild(node.lastChild);\n    }\n}\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n    var oldChildren = node.childNodes;\n    for (var i = 0; true; ++i) {\n        var oldChild = oldChildren[i];\n        var newChild = children[i];\n        // check if our work is done\n        if (!oldChild && !newChild) {\n            break;\n        }\n        // check if children match\n        if (oldChild === newChild) {\n            continue;\n        }\n        // check if a new child needs to be added\n        if (!oldChild) {\n            node.appendChild(newChild);\n            continue;\n        }\n        // check if an old child needs to be removed\n        if (!newChild) {\n            node.removeChild(oldChild);\n            --i;\n            continue;\n        }\n        // reorder\n        node.insertBefore(newChild, oldChild);\n    }\n}\n//# sourceMappingURL=dom.js.map","/**\n * @module ol/css\n */\n/**\n * @typedef {Object} FontParameters\n * @property {Array<string>} families\n * @property {string} style\n * @property {string} weight\n */\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_HIDDEN = 'ol-hidden';\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_SELECTABLE = 'ol-selectable';\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSELECTABLE = 'ol-unselectable';\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_UNSUPPORTED = 'ol-unsupported';\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_CONTROL = 'ol-control';\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport var CLASS_COLLAPSED = 'ol-collapsed';\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {FontParameters} The font families (or null if the input spec is invalid).\n */\nexport var getFontParameters = (function () {\n    /**\n     * @type {CSSStyleDeclaration}\n     */\n    var style;\n    /**\n     * @type {Object<string, FontParameters>}\n     */\n    var cache = {};\n    return function (font) {\n        if (!style) {\n            style = document.createElement('div').style;\n        }\n        if (!(font in cache)) {\n            style.font = font;\n            var family = style.fontFamily;\n            var fontWeight = style.fontWeight;\n            var fontStyle = style.fontStyle;\n            style.font = '';\n            if (!family) {\n                return null;\n            }\n            var families = family.split(/,\\s?/);\n            cache[font] = {\n                families: families,\n                weight: fontWeight,\n                style: fontStyle\n            };\n        }\n        return cache[font];\n    };\n})();\n//# sourceMappingURL=css.js.map","/**\n * @module ol/render/canvas\n */\nimport { getFontParameters } from '../css.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { clear } from '../obj.js';\nimport BaseObject from '../Object.js';\nimport EventTarget from '../events/Target.js';\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n/**\n * @typedef Label\n * @property {number} width\n * @property {number} height\n * @property {Array<string|number>} contextInstructions\n */\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {CanvasLineCap} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {CanvasLineJoin} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {CanvasLineCap} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {CanvasLineJoin} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n/**\n * Declutter groups for support of multi geometries.\n * @typedef {Array<DeclutterGroup>} DeclutterGroups\n */\n/**\n * @const\n * @type {string}\n */\nexport var defaultFont = '10px sans-serif';\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultFillStyle = '#000';\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport var defaultLineCap = 'round';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultLineDash = [];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineDashOffset = 0;\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport var defaultLineJoin = 'round';\n/**\n * @const\n * @type {number}\n */\nexport var defaultMiterLimit = 10;\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport var defaultStrokeStyle = '#000';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextAlign = 'center';\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextBaseline = 'middle';\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultPadding = [0, 0, 0, 0];\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineWidth = 1;\n/**\n * @type {BaseObject}\n */\nexport var checkedFonts = new BaseObject();\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * Deprecated - there is no label cache any more.\n * @type {?}\n * @api\n * @deprecated\n */\nexport var labelCache = new EventTarget();\nlabelCache.setSize = function () {\n    console.warn('labelCache is deprecated.'); //eslint-disable-line\n};\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar measureContext = null;\n/**\n * @type {string}\n */\nvar measureFont;\n/**\n * @type {!Object<string, number>}\n */\nexport var textHeights = {};\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport var registerFont = (function () {\n    var retries = 100;\n    var size = '32px ';\n    var referenceFonts = ['monospace', 'serif'];\n    var len = referenceFonts.length;\n    var text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n    var interval, referenceWidth;\n    /**\n     * @param {string} fontStyle Css font-style\n     * @param {string} fontWeight Css font-weight\n     * @param {*} fontFamily Css font-family\n     * @return {boolean} Font with style and weight is available\n     */\n    function isAvailable(fontStyle, fontWeight, fontFamily) {\n        var available = true;\n        for (var i = 0; i < len; ++i) {\n            var referenceFont = referenceFonts[i];\n            referenceWidth = measureTextWidth(fontStyle + ' ' + fontWeight + ' ' + size + referenceFont, text);\n            if (fontFamily != referenceFont) {\n                var width = measureTextWidth(fontStyle + ' ' + fontWeight + ' ' + size + fontFamily + ',' + referenceFont, text);\n                // If width and referenceWidth are the same, then the fallback was used\n                // instead of the font we wanted, so the font is not available.\n                available = available && width != referenceWidth;\n            }\n        }\n        if (available) {\n            return true;\n        }\n        return false;\n    }\n    function check() {\n        var done = true;\n        var fonts = checkedFonts.getKeys();\n        for (var i = 0, ii = fonts.length; i < ii; ++i) {\n            var font = fonts[i];\n            if (checkedFonts.get(font) < retries) {\n                if (isAvailable.apply(this, font.split('\\n'))) {\n                    clear(textHeights);\n                    // Make sure that loaded fonts are picked up by Safari\n                    measureContext = null;\n                    measureFont = undefined;\n                    checkedFonts.set(font, retries);\n                }\n                else {\n                    checkedFonts.set(font, checkedFonts.get(font) + 1, true);\n                    done = false;\n                }\n            }\n        }\n        if (done) {\n            clearInterval(interval);\n            interval = undefined;\n        }\n    }\n    return function (fontSpec) {\n        var font = getFontParameters(fontSpec);\n        if (!font) {\n            return;\n        }\n        var families = font.families;\n        for (var i = 0, ii = families.length; i < ii; ++i) {\n            var family = families[i];\n            var key = font.style + '\\n' + font.weight + '\\n' + family;\n            if (checkedFonts.get(key) === undefined) {\n                checkedFonts.set(key, retries, true);\n                if (!isAvailable(font.style, font.weight, family)) {\n                    checkedFonts.set(key, 0, true);\n                    if (interval === undefined) {\n                        interval = setInterval(check, 32);\n                    }\n                }\n            }\n        }\n    };\n})();\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport var measureTextHeight = (function () {\n    /**\n     * @type {HTMLDivElement}\n     */\n    var div;\n    var heights = textHeights;\n    return function (font) {\n        var height = heights[font];\n        if (height == undefined) {\n            if (!div) {\n                div = document.createElement('div');\n                div.innerHTML = 'M';\n                div.style.margin = '0 !important';\n                div.style.padding = '0 !important';\n                div.style.position = 'absolute !important';\n                div.style.left = '-99999px !important';\n            }\n            div.style.font = font;\n            document.body.appendChild(div);\n            height = div.offsetHeight;\n            heights[font] = height;\n            document.body.removeChild(div);\n        }\n        return height;\n    };\n})();\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n    if (!measureContext) {\n        measureContext = createCanvasContext2D(1, 1);\n    }\n    if (font != measureFont) {\n        measureContext.font = font;\n        measureFont = measureContext.font;\n    }\n    return measureContext.measureText(text).width;\n}\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @returns {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n    if (text in cache) {\n        return cache[text];\n    }\n    var width = measureTextWidth(font, text);\n    cache[text] = width;\n    return width;\n}\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n    var numLines = lines.length;\n    var width = 0;\n    for (var i = 0; i < numLines; ++i) {\n        var currentWidth = measureTextWidth(font, lines[i]);\n        width = Math.max(width, currentWidth);\n        widths.push(currentWidth);\n    }\n    return width;\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n    if (rotation !== 0) {\n        context.translate(offsetX, offsetY);\n        context.rotate(rotation);\n        context.translate(-offsetX, -offsetY);\n    }\n}\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {Label|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} labelOrImage Label.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImageOrLabel(context, transform, opacity, labelOrImage, originX, originY, w, h, x, y, scale) {\n    context.save();\n    if (transform) {\n        context.setTransform.apply(context, transform);\n    }\n    if (( /** @type {*} */(labelOrImage).contextInstructions)) {\n        // label\n        context.translate(x, y);\n        context.scale(scale, scale);\n        executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);\n    }\n    else {\n        // image\n        context.drawImage(/** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (labelOrImage), originX, originY, w, h, x, y, w * scale, h * scale);\n    }\n    context.restore();\n}\n/**\n * @param {Label} label Label.\n * @param {CanvasRenderingContext2D} context Context.\n */\nfunction executeLabelInstructions(label, context) {\n    var contextInstructions = label.contextInstructions;\n    for (var i = 0, ii = contextInstructions.length; i < ii; i += 2) {\n        if (Array.isArray(contextInstructions[i + 1])) {\n            CanvasRenderingContext2D.prototype[contextInstructions[i]].apply(context, contextInstructions[i + 1]);\n        }\n        else {\n            context[contextInstructions[i]] = contextInstructions[i + 1];\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n * @property {Array<number>} displacement\n */\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nvar ImageStyle = /** @class */ (function () {\n    /**\n     * @param {Options} options Options.\n     */\n    function ImageStyle(options) {\n        /**\n         * @private\n         * @type {number}\n         */\n        this.opacity_ = options.opacity;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        this.rotateWithView_ = options.rotateWithView;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.rotation_ = options.rotation;\n        /**\n         * @private\n         * @type {number}\n         */\n        this.scale_ = options.scale;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.displacement_ = options.displacement;\n    }\n    /**\n     * Clones the style.\n     * @return {ImageStyle} The cloned style.\n     * @api\n     */\n    ImageStyle.prototype.clone = function () {\n        return new ImageStyle({\n            opacity: this.getOpacity(),\n            scale: this.getScale(),\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice()\n        });\n    };\n    /**\n     * Get the symbolizer opacity.\n     * @return {number} Opacity.\n     * @api\n     */\n    ImageStyle.prototype.getOpacity = function () {\n        return this.opacity_;\n    };\n    /**\n     * Determine whether the symbolizer rotates with the map.\n     * @return {boolean} Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.getRotateWithView = function () {\n        return this.rotateWithView_;\n    };\n    /**\n     * Get the symoblizer rotation.\n     * @return {number} Rotation.\n     * @api\n     */\n    ImageStyle.prototype.getRotation = function () {\n        return this.rotation_;\n    };\n    /**\n     * Get the symbolizer scale.\n     * @return {number} Scale.\n     * @api\n     */\n    ImageStyle.prototype.getScale = function () {\n        return this.scale_;\n    };\n    /**\n     * Get the displacement of the shape\n     * @return {Array<number>} Shape's center displacement\n     * @api\n     */\n    ImageStyle.prototype.getDisplacement = function () {\n        return this.displacement_;\n    };\n    /**\n     * Get the anchor point in pixels. The anchor determines the center point for the\n     * symbolizer.\n     * @abstract\n     * @return {Array<number>} Anchor.\n     */\n    ImageStyle.prototype.getAnchor = function () {\n        return abstract();\n    };\n    /**\n     * Get the image element for the symbolizer.\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @param {number} pixelRatio Pixel ratio.\n     * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n     */\n    ImageStyle.prototype.getHitDetectionImage = function (pixelRatio) {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../ImageState.js\").default} Image state.\n     */\n    ImageStyle.prototype.getImageState = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Image size.\n     */\n    ImageStyle.prototype.getImageSize = function () {\n        return abstract();\n    };\n    /**\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n     */\n    ImageStyle.prototype.getHitDetectionImageSize = function () {\n        return abstract();\n    };\n    /**\n     * Get the origin of the symbolizer.\n     * @abstract\n     * @return {Array<number>} Origin.\n     */\n    ImageStyle.prototype.getOrigin = function () {\n        return abstract();\n    };\n    /**\n     * Get the size of the symbolizer (in pixels).\n     * @abstract\n     * @return {import(\"../size.js\").Size} Size.\n     */\n    ImageStyle.prototype.getSize = function () {\n        return abstract();\n    };\n    /**\n     * Set the opacity.\n     *\n     * @param {number} opacity Opacity.\n     * @api\n     */\n    ImageStyle.prototype.setOpacity = function (opacity) {\n        this.opacity_ = opacity;\n    };\n    /**\n     * Set whether to rotate the style with the view.\n     *\n     * @param {boolean} rotateWithView Rotate with map.\n     * @api\n     */\n    ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n        this.rotateWithView_ = rotateWithView;\n    };\n    /**\n     * Set the rotation.\n     *\n     * @param {number} rotation Rotation.\n     * @api\n     */\n    ImageStyle.prototype.setRotation = function (rotation) {\n        this.rotation_ = rotation;\n    };\n    /**\n     * Set the scale.\n     *\n     * @param {number} scale Scale.\n     * @api\n     */\n    ImageStyle.prototype.setScale = function (scale) {\n        this.scale_ = scale;\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.listenImageChange = function (listener) {\n        abstract();\n    };\n    /**\n     * Load not yet loaded URI.\n     * @abstract\n     */\n    ImageStyle.prototype.load = function () {\n        abstract();\n    };\n    /**\n     * @abstract\n     * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n     * @template T\n     */\n    ImageStyle.prototype.unlistenImageChange = function (listener) {\n        abstract();\n    };\n    return ImageStyle;\n}());\nexport default ImageStyle;\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/style/RegularShape\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport ImageState from '../ImageState.js';\nimport { defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit } from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n */\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {CanvasLineCap} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {CanvasLineJoin} lineJoin\n * @property {number} miterLimit\n */\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nvar RegularShape = /** @class */ (function (_super) {\n    __extends(RegularShape, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function RegularShape(options) {\n        var _this = this;\n        /**\n         * @type {boolean}\n         */\n        var rotateWithView = options.rotateWithView !== undefined ?\n            options.rotateWithView : false;\n        _this = _super.call(this, {\n            opacity: 1,\n            rotateWithView: rotateWithView,\n            rotation: options.rotation !== undefined ? options.rotation : 0,\n            scale: 1,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n        }) || this;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.canvas_ = null;\n        /**\n         * @private\n         * @type {HTMLCanvasElement}\n         */\n        _this.hitDetectionCanvas_ = null;\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        _this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.origin_ = [0, 0];\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.points_ = options.points;\n        /**\n         * @protected\n         * @type {number}\n         */\n        _this.radius_ = options.radius !== undefined ? options.radius : options.radius1;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.radius2_ = options.radius2;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.angle_ = options.angle !== undefined ? options.angle : 0;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        _this.anchor_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.size_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.imageSize_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        _this.hitDetectionImageSize_ = null;\n        _this.render();\n        return _this;\n    }\n    /**\n     * Clones the style.\n     * @return {RegularShape} The cloned style.\n     * @api\n     */\n    RegularShape.prototype.clone = function () {\n        var style = new RegularShape({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            points: this.getPoints(),\n            radius: this.getRadius(),\n            radius2: this.getRadius2(),\n            angle: this.getAngle(),\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            rotation: this.getRotation(),\n            rotateWithView: this.getRotateWithView(),\n            displacement: this.getDisplacement().slice()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getAnchor = function () {\n        return this.anchor_;\n    };\n    /**\n     * Get the angle used in generating the shape.\n     * @return {number} Shape's rotation in radians.\n     * @api\n     */\n    RegularShape.prototype.getAngle = function () {\n        return this.angle_;\n    };\n    /**\n     * Get the fill style for the shape.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    RegularShape.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImage = function (pixelRatio) {\n        return this.hitDetectionCanvas_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getImage = function (pixelRatio) {\n        return this.canvas_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageSize = function () {\n        return this.imageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getHitDetectionImageSize = function () {\n        return this.hitDetectionImageSize_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.getImageState = function () {\n        return ImageState.LOADED;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getOrigin = function () {\n        return this.origin_;\n    };\n    /**\n     * Get the number of points for generating the shape.\n     * @return {number} Number of points for stars and regular polygons.\n     * @api\n     */\n    RegularShape.prototype.getPoints = function () {\n        return this.points_;\n    };\n    /**\n     * Get the (primary) radius for the shape.\n     * @return {number} Radius.\n     * @api\n     */\n    RegularShape.prototype.getRadius = function () {\n        return this.radius_;\n    };\n    /**\n     * Get the secondary radius for the shape.\n     * @return {number|undefined} Radius2.\n     * @api\n     */\n    RegularShape.prototype.getRadius2 = function () {\n        return this.radius2_;\n    };\n    /**\n     * @inheritDoc\n     * @api\n     */\n    RegularShape.prototype.getSize = function () {\n        return this.size_;\n    };\n    /**\n     * Get the stroke style for the shape.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    RegularShape.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.listenImageChange = function (listener) { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.load = function () { };\n    /**\n     * @inheritDoc\n     */\n    RegularShape.prototype.unlistenImageChange = function (listener) { };\n    /**\n     * @protected\n     */\n    RegularShape.prototype.render = function () {\n        var lineCap = defaultLineCap;\n        var lineJoin = defaultLineJoin;\n        var miterLimit = 0;\n        var lineDash = null;\n        var lineDashOffset = 0;\n        var strokeStyle;\n        var strokeWidth = 0;\n        if (this.stroke_) {\n            strokeStyle = this.stroke_.getColor();\n            if (strokeStyle === null) {\n                strokeStyle = defaultStrokeStyle;\n            }\n            strokeStyle = asColorLike(strokeStyle);\n            strokeWidth = this.stroke_.getWidth();\n            if (strokeWidth === undefined) {\n                strokeWidth = defaultLineWidth;\n            }\n            lineDash = this.stroke_.getLineDash();\n            lineDashOffset = this.stroke_.getLineDashOffset();\n            lineJoin = this.stroke_.getLineJoin();\n            if (lineJoin === undefined) {\n                lineJoin = defaultLineJoin;\n            }\n            lineCap = this.stroke_.getLineCap();\n            if (lineCap === undefined) {\n                lineCap = defaultLineCap;\n            }\n            miterLimit = this.stroke_.getMiterLimit();\n            if (miterLimit === undefined) {\n                miterLimit = defaultMiterLimit;\n            }\n        }\n        var size = 2 * (this.radius_ + strokeWidth) + 1;\n        var renderOptions = {\n            strokeStyle: strokeStyle,\n            strokeWidth: strokeWidth,\n            size: size,\n            lineCap: lineCap,\n            lineDash: lineDash,\n            lineDashOffset: lineDashOffset,\n            lineJoin: lineJoin,\n            miterLimit: miterLimit\n        };\n        var context = createCanvasContext2D(size, size);\n        this.canvas_ = context.canvas;\n        // canvas.width and height are rounded to the closest integer\n        size = this.canvas_.width;\n        var imageSize = size;\n        var displacement = this.getDisplacement();\n        this.draw_(renderOptions, context, 0, 0);\n        this.createHitDetectionCanvas_(renderOptions);\n        this.anchor_ = [size / 2 - displacement[0], size / 2 + displacement[1]];\n        this.size_ = [size, size];\n        this.imageSize_ = [imageSize, imageSize];\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The rendering context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.draw_ = function (renderOptions, context, x, y) {\n        var i, angle0, radiusC;\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            if (color === null) {\n                color = defaultFillStyle;\n            }\n            context.fillStyle = asColorLike(color);\n            context.fill();\n        }\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (context.setLineDash && renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.lineCap = renderOptions.lineCap;\n            context.lineJoin = renderOptions.lineJoin;\n            context.miterLimit = renderOptions.miterLimit;\n            context.stroke();\n        }\n        context.closePath();\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     */\n    RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n        this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n        this.hitDetectionCanvas_ = this.canvas_;\n        if (this.fill_) {\n            var color = this.fill_.getColor();\n            // determine if fill is transparent (or pattern or gradient)\n            var opacity = 0;\n            if (typeof color === 'string') {\n                color = asArray(color);\n            }\n            if (color === null) {\n                opacity = 1;\n            }\n            else if (Array.isArray(color)) {\n                opacity = color.length === 4 ? color[3] : 1;\n            }\n            if (opacity === 0) {\n                // if a transparent fill style is set, create an extra hit-detection image\n                // with a default fill style\n                var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n                this.hitDetectionCanvas_ = context.canvas;\n                this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n            }\n        }\n    };\n    /**\n     * @private\n     * @param {RenderOptions} renderOptions Render options.\n     * @param {CanvasRenderingContext2D} context The context.\n     * @param {number} x The origin for the symbol (x).\n     * @param {number} y The origin for the symbol (y).\n     */\n    RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context, x, y) {\n        // reset transform\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        // then move to (x, y)\n        context.translate(x, y);\n        context.beginPath();\n        var points = this.points_;\n        if (points === Infinity) {\n            context.arc(renderOptions.size / 2, renderOptions.size / 2, this.radius_, 0, 2 * Math.PI, true);\n        }\n        else {\n            var radius2 = (this.radius2_ !== undefined) ? this.radius2_\n                : this.radius_;\n            if (radius2 !== this.radius_) {\n                points = 2 * points;\n            }\n            var i = void 0, radiusC = void 0, angle0 = void 0;\n            for (i = 0; i <= points; i++) {\n                angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n                radiusC = i % 2 === 0 ? this.radius_ : radius2;\n                context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0), renderOptions.size / 2 + radiusC * Math.sin(angle0));\n            }\n        }\n        context.fillStyle = defaultFillStyle;\n        context.fill();\n        if (this.stroke_) {\n            context.strokeStyle = renderOptions.strokeStyle;\n            context.lineWidth = renderOptions.strokeWidth;\n            if (renderOptions.lineDash) {\n                context.setLineDash(renderOptions.lineDash);\n                context.lineDashOffset = renderOptions.lineDashOffset;\n            }\n            context.stroke();\n        }\n        context.closePath();\n    };\n    return RegularShape;\n}(ImageStyle));\nexport default RegularShape;\n//# sourceMappingURL=RegularShape.js.map","/**\n * @module ol/style/Circle\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n */\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nvar CircleStyle = /** @class */ (function (_super) {\n    __extends(CircleStyle, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function CircleStyle(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            points: Infinity,\n            fill: options.fill,\n            radius: options.radius,\n            stroke: options.stroke,\n            displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n        }) || this;\n        return _this;\n    }\n    /**\n    * Clones the style.\n    * @return {CircleStyle} The cloned style.\n    * @override\n    * @api\n    */\n    CircleStyle.prototype.clone = function () {\n        var style = new CircleStyle({\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            radius: this.getRadius(),\n            displacement: this.getDisplacement().slice()\n        });\n        style.setOpacity(this.getOpacity());\n        style.setScale(this.getScale());\n        return style;\n    };\n    /**\n     * Set the circle radius.\n     *\n     * @param {number} radius Circle radius.\n     * @api\n     */\n    CircleStyle.prototype.setRadius = function (radius) {\n        this.radius_ = radius;\n        this.render();\n    };\n    return CircleStyle;\n}(RegularShape));\nexport default CircleStyle;\n//# sourceMappingURL=Circle.js.map","/**\n * @module ol/style/Fill\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Fill(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n    }\n    /**\n     * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n     * @return {Fill} The cloned style.\n     * @api\n     */\n    Fill.prototype.clone = function () {\n        var color = this.getColor();\n        return new Fill({\n            color: Array.isArray(color) ? color.slice() : color || undefined\n        });\n    };\n    /**\n     * Get the fill color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Fill.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Fill.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    return Fill;\n}());\nexport default Fill;\n//# sourceMappingURL=Fill.js.map","/**\n * @module ol/style/Stroke\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function Stroke(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n         */\n        this.color_ = options.color !== undefined ? options.color : null;\n        /**\n         * @private\n         * @type {CanvasLineCap|undefined}\n         */\n        this.lineCap_ = options.lineCap;\n        /**\n         * @private\n         * @type {Array<number>}\n         */\n        this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.lineDashOffset_ = options.lineDashOffset;\n        /**\n         * @private\n         * @type {CanvasLineJoin|undefined}\n         */\n        this.lineJoin_ = options.lineJoin;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.miterLimit_ = options.miterLimit;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.width_ = options.width;\n    }\n    /**\n     * Clones the style.\n     * @return {Stroke} The cloned style.\n     * @api\n     */\n    Stroke.prototype.clone = function () {\n        var color = this.getColor();\n        return new Stroke({\n            color: Array.isArray(color) ? color.slice() : color || undefined,\n            lineCap: this.getLineCap(),\n            lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n            lineDashOffset: this.getLineDashOffset(),\n            lineJoin: this.getLineJoin(),\n            miterLimit: this.getMiterLimit(),\n            width: this.getWidth()\n        });\n    };\n    /**\n     * Get the stroke color.\n     * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n     * @api\n     */\n    Stroke.prototype.getColor = function () {\n        return this.color_;\n    };\n    /**\n     * Get the line cap type for the stroke.\n     * @return {CanvasLineCap|undefined} Line cap.\n     * @api\n     */\n    Stroke.prototype.getLineCap = function () {\n        return this.lineCap_;\n    };\n    /**\n     * Get the line dash style for the stroke.\n     * @return {Array<number>} Line dash.\n     * @api\n     */\n    Stroke.prototype.getLineDash = function () {\n        return this.lineDash_;\n    };\n    /**\n     * Get the line dash offset for the stroke.\n     * @return {number|undefined} Line dash offset.\n     * @api\n     */\n    Stroke.prototype.getLineDashOffset = function () {\n        return this.lineDashOffset_;\n    };\n    /**\n     * Get the line join type for the stroke.\n     * @return {CanvasLineJoin|undefined} Line join.\n     * @api\n     */\n    Stroke.prototype.getLineJoin = function () {\n        return this.lineJoin_;\n    };\n    /**\n     * Get the miter limit for the stroke.\n     * @return {number|undefined} Miter limit.\n     * @api\n     */\n    Stroke.prototype.getMiterLimit = function () {\n        return this.miterLimit_;\n    };\n    /**\n     * Get the stroke width.\n     * @return {number|undefined} Width.\n     * @api\n     */\n    Stroke.prototype.getWidth = function () {\n        return this.width_;\n    };\n    /**\n     * Set the color.\n     *\n     * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n     * @api\n     */\n    Stroke.prototype.setColor = function (color) {\n        this.color_ = color;\n    };\n    /**\n     * Set the line cap.\n     *\n     * @param {CanvasLineCap|undefined} lineCap Line cap.\n     * @api\n     */\n    Stroke.prototype.setLineCap = function (lineCap) {\n        this.lineCap_ = lineCap;\n    };\n    /**\n     * Set the line dash.\n     *\n     * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n     * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n     * property will have no visual effect in these browsers.\n     *\n     * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n     *\n     * @param {Array<number>} lineDash Line dash.\n     * @api\n     */\n    Stroke.prototype.setLineDash = function (lineDash) {\n        this.lineDash_ = lineDash;\n    };\n    /**\n     * Set the line dash offset.\n     *\n     * @param {number|undefined} lineDashOffset Line dash offset.\n     * @api\n     */\n    Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n        this.lineDashOffset_ = lineDashOffset;\n    };\n    /**\n     * Set the line join.\n     *\n     * @param {CanvasLineJoin|undefined} lineJoin Line join.\n     * @api\n     */\n    Stroke.prototype.setLineJoin = function (lineJoin) {\n        this.lineJoin_ = lineJoin;\n    };\n    /**\n     * Set the miter limit.\n     *\n     * @param {number|undefined} miterLimit Miter limit.\n     * @api\n     */\n    Stroke.prototype.setMiterLimit = function (miterLimit) {\n        this.miterLimit_ = miterLimit;\n    };\n    /**\n     * Set the width.\n     *\n     * @param {number|undefined} width Width.\n     * @api\n     */\n    Stroke.prototype.setWidth = function (width) {\n        this.width_ = width;\n    };\n    return Stroke;\n}());\nexport default Stroke;\n//# sourceMappingURL=Stroke.js.map","/**\n * @module ol/style/Style\n */\nimport { assert } from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>)} StyleFunction\n */\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n *\n * @api\n */\nvar Style = /** @class */ (function () {\n    /**\n     * @param {Options=} opt_options Style options.\n     */\n    function Style(opt_options) {\n        var options = opt_options || {};\n        /**\n         * @private\n         * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n         */\n        this.geometry_ = null;\n        /**\n         * @private\n         * @type {!GeometryFunction}\n         */\n        this.geometryFunction_ = defaultGeometryFunction;\n        if (options.geometry !== undefined) {\n            this.setGeometry(options.geometry);\n        }\n        /**\n         * @private\n         * @type {import(\"./Fill.js\").default}\n         */\n        this.fill_ = options.fill !== undefined ? options.fill : null;\n        /**\n           * @private\n           * @type {import(\"./Image.js\").default}\n           */\n        this.image_ = options.image !== undefined ? options.image : null;\n        /**\n         * @private\n         * @type {RenderFunction|null}\n         */\n        this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n        /**\n         * @private\n         * @type {import(\"./Stroke.js\").default}\n         */\n        this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n        /**\n         * @private\n         * @type {import(\"./Text.js\").default}\n         */\n        this.text_ = options.text !== undefined ? options.text : null;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zIndex_ = options.zIndex;\n    }\n    /**\n     * Clones the style.\n     * @return {Style} The cloned style.\n     * @api\n     */\n    Style.prototype.clone = function () {\n        var geometry = this.getGeometry();\n        if (geometry && typeof geometry === 'object') {\n            geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n        }\n        return new Style({\n            geometry: geometry,\n            fill: this.getFill() ? this.getFill().clone() : undefined,\n            image: this.getImage() ? this.getImage().clone() : undefined,\n            stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n            text: this.getText() ? this.getText().clone() : undefined,\n            zIndex: this.getZIndex()\n        });\n    };\n    /**\n     * Get the custom renderer function that was configured with\n     * {@link #setRenderer} or the `renderer` constructor option.\n     * @return {RenderFunction|null} Custom renderer function.\n     * @api\n     */\n    Style.prototype.getRenderer = function () {\n        return this.renderer_;\n    };\n    /**\n     * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n     * and `image` options of the style will be ignored.\n     * @param {RenderFunction|null} renderer Custom renderer function.\n     * @api\n     */\n    Style.prototype.setRenderer = function (renderer) {\n        this.renderer_ = renderer;\n    };\n    /**\n     * Get the geometry to be rendered.\n     * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     * Feature property or geometry or function that returns the geometry that will\n     * be rendered with this style.\n     * @api\n     */\n    Style.prototype.getGeometry = function () {\n        return this.geometry_;\n    };\n    /**\n     * Get the function used to generate a geometry for rendering.\n     * @return {!GeometryFunction} Function that is called with a feature\n     * and returns the geometry to render instead of the feature's geometry.\n     * @api\n     */\n    Style.prototype.getGeometryFunction = function () {\n        return this.geometryFunction_;\n    };\n    /**\n     * Get the fill style.\n     * @return {import(\"./Fill.js\").default} Fill style.\n     * @api\n     */\n    Style.prototype.getFill = function () {\n        return this.fill_;\n    };\n    /**\n     * Set the fill style.\n     * @param {import(\"./Fill.js\").default} fill Fill style.\n     * @api\n     */\n    Style.prototype.setFill = function (fill) {\n        this.fill_ = fill;\n    };\n    /**\n     * Get the image style.\n     * @return {import(\"./Image.js\").default} Image style.\n     * @api\n     */\n    Style.prototype.getImage = function () {\n        return this.image_;\n    };\n    /**\n     * Set the image style.\n     * @param {import(\"./Image.js\").default} image Image style.\n     * @api\n     */\n    Style.prototype.setImage = function (image) {\n        this.image_ = image;\n    };\n    /**\n     * Get the stroke style.\n     * @return {import(\"./Stroke.js\").default} Stroke style.\n     * @api\n     */\n    Style.prototype.getStroke = function () {\n        return this.stroke_;\n    };\n    /**\n     * Set the stroke style.\n     * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n     * @api\n     */\n    Style.prototype.setStroke = function (stroke) {\n        this.stroke_ = stroke;\n    };\n    /**\n     * Get the text style.\n     * @return {import(\"./Text.js\").default} Text style.\n     * @api\n     */\n    Style.prototype.getText = function () {\n        return this.text_;\n    };\n    /**\n     * Set the text style.\n     * @param {import(\"./Text.js\").default} text Text style.\n     * @api\n     */\n    Style.prototype.setText = function (text) {\n        this.text_ = text;\n    };\n    /**\n     * Get the z-index for the style.\n     * @return {number|undefined} ZIndex.\n     * @api\n     */\n    Style.prototype.getZIndex = function () {\n        return this.zIndex_;\n    };\n    /**\n     * Set a geometry that is rendered instead of the feature's geometry.\n     *\n     * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n     *     Feature property or geometry or function returning a geometry to render\n     *     for this style.\n     * @api\n     */\n    Style.prototype.setGeometry = function (geometry) {\n        if (typeof geometry === 'function') {\n            this.geometryFunction_ = geometry;\n        }\n        else if (typeof geometry === 'string') {\n            this.geometryFunction_ = function (feature) {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry)));\n            };\n        }\n        else if (!geometry) {\n            this.geometryFunction_ = defaultGeometryFunction;\n        }\n        else if (geometry !== undefined) {\n            this.geometryFunction_ = function () {\n                return (\n                /** @type {import(\"../geom/Geometry.js\").default} */ (geometry));\n            };\n        }\n        this.geometry_ = geometry;\n    };\n    /**\n     * Set the z-index.\n     *\n     * @param {number|undefined} zIndex ZIndex.\n     * @api\n     */\n    Style.prototype.setZIndex = function (zIndex) {\n        this.zIndex_ = zIndex;\n    };\n    return Style;\n}());\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n    var styleFunction;\n    if (typeof obj === 'function') {\n        styleFunction = obj;\n    }\n    else {\n        /**\n         * @type {Array<Style>}\n         */\n        var styles_1;\n        if (Array.isArray(obj)) {\n            styles_1 = obj;\n        }\n        else {\n            assert(typeof /** @type {?} */ (obj).getZIndex === 'function', 41); // Expected an `Style` or an array of `Style`\n            var style = /** @type {Style} */ (obj);\n            styles_1 = [style];\n        }\n        styleFunction = function () {\n            return styles_1;\n        };\n    }\n    return styleFunction;\n}\n/**\n * @type {Array<Style>}\n */\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n    // We don't use an immediately-invoked function\n    // and a closure so we don't get an error at script evaluation time in\n    // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n    // canvas.getContext('2d') at construction time, which will cause an.error\n    // in such browsers.)\n    if (!defaultStyles) {\n        var fill = new Fill({\n            color: 'rgba(255,255,255,0.4)'\n        });\n        var stroke = new Stroke({\n            color: '#3399CC',\n            width: 1.25\n        });\n        defaultStyles = [\n            new Style({\n                image: new CircleStyle({\n                    fill: fill,\n                    stroke: stroke,\n                    radius: 5\n                }),\n                fill: fill,\n                stroke: stroke\n            })\n        ];\n    }\n    return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n    /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n    var styles = {};\n    var white = [255, 255, 255, 1];\n    var blue = [0, 153, 255, 1];\n    var width = 3;\n    styles[GeometryType.POLYGON] = [\n        new Style({\n            fill: new Fill({\n                color: [255, 255, 255, 0.5]\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_POLYGON] =\n        styles[GeometryType.POLYGON];\n    styles[GeometryType.LINE_STRING] = [\n        new Style({\n            stroke: new Stroke({\n                color: white,\n                width: width + 2\n            })\n        }),\n        new Style({\n            stroke: new Stroke({\n                color: blue,\n                width: width\n            })\n        })\n    ];\n    styles[GeometryType.MULTI_LINE_STRING] =\n        styles[GeometryType.LINE_STRING];\n    styles[GeometryType.CIRCLE] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n    styles[GeometryType.POINT] = [\n        new Style({\n            image: new CircleStyle({\n                radius: width * 2,\n                fill: new Fill({\n                    color: blue\n                }),\n                stroke: new Stroke({\n                    color: white,\n                    width: width / 2\n                })\n            }),\n            zIndex: Infinity\n        })\n    ];\n    styles[GeometryType.MULTI_POINT] =\n        styles[GeometryType.POINT];\n    styles[GeometryType.GEOMETRY_COLLECTION] =\n        styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n    return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n    return feature.getGeometry();\n}\nexport default Style;\n//# sourceMappingURL=Style.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/BaseVector\n */\nimport Layer from './Layer.js';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction } from '../style/Style.js';\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n */\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n    RENDER_ORDER: 'renderOrder'\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @extends {Layer<VectorSourceType>}\n * @api\n */\nvar BaseVectorLayer = /** @class */ (function (_super) {\n    __extends(BaseVectorLayer, _super);\n    /**\n     * @param {Options=} opt_options Options.\n     */\n    function BaseVectorLayer(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var baseOptions = assign({}, options);\n        delete baseOptions.style;\n        delete baseOptions.renderBuffer;\n        delete baseOptions.updateWhileAnimating;\n        delete baseOptions.updateWhileInteracting;\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.renderBuffer_ = options.renderBuffer !== undefined ?\n            options.renderBuffer : 100;\n        /**\n         * User provided style.\n         * @type {import(\"../style/Style.js\").StyleLike}\n         * @private\n         */\n        _this.style_ = null;\n        /**\n         * Style function for use within the library.\n         * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n         * @private\n         */\n        _this.styleFunction_ = undefined;\n        _this.setStyle(options.style);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n            options.updateWhileAnimating : false;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n            options.updateWhileInteracting : false;\n        return _this;\n    }\n    /**\n     * @return {boolean} Declutter.\n     */\n    BaseVectorLayer.prototype.getDeclutter = function () {\n        return this.declutter_;\n    };\n    /**\n     * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n     * that resolves with an array of features. The array will either contain the topmost feature\n     * when a hit was detected, or it will be empty.\n     *\n     * The hit detection algorithm used for this method is optimized for performance, but is less\n     * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n     * is not considered, and icons are only represented by their bounding box instead of the exact\n     * image.\n     *\n     * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n     * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n     * @api\n     */\n    BaseVectorLayer.prototype.getFeatures = function (pixel) {\n        return _super.prototype.getFeatures.call(this, pixel);\n    };\n    /**\n     * @return {number|undefined} Render buffer.\n     */\n    BaseVectorLayer.prototype.getRenderBuffer = function () {\n        return this.renderBuffer_;\n    };\n    /**\n     * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n     *     order.\n     */\n    BaseVectorLayer.prototype.getRenderOrder = function () {\n        return (\n        /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER)));\n    };\n    /**\n     * Get the style for features.  This returns whatever was passed to the `style`\n     * option at construction or to the `setStyle` method.\n     * @return {import(\"../style/Style.js\").StyleLike}\n     *     Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * Get the style function.\n     * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n     * @api\n     */\n    BaseVectorLayer.prototype.getStyleFunction = function () {\n        return this.styleFunction_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     animating.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n        return this.updateWhileAnimating_;\n    };\n    /**\n     * @return {boolean} Whether the rendered layer should be updated while\n     *     interacting.\n     */\n    BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n        return this.updateWhileInteracting_;\n    };\n    /**\n     * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n     *     Render order.\n     */\n    BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n        this.set(Property.RENDER_ORDER, renderOrder);\n    };\n    /**\n     * Set the style for features.  This can be a single style object, an array\n     * of styles, or a function that takes a feature and resolution and returns\n     * an array of styles. If it is `undefined` the default style is used. If\n     * it is `null` the layer has no style (a `null` style), so only features\n     * that have their own styles will be rendered in the layer. See\n     * {@link module:ol/style} for information on the default style.\n     * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n     * @api\n     */\n    BaseVectorLayer.prototype.setStyle = function (style) {\n        this.style_ = style !== undefined ? style : createDefaultStyle;\n        this.styleFunction_ = style === null ?\n            undefined : toStyleFunction(this.style_);\n        this.changed();\n    };\n    return BaseVectorLayer;\n}(Layer));\nexport default BaseVectorLayer;\n//# sourceMappingURL=BaseVector.js.map","/**\n * @module ol/source/VectorEventType\n */\n/**\n * @enum {string}\n */\nexport default {\n    /**\n     * Triggered when a feature is added to the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n     * @api\n     */\n    ADDFEATURE: 'addfeature',\n    /**\n     * Triggered when a feature is updated.\n     * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n     * @api\n     */\n    CHANGEFEATURE: 'changefeature',\n    /**\n     * Triggered when the clear method is called on the source.\n     * @event module:ol/source/Vector.VectorSourceEvent#clear\n     * @api\n     */\n    CLEAR: 'clear',\n    /**\n     * Triggered when a feature is removed from the source.\n     * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n     * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n     * @api\n     */\n    REMOVEFEATURE: 'removefeature'\n};\n//# sourceMappingURL=VectorEventType.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/renderer/webgl/PointsLayer\n */\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport { ARRAY_BUFFER, DYNAMIC_DRAW, ELEMENT_ARRAY_BUFFER } from '../../webgl.js';\nimport { AttributeType, DefaultUniform } from '../../webgl/Helper.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport WebGLLayerRenderer, { colorDecodeId, colorEncodeId, WebGLWorkerMessageType } from './Layer.js';\nimport ViewHint from '../../ViewHint.js';\nimport { buffer, createEmpty, equals } from '../../extent.js';\nimport { apply as applyTransform, create as createTransform, makeInverse as makeInverseTransform, multiply as multiplyTransform } from '../../transform.js';\nimport { create as createWebGLWorker } from '../../worker/webgl.js';\nimport { getUid } from '../../util.js';\nimport WebGLRenderTarget from '../../webgl/RenderTarget.js';\nimport { assert } from '../../asserts.js';\nimport BaseVector from '../../layer/BaseVector.js';\nimport { listen, unlistenByKey } from '../../events.js';\nimport VectorEventType from '../../source/VectorEventType.js';\n/**\n * @typedef {Object} CustomAttribute A description of a custom attribute to be passed on to the GPU, with a value different\n * for each feature.\n * @property {string} name Attribute name.\n * @property {function(import(\"../../Feature\").default, Object<string, *>):number} callback This callback computes the numerical value of the\n * attribute for a given feature (properties are available as 2nd arg for quicker access).\n */\n/**\n * @typedef {Object} FeatureCacheItem Object that holds a reference to a feature, its geometry and properties. Used to optimize\n * rebuildBuffers by accessing these objects quicker.\n * @property {import(\"../../Feature\").default} feature Feature\n * @property {Object<string, *>} properties Feature properties\n * @property {import(\"../../geom\").Geometry} geometry Feature geometry\n */\n/**\n * @typedef {Object} Options\n * @property {Array<CustomAttribute>} [attributes] These attributes will be read from the features in the source and then\n * passed to the GPU. The `name` property of each attribute will serve as its identifier:\n *  * In the vertex shader as an `attribute` by prefixing it with `a_`\n *  * In the fragment shader as a `varying` by prefixing it with `v_`\n * Please note that these can only be numerical values.\n * @property {string} vertexShader Vertex shader source, mandatory.\n * @property {string} fragmentShader Fragment shader source, mandatory.\n * @property {string} [hitVertexShader] Vertex shader source for hit detection rendering.\n * @property {string} [hitFragmentShader] Fragment shader source for hit detection rendering.\n * @property {Object.<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * Please note that `u_texture` is reserved for the main texture slot.\n * @property {Array<import(\"./Layer\").PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n/**\n * @classdesc\n * WebGL vector renderer optimized for points.\n * All features will be rendered as quads (two triangles forming a square). New data will be flushed to the GPU\n * every time the vector source changes.\n *\n * You need to provide vertex and fragment shaders for rendering. This can be done using\n * {@link module:ol/webgl/ShaderBuilder} utilities. These shaders shall expect a `a_position` attribute\n * containing the screen-space projected center of the quad, as well as a `a_index` attribute\n * whose value (0, 1, 2 or 3) indicates which quad vertex is currently getting processed (see structure below).\n *\n * To include variable attributes in the shaders, you need to declare them using the `attributes` property of\n * the options object like so:\n * ```js\n * new WebGLPointsLayerRenderer(layer, {\n *   attributes: [\n *     {\n *       name: 'size',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *     {\n *       name: 'weight',\n *       callback: function(feature) {\n *         // compute something with the feature\n *       }\n *     },\n *   ],\n *   vertexShader:\n *     // shader using attribute a_weight and a_size\n *   fragmentShader:\n *     // shader using varying v_weight and v_size\n * ```\n *\n * To enable hit detection, you must as well provide dedicated shaders using the `hitVertexShader`\n * and `hitFragmentShader` properties. These shall expect the `a_hitColor` attribute to contain\n * the final color that will have to be output for hit detection to work.\n *\n * The following uniform is used for the main texture: `u_texture`.\n *\n * Please note that the main shader output should have premultiplied alpha, otherwise visual anomalies may occur.\n *\n * Points are rendered as quads with the following structure:\n *\n * ```\n *   (u0, v1)      (u1, v1)\n *  [3]----------[2]\n *   |`           |\n *   |  `         |\n *   |    `       |\n *   |      `     |\n *   |        `   |\n *   |          ` |\n *  [0]----------[1]\n *   (u0, v0)      (u1, v0)\n *  ```\n *\n * This uses {@link module:ol/webgl/Helper~WebGLHelper} internally.\n *\n * @api\n */\nvar WebGLPointsLayerRenderer = /** @class */ (function (_super) {\n    __extends(WebGLPointsLayerRenderer, _super);\n    /**\n     * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n     * @param {Options} options Options.\n     */\n    function WebGLPointsLayerRenderer(layer, options) {\n        var _this = this;\n        var uniforms = options.uniforms || {};\n        var projectionMatrixTransform = createTransform();\n        uniforms[DefaultUniform.PROJECTION_MATRIX] = projectionMatrixTransform;\n        _this = _super.call(this, layer, {\n            uniforms: uniforms,\n            postProcesses: options.postProcesses\n        }) || this;\n        _this.sourceRevision_ = -1;\n        _this.verticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.hitVerticesBuffer_ = new WebGLArrayBuffer(ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.indicesBuffer_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, DYNAMIC_DRAW);\n        _this.program_ = _this.helper.getProgram(options.fragmentShader, options.vertexShader);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.hitDetectionEnabled_ = options.hitFragmentShader && options.hitVertexShader ? true : false;\n        _this.hitProgram_ = _this.hitDetectionEnabled_ && _this.helper.getProgram(options.hitFragmentShader, options.hitVertexShader);\n        var customAttributes = options.attributes ?\n            options.attributes.map(function (attribute) {\n                return {\n                    name: 'a_' + attribute.name,\n                    size: 1,\n                    type: AttributeType.FLOAT\n                };\n            }) : [];\n        /**\n         * A list of attributes used by the renderer. By default only the position and\n         * index of the vertex (0 to 3) are required.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.attributes = [{\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT\n            }].concat(customAttributes);\n        /**\n         * A list of attributes used for hit detection.\n         * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n         */\n        _this.hitDetectionAttributes = [{\n                name: 'a_position',\n                size: 2,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_index',\n                size: 1,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_hitColor',\n                size: 4,\n                type: AttributeType.FLOAT\n            }, {\n                name: 'a_featureUid',\n                size: 1,\n                type: AttributeType.FLOAT\n            }].concat(customAttributes);\n        _this.customAttributes = options.attributes ? options.attributes : [];\n        _this.previousExtent_ = createEmpty();\n        /**\n         * This transform is updated on every frame and is the composition of:\n         * - invert of the world->screen transform that was used when rebuilding buffers (see `this.renderTransform_`)\n         * - current world->screen transform\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.currentTransform_ = projectionMatrixTransform;\n        /**\n         * This transform is updated when buffers are rebuilt and converts world space coordinates to screen space\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.renderTransform_ = createTransform();\n        /**\n         * @type {import(\"../../transform.js\").Transform}\n         * @private\n         */\n        _this.invertRenderTransform_ = createTransform();\n        /**\n         * @type {Float32Array}\n         * @private\n         */\n        _this.renderInstructions_ = new Float32Array(0);\n        /**\n         * These instructions are used for hit detection\n         * @type {Float32Array}\n         * @private\n         */\n        _this.hitRenderInstructions_ = new Float32Array(0);\n        /**\n         * @type {WebGLRenderTarget}\n         * @private\n         */\n        _this.hitRenderTarget_ = _this.hitDetectionEnabled_ && new WebGLRenderTarget(_this.helper);\n        _this.worker_ = createWebGLWorker();\n        _this.worker_.addEventListener('message', function (event) {\n            var received = event.data;\n            if (received.type === WebGLWorkerMessageType.GENERATE_BUFFERS) {\n                var projectionTransform = received.projectionTransform;\n                if (received.hitDetection) {\n                    this.hitVerticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.hitVerticesBuffer_);\n                }\n                else {\n                    this.verticesBuffer_.fromArrayBuffer(received.vertexBuffer);\n                    this.helper.flushBufferData(this.verticesBuffer_);\n                }\n                this.indicesBuffer_.fromArrayBuffer(received.indexBuffer);\n                this.helper.flushBufferData(this.indicesBuffer_);\n                this.renderTransform_ = projectionTransform;\n                makeInverseTransform(this.invertRenderTransform_, this.renderTransform_);\n                if (received.hitDetection) {\n                    this.hitRenderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                else {\n                    this.renderInstructions_ = new Float32Array(event.data.renderInstructions);\n                }\n                this.getLayer().changed();\n            }\n        }.bind(_this));\n        /**\n         * This object will be updated when the source changes. Key is uid.\n         * @type {Object<string, FeatureCacheItem>}\n         * @private\n         */\n        _this.featureCache_ = {};\n        /**\n         * Amount of features in the cache.\n         * @type {number}\n         * @private\n         */\n        _this.featureCount_ = 0;\n        var source = _this.getLayer().getSource();\n        _this.sourceListenKeys_ = [\n            listen(source, VectorEventType.ADDFEATURE, _this.handleSourceFeatureAdded_, _this),\n            listen(source, VectorEventType.CHANGEFEATURE, _this.handleSourceFeatureChanged_, _this),\n            listen(source, VectorEventType.REMOVEFEATURE, _this.handleSourceFeatureDelete_, _this)\n        ];\n        source.forEachFeature(function (feature) {\n            this.featureCache_[getUid(feature)] = {\n                feature: feature,\n                properties: feature.getProperties(),\n                geometry: feature.getGeometry()\n            };\n            this.featureCount_++;\n        }.bind(_this));\n        return _this;\n    }\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureAdded_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry()\n        };\n        this.featureCount_++;\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureChanged_ = function (event) {\n        var feature = event.feature;\n        this.featureCache_[getUid(feature)] = {\n            feature: feature,\n            properties: feature.getProperties(),\n            geometry: feature.getGeometry()\n        };\n    };\n    /**\n     * @param {import(\"../../source/Vector.js\").VectorSourceEvent} event Event.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.handleSourceFeatureDelete_ = function (event) {\n        var feature = event.feature;\n        delete this.featureCache_[getUid(feature)];\n        this.featureCount_--;\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.renderFrame = function (frameState) {\n        var renderCount = this.indicesBuffer_.getSize();\n        this.helper.drawElements(0, renderCount);\n        this.helper.finalizeDraw(frameState);\n        var canvas = this.helper.getCanvas();\n        var layerState = frameState.layerStatesArray[frameState.layerIndex];\n        var opacity = layerState.opacity;\n        if (opacity !== parseFloat(canvas.style.opacity)) {\n            canvas.style.opacity = opacity;\n        }\n        if (this.hitDetectionEnabled_) {\n            this.renderHitDetection(frameState);\n            this.hitRenderTarget_.clearCachedData();\n        }\n        return canvas;\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.prepareFrame = function (frameState) {\n        var layer = this.getLayer();\n        var vectorSource = layer.getSource();\n        var viewState = frameState.viewState;\n        var viewNotMoving = !frameState.viewHints[ViewHint.ANIMATING] && !frameState.viewHints[ViewHint.INTERACTING];\n        var extentChanged = !equals(this.previousExtent_, frameState.extent);\n        var sourceChanged = this.sourceRevision_ < vectorSource.getRevision();\n        if (sourceChanged) {\n            this.sourceRevision_ = vectorSource.getRevision();\n        }\n        if (viewNotMoving && (extentChanged || sourceChanged)) {\n            var projection = viewState.projection;\n            var resolution = viewState.resolution;\n            var renderBuffer = layer instanceof BaseVector ? layer.getRenderBuffer() : 0;\n            var extent = buffer(frameState.extent, renderBuffer * resolution);\n            vectorSource.loadFeatures(extent, resolution, projection);\n            this.rebuildBuffers_(frameState);\n            this.previousExtent_ = frameState.extent.slice();\n        }\n        // apply the current projection transform with the invert of the one used to fill buffers\n        this.helper.makeProjectionTransform(frameState, this.currentTransform_);\n        multiplyTransform(this.currentTransform_, this.invertRenderTransform_);\n        this.helper.useProgram(this.program_);\n        this.helper.prepareDraw(frameState);\n        // write new data\n        this.helper.bindBuffer(this.verticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.attributes);\n        return true;\n    };\n    /**\n     * Rebuild internal webgl buffers based on current view extent; costly, should not be called too much\n     * @param {import(\"../../PluggableMap\").FrameState} frameState Frame state.\n     * @private\n     */\n    WebGLPointsLayerRenderer.prototype.rebuildBuffers_ = function (frameState) {\n        // saves the projection transform for the current frame state\n        var projectionTransform = createTransform();\n        this.helper.makeProjectionTransform(frameState, projectionTransform);\n        // here we anticipate the amount of render instructions that we well generate\n        // this can be done since we know that for normal render we only have x, y as base instructions,\n        // and x, y, r, g, b, a and featureUid for hit render instructions\n        // and we also know the amount of custom attributes to append to these\n        var totalInstructionsCount = (2 + this.customAttributes.length) * this.featureCount_;\n        if (!this.renderInstructions_ || this.renderInstructions_.length !== totalInstructionsCount) {\n            this.renderInstructions_ = new Float32Array(totalInstructionsCount);\n        }\n        if (this.hitDetectionEnabled_) {\n            var totalHitInstructionsCount = (7 + this.customAttributes.length) * this.featureCount_;\n            if (!this.hitRenderInstructions_ || this.hitRenderInstructions_.length !== totalHitInstructionsCount) {\n                this.hitRenderInstructions_ = new Float32Array(totalHitInstructionsCount);\n            }\n        }\n        // loop on features to fill the buffer\n        var featureCache, geometry;\n        var tmpCoords = [];\n        var tmpColor = [];\n        var renderIndex = 0;\n        var hitIndex = 0;\n        var hitColor;\n        for (var featureUid in this.featureCache_) {\n            featureCache = this.featureCache_[featureUid];\n            geometry = /** @type {import(\"../../geom\").Point} */ (featureCache.geometry);\n            if (!geometry || geometry.getType() !== GeometryType.POINT) {\n                continue;\n            }\n            tmpCoords[0] = geometry.getFlatCoordinates()[0];\n            tmpCoords[1] = geometry.getFlatCoordinates()[1];\n            applyTransform(projectionTransform, tmpCoords);\n            hitColor = colorEncodeId(hitIndex + 6, tmpColor);\n            this.renderInstructions_[renderIndex++] = tmpCoords[0];\n            this.renderInstructions_[renderIndex++] = tmpCoords[1];\n            // for hit detection, the feature uid is saved in the opacity value\n            // and the index of the opacity value is encoded in the color values\n            if (this.hitDetectionEnabled_) {\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[0];\n                this.hitRenderInstructions_[hitIndex++] = tmpCoords[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[0];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[1];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[2];\n                this.hitRenderInstructions_[hitIndex++] = hitColor[3];\n                this.hitRenderInstructions_[hitIndex++] = Number(featureUid);\n            }\n            // pushing custom attributes\n            var value = void 0;\n            for (var j = 0; j < this.customAttributes.length; j++) {\n                value = this.customAttributes[j].callback(featureCache.feature, featureCache.properties);\n                this.renderInstructions_[renderIndex++] = value;\n                if (this.hitDetectionEnabled_) {\n                    this.hitRenderInstructions_[hitIndex++] = value;\n                }\n            }\n        }\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        var message = {\n            type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n            renderInstructions: this.renderInstructions_.buffer,\n            customAttributesCount: this.customAttributes.length\n        };\n        // additional properties will be sent back as-is by the worker\n        message['projectionTransform'] = projectionTransform;\n        this.worker_.postMessage(message, [this.renderInstructions_.buffer]);\n        this.renderInstructions_ = null;\n        /** @type {import('./Layer').WebGLWorkerGenerateBuffersMessage} */\n        if (this.hitDetectionEnabled_) {\n            var hitMessage = {\n                type: WebGLWorkerMessageType.GENERATE_BUFFERS,\n                renderInstructions: this.hitRenderInstructions_.buffer,\n                customAttributesCount: 5 + this.customAttributes.length\n            };\n            hitMessage['projectionTransform'] = projectionTransform;\n            hitMessage['hitDetection'] = true;\n            this.worker_.postMessage(hitMessage, [this.hitRenderInstructions_.buffer]);\n            this.hitRenderInstructions_ = null;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n        assert(this.hitDetectionEnabled_, 66);\n        if (!this.hitRenderInstructions_) {\n            return;\n        }\n        var pixel = applyTransform(frameState.coordinateToPixelTransform, coordinate.slice());\n        var data = this.hitRenderTarget_.readPixel(pixel[0] / 2, pixel[1] / 2);\n        var color = [\n            data[0] / 255,\n            data[1] / 255,\n            data[2] / 255,\n            data[3] / 255\n        ];\n        var index = colorDecodeId(color);\n        var opacity = this.hitRenderInstructions_[index];\n        var uid = Math.floor(opacity).toString();\n        var source = this.getLayer().getSource();\n        var feature = source.getFeatureByUid(uid);\n        if (feature) {\n            return callback(feature, this.getLayer());\n        }\n    };\n    /**\n     * Render the hit detection data to the corresponding render target\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState current frame state\n     */\n    WebGLPointsLayerRenderer.prototype.renderHitDetection = function (frameState) {\n        // skip render entirely if vertex buffers not ready/generated yet\n        if (!this.hitVerticesBuffer_.getSize()) {\n            return;\n        }\n        this.hitRenderTarget_.setSize([\n            Math.floor(frameState.size[0] / 2),\n            Math.floor(frameState.size[1] / 2)\n        ]);\n        this.helper.useProgram(this.hitProgram_);\n        this.helper.prepareDrawToRenderTarget(frameState, this.hitRenderTarget_, true);\n        this.helper.bindBuffer(this.hitVerticesBuffer_);\n        this.helper.bindBuffer(this.indicesBuffer_);\n        this.helper.enableAttributes(this.hitDetectionAttributes);\n        var renderCount = this.indicesBuffer_.getSize();\n        this.helper.drawElements(0, renderCount);\n    };\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayerRenderer.prototype.disposeInternal = function () {\n        this.worker_.terminate();\n        this.layer_ = null;\n        this.sourceListenKeys_.forEach(function (key) {\n            unlistenByKey(key);\n        });\n        this.sourceListenKeys_ = null;\n        _super.prototype.disposeInternal.call(this);\n    };\n    return WebGLPointsLayerRenderer;\n}(WebGLLayerRenderer));\nexport default WebGLPointsLayerRenderer;\n//# sourceMappingURL=PointsLayer.js.map","/**\n * Operators and utilities used for style expressions\n * @module ol/style/expressions\n */\nimport { asArray, isStringColor } from '../color.js';\n/**\n * Base type used for literal style parameters; can be a number literal or the output of an operator,\n * which in turns takes {@link ExpressionValue} arguments.\n *\n * The following operators can be used:\n *\n * * Reading operators:\n *   * `['get', 'attributeName']` fetches a feature attribute (it will be prefixed by `a_` in the shader)\n *     Note: those will be taken from the attributes provided to the renderer\n *   * `['var', 'varName']` fetches a value from the style variables, or 0 if undefined\n *   * `['time']` returns the time in seconds since the creation of the layer\n *   * `['zoom']` returns the current zoom level\n *   * `['resolution']` returns the current resolution\n *\n * * Math operators:\n *   * `['*', value1, value2]` multiplies `value1` by `value2`\n *   * `['/', value1, value2]` divides `value1` by `value2`\n *   * `['+', value1, value2]` adds `value1` and `value2`\n *   * `['-', value1, value2]` subtracts `value2` from `value1`\n *   * `['clamp', value, low, high]` clamps `value` between `low` and `high`\n *   * `['%', value1, value2]` returns the result of `value1 % value2` (modulo)\n *   * `['^', value1, value2]` returns the value of `value1` raised to the `value2` power\n *\n * * Transform operators:\n *   * `['case', condition1, output1, ...conditionN, outputN, fallback]` selects the first output whose corresponding\n *     condition evaluates to `true`. If no match is found, returns the `fallback` value.\n *     All conditions should be `boolean`, output and fallback can be any kind.\n *   * `['match', input, match1, output1, ...matchN, outputN, fallback]` compares the `input` value against all\n *     provided `matchX` values, returning the output associated with the first valid match. If no match is found,\n *     returns the `fallback` value.\n *     `input` and `matchX` values must all be of the same type, and can be `number` or `string`. `outputX` and\n *     `fallback` values must be of the same type, and can be of any kind.\n *   * `['interpolate', interpolation, input, stop1, output1, ...stopN, outputN]` returns a value by interpolating between\n *     pairs of inputs and outputs; `interpolation` can either be `['linear']` or `['exponential', base]` where `base` is\n *     the rate of increase from stop A to stop B (i.e. power to which the interpolation ratio is raised); a value\n *     of 1 is equivalent to `['linear']`.\n *     `input` and `stopX` values must all be of type `number`. `outputX` values can be `number` or `color` values.\n *     Note: `input` will be clamped between `stop1` and `stopN`, meaning that all output values will be comprised\n *     between `output1` and `outputN`.\n *\n * * Logical operators:\n *   * `['<', value1, value2]` returns `true` if `value1` is strictly lower than `value2`, or `false` otherwise.\n *   * `['<=', value1, value2]` returns `true` if `value1` is lower than or equals `value2`, or `false` otherwise.\n *   * `['>', value1, value2]` returns `true` if `value1` is strictly greater than `value2`, or `false` otherwise.\n *   * `['>=', value1, value2]` returns `true` if `value1` is greater than or equals `value2`, or `false` otherwise.\n *   * `['==', value1, value2]` returns `true` if `value1` equals `value2`, or `false` otherwise.\n *   * `['!=', value1, value2]` returns `true` if `value1` does not equal `value2`, or `false` otherwise.\n *   * `['!', value1]` returns `false` if `value1` is `true` or greater than `0`, or `true` otherwise.\n *   * `['between', value1, value2, value3]` returns `true` if `value1` is contained between `value2` and `value3`\n *     (inclusively), or `false` otherwise.\n *\n * * Conversion operators:\n *   * `['array', value1, ...valueN]` creates a numerical array from `number` values; please note that the amount of\n *     values can currently only be 2, 3 or 4.\n *   * `['color', red, green, blue, alpha]` creates a `color` value from `number` values; the `alpha` parameter is\n *     optional; if not specified, it will be set to 1.\n *     Note: `red`, `green` and `blue` components must be values between 0 and 255; `alpha` between 0 and 1.\n *\n * Values can either be literals or another operator, as they will be evaluated recursively.\n * Literal values can be of the following types:\n * * `boolean`\n * * `number`\n * * `string`\n * * {@link module:ol/color~Color}\n *\n * @typedef {Array<*>|import(\"../color.js\").Color|string|number|boolean} ExpressionValue\n */\n/**\n * Possible inferred types from a given value or expression.\n * Note: these are binary flags.\n * @enum {number}\n */\nexport var ValueTypes = {\n    NUMBER: 1,\n    STRING: 2,\n    COLOR: 4,\n    BOOLEAN: 8,\n    NUMBER_ARRAY: 16,\n    ANY: 31,\n    NONE: 0\n};\n/**\n * An operator declaration must contain two methods: `getReturnType` which returns a type based on\n * the operator arguments, and `toGlsl` which returns a GLSL-compatible string.\n * Note: both methods can process arguments recursively.\n * @typedef {Object} Operator\n * @property {function(Array<ExpressionValue>): ValueTypes|number} getReturnType Returns one or several types\n * @property {function(ParsingContext, Array<ExpressionValue>, ValueTypes=): string} toGlsl Returns a GLSL-compatible string\n * Note: takes in an optional type hint as 3rd parameter\n */\n/**\n * Operator declarations\n * @type {Object<string, Operator>}\n */\nexport var Operators = {};\n/**\n * Returns the possible types for a given value (each type being a binary flag)\n * To test a value use e.g. `getValueType(v) & ValueTypes.BOOLEAN`\n * @param {ExpressionValue} value Value\n * @returns {ValueTypes|number} Type or types inferred from the value\n */\nexport function getValueType(value) {\n    if (typeof value === 'number') {\n        return ValueTypes.NUMBER;\n    }\n    if (typeof value === 'boolean') {\n        return ValueTypes.BOOLEAN;\n    }\n    if (typeof value === 'string') {\n        if (isStringColor(value)) {\n            return ValueTypes.COLOR | ValueTypes.STRING;\n        }\n        return ValueTypes.STRING;\n    }\n    if (!Array.isArray(value)) {\n        throw new Error(\"Unhandled value type: \" + JSON.stringify(value));\n    }\n    var valueArr = /** @type {Array<*>} */ (value);\n    var onlyNumbers = valueArr.every(function (v) {\n        return typeof v === 'number';\n    });\n    if (onlyNumbers) {\n        if (valueArr.length === 3 || valueArr.length === 4) {\n            return ValueTypes.COLOR | ValueTypes.NUMBER_ARRAY;\n        }\n        return ValueTypes.NUMBER_ARRAY;\n    }\n    if (typeof valueArr[0] !== 'string') {\n        throw new Error(\"Expected an expression operator but received: \" + JSON.stringify(valueArr));\n    }\n    var operator = Operators[valueArr[0]];\n    if (operator === undefined) {\n        throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(valueArr));\n    }\n    return operator.getReturnType(valueArr.slice(1));\n}\n/**\n * Checks if only one value type is enabled in the input number.\n * @param {ValueTypes|number} valueType Number containing value type binary flags\n * @return {boolean} True if only one type flag is enabled, false if zero or multiple\n */\nexport function isTypeUnique(valueType) {\n    return Math.log2(valueType) % 1 === 0;\n}\n/**\n * Context available during the parsing of an expression.\n * @typedef {Object} ParsingContext\n * @property {boolean} [inFragmentShader] If false, means the expression output should be made for a vertex shader\n * @property {Array<string>} variables List of variables used in the expression; contains **unprefixed names**\n * @property {Array<string>} attributes List of attributes used in the expression; contains **unprefixed names**\n * @property {Object<string, number>} stringLiteralsMap This object maps all encountered string values to a number\n */\n/**\n * Will return the number as a float with a dot separator, which is required by GLSL.\n * @param {number} v Numerical value.\n * @returns {string} The value as string.\n */\nexport function numberToGlsl(v) {\n    var s = v.toString();\n    return s.indexOf('.') === -1 ? s + '.0' : s;\n}\n/**\n * Will return the number array as a float with a dot separator, concatenated with ', '.\n * @param {Array<number>} array Numerical values array.\n * @returns {string} The array as a vector, e. g.: `vec3(1.0, 2.0, 3.0)`.\n */\nexport function arrayToGlsl(array) {\n    if (array.length < 2 || array.length > 4) {\n        throw new Error('`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.');\n    }\n    return \"vec\" + array.length + \"(\" + array.map(numberToGlsl).join(', ') + \")\";\n}\n/**\n * Will normalize and converts to string a `vec4` color array compatible with GLSL.\n * @param {string|import(\"../color.js\").Color} color Color either in string format or [r, g, b, a] array format,\n * with RGB components in the 0..255 range and the alpha component in the 0..1 range.\n * Note that the final array will always have 4 components.\n * @returns {string} The color expressed in the `vec4(1.0, 1.0, 1.0, 1.0)` form.\n */\nexport function colorToGlsl(color) {\n    var array = asArray(color).slice();\n    if (array.length < 4) {\n        array.push(1);\n    }\n    return arrayToGlsl(array.map(function (c, i) {\n        return i < 3 ? c / 255 : c;\n    }));\n}\n/**\n * Returns a stable equivalent number for the string literal.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @returns {number} Number equivalent\n */\nexport function getStringNumberEquivalent(context, string) {\n    if (context.stringLiteralsMap[string] === undefined) {\n        context.stringLiteralsMap[string] = Object.keys(context.stringLiteralsMap).length;\n    }\n    return context.stringLiteralsMap[string];\n}\n/**\n * Returns a stable equivalent number for the string literal, for use in shaders. This number is then\n * converted to be a GLSL-compatible string.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @returns {string} GLSL-compatible string containing a number\n */\nexport function stringToGlsl(context, string) {\n    return numberToGlsl(getStringNumberEquivalent(context, string));\n}\n/**\n * Recursively parses a style expression and outputs a GLSL-compatible string. Takes in a parsing context that\n * will be read and modified during the parsing operation.\n * @param {ParsingContext} context Parsing context\n * @param {ExpressionValue} value Value\n * @param {ValueTypes|number} [typeHint] Hint for the expected final type (can be several types combined)\n * @returns {string} GLSL-compatible output\n */\nexport function expressionToGlsl(context, value, typeHint) {\n    // operator\n    if (Array.isArray(value) && typeof value[0] === 'string') {\n        var operator = Operators[value[0]];\n        if (operator === undefined) {\n            throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(value));\n        }\n        return operator.toGlsl(context, value.slice(1), typeHint);\n    }\n    else if ((getValueType(value) & ValueTypes.NUMBER) > 0) {\n        return numberToGlsl(/** @type {number} */ (value));\n    }\n    else if ((getValueType(value) & ValueTypes.BOOLEAN) > 0) {\n        return value.toString();\n    }\n    else if (((getValueType(value) & ValueTypes.STRING) > 0) &&\n        (typeHint === undefined || typeHint == ValueTypes.STRING)) {\n        return stringToGlsl(context, value.toString());\n    }\n    else if (((getValueType(value) & ValueTypes.COLOR) > 0) &&\n        (typeHint === undefined || typeHint == ValueTypes.COLOR)) {\n        return colorToGlsl(/** @type {number[]|string} */ (value));\n    }\n    else if ((getValueType(value) & ValueTypes.NUMBER_ARRAY) > 0) {\n        return arrayToGlsl(/** @type {number[]} */ (value));\n    }\n}\nfunction assertNumber(value) {\n    if (!(getValueType(value) & ValueTypes.NUMBER)) {\n        throw new Error(\"A numeric value was expected, got \" + JSON.stringify(value) + \" instead\");\n    }\n}\nfunction assertNumbers(values) {\n    for (var i = 0; i < values.length; i++) {\n        assertNumber(values[i]);\n    }\n}\nfunction assertString(value) {\n    if (!(getValueType(value) & ValueTypes.STRING)) {\n        throw new Error(\"A string value was expected, got \" + JSON.stringify(value) + \" instead\");\n    }\n}\nfunction assertBoolean(value) {\n    if (!(getValueType(value) & ValueTypes.BOOLEAN)) {\n        throw new Error(\"A boolean value was expected, got \" + JSON.stringify(value) + \" instead\");\n    }\n}\nfunction assertArgsCount(args, count) {\n    if (args.length !== count) {\n        throw new Error(\"Exactly \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n    }\n}\nfunction assertArgsMinCount(args, count) {\n    if (args.length < count) {\n        throw new Error(\"At least \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n    }\n}\nfunction assertArgsMaxCount(args, count) {\n    if (args.length > count) {\n        throw new Error(\"At most \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n    }\n}\nfunction assertArgsEven(args) {\n    if (args.length % 2 !== 0) {\n        throw new Error(\"An even amount of arguments was expected, got \" + args + \" instead\");\n    }\n}\nfunction assertArgsOdd(args) {\n    if (args.length % 2 === 0) {\n        throw new Error(\"An even amount of arguments was expected, got \" + args + \" instead\");\n    }\n}\nfunction assertUniqueInferredType(args, types) {\n    if (!isTypeUnique(types)) {\n        throw new Error(\"Could not infer only one type from the following expression: \" + JSON.stringify(args));\n    }\n}\nOperators['get'] = {\n    getReturnType: function (args) {\n        return ValueTypes.ANY;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 1);\n        assertString(args[0]);\n        var value = args[0].toString();\n        if (context.attributes.indexOf(value) === -1) {\n            context.attributes.push(value);\n        }\n        var prefix = context.inFragmentShader ? 'v_' : 'a_';\n        return prefix + value;\n    }\n};\nOperators['var'] = {\n    getReturnType: function (args) {\n        return ValueTypes.ANY;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 1);\n        assertString(args[0]);\n        var value = args[0].toString();\n        if (context.variables.indexOf(value) === -1) {\n            context.variables.push(value);\n        }\n        return \"u_\" + value;\n    }\n};\nOperators['time'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 0);\n        return 'u_time';\n    }\n};\nOperators['zoom'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 0);\n        return 'u_zoom';\n    }\n};\nOperators['resolution'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 0);\n        return 'u_resolution';\n    }\n};\nOperators['*'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" * \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['/'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" / \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['+'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" + \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['-'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" - \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['clamp'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 3);\n        assertNumbers(args);\n        var min = expressionToGlsl(context, args[1]);\n        var max = expressionToGlsl(context, args[2]);\n        return \"clamp(\" + expressionToGlsl(context, args[0]) + \", \" + min + \", \" + max + \")\";\n    }\n};\nOperators['%'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"mod(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['^'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"pow(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['>'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" > \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['>='] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" >= \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['<'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" < \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nOperators['<='] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 2);\n        assertNumbers(args);\n        return \"(\" + expressionToGlsl(context, args[0]) + \" <= \" + expressionToGlsl(context, args[1]) + \")\";\n    }\n};\nfunction getEqualOperator(operator) {\n    return {\n        getReturnType: function (args) {\n            return ValueTypes.BOOLEAN;\n        },\n        toGlsl: function (context, args) {\n            assertArgsCount(args, 2);\n            // find common type\n            var type = ValueTypes.ANY;\n            for (var i = 0; i < args.length; i++) {\n                type = type & getValueType(args[i]);\n            }\n            if (type === 0) {\n                throw new Error(\"All arguments should be of compatible type, got \" + JSON.stringify(args) + \" instead\");\n            }\n            return \"(\" + expressionToGlsl(context, args[0], type) + \" \" + operator + \" \" + expressionToGlsl(context, args[1], type) + \")\";\n        }\n    };\n}\nOperators['=='] = getEqualOperator('==');\nOperators['!='] = getEqualOperator('!=');\nOperators['!'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 1);\n        assertBoolean(args[0]);\n        return \"(!\" + expressionToGlsl(context, args[0]) + \")\";\n    }\n};\nOperators['between'] = {\n    getReturnType: function (args) {\n        return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function (context, args) {\n        assertArgsCount(args, 3);\n        assertNumbers(args);\n        var min = expressionToGlsl(context, args[1]);\n        var max = expressionToGlsl(context, args[2]);\n        var value = expressionToGlsl(context, args[0]);\n        return \"(\" + value + \" >= \" + min + \" && \" + value + \" <= \" + max + \")\";\n    }\n};\nOperators['array'] = {\n    getReturnType: function (args) {\n        return ValueTypes.NUMBER_ARRAY;\n    },\n    toGlsl: function (context, args) {\n        assertArgsMinCount(args, 2);\n        assertArgsMaxCount(args, 4);\n        assertNumbers(args);\n        var parsedArgs = args.map(function (val) {\n            return expressionToGlsl(context, val, ValueTypes.NUMBER);\n        });\n        return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n    }\n};\nOperators['color'] = {\n    getReturnType: function (args) {\n        return ValueTypes.COLOR;\n    },\n    toGlsl: function (context, args) {\n        assertArgsMinCount(args, 3);\n        assertArgsMaxCount(args, 4);\n        assertNumbers(args);\n        var array = /** @type {number[]} */ (args);\n        if (args.length === 3) {\n            array.push(1);\n        }\n        var parsedArgs = args.map(function (val, i) {\n            return expressionToGlsl(context, val, ValueTypes.NUMBER) + (i < 3 ? ' / 255.0' : '');\n        });\n        return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n    }\n};\nOperators['interpolate'] = {\n    getReturnType: function (args) {\n        var type = ValueTypes.COLOR | ValueTypes.NUMBER;\n        for (var i = 3; i < args.length; i += 2) {\n            type = type & getValueType(args[i]);\n        }\n        return type;\n    },\n    toGlsl: function (context, args, opt_typeHint) {\n        assertArgsEven(args);\n        assertArgsMinCount(args, 6);\n        // validate interpolation type\n        var type = args[0];\n        var interpolation;\n        switch (type[0]) {\n            case 'linear':\n                interpolation = 1;\n                break;\n            case 'exponential':\n                interpolation = type[1];\n                break;\n            default: interpolation = null;\n        }\n        if (!interpolation) {\n            throw new Error(\"Invalid interpolation type for \\\"interpolate\\\" operator, received: \" + JSON.stringify(type));\n        }\n        // compute input/output types\n        var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n        var outputType = Operators['interpolate'].getReturnType(args) & typeHint;\n        assertUniqueInferredType(args, outputType);\n        var input = expressionToGlsl(context, args[1]);\n        var result = null;\n        for (var i = 2; i < args.length - 2; i += 2) {\n            var stop1 = expressionToGlsl(context, args[i]);\n            var output1 = expressionToGlsl(context, args[i + 1], outputType);\n            var stop2 = expressionToGlsl(context, args[i + 2]);\n            var output2 = expressionToGlsl(context, args[i + 3], outputType);\n            result = \"mix(\" + (result || output1) + \", \" + output2 + \", pow(clamp((\" + input + \" - \" + stop1 + \") / (\" + stop2 + \" - \" + stop1 + \"), 0.0, 1.0), \" + numberToGlsl(interpolation) + \"))\";\n        }\n        return result;\n    }\n};\nOperators['match'] = {\n    getReturnType: function (args) {\n        var type = ValueTypes.ANY;\n        for (var i = 2; i < args.length; i += 2) {\n            type = type & getValueType(args[i]);\n        }\n        type = type & getValueType(args[args.length - 1]);\n        return type;\n    },\n    toGlsl: function (context, args, opt_typeHint) {\n        assertArgsEven(args);\n        assertArgsMinCount(args, 4);\n        var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n        var outputType = Operators['match'].getReturnType(args) & typeHint;\n        assertUniqueInferredType(args, outputType);\n        var input = expressionToGlsl(context, args[0]);\n        var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n        var result = null;\n        for (var i = args.length - 3; i >= 1; i -= 2) {\n            var match = expressionToGlsl(context, args[i]);\n            var output = expressionToGlsl(context, args[i + 1], outputType);\n            result = \"(\" + input + \" == \" + match + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n        }\n        return result;\n    }\n};\nOperators['case'] = {\n    getReturnType: function (args) {\n        var type = ValueTypes.ANY;\n        for (var i = 1; i < args.length; i += 2) {\n            type = type & getValueType(args[i]);\n        }\n        type = type & getValueType(args[args.length - 1]);\n        return type;\n    },\n    toGlsl: function (context, args, opt_typeHint) {\n        assertArgsOdd(args);\n        assertArgsMinCount(args, 3);\n        var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n        var outputType = Operators['case'].getReturnType(args) & typeHint;\n        assertUniqueInferredType(args, outputType);\n        for (var i = 0; i < args.length - 1; i += 2) {\n            assertBoolean(args[i]);\n        }\n        var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n        var result = null;\n        for (var i = args.length - 3; i >= 0; i -= 2) {\n            var condition = expressionToGlsl(context, args[i]);\n            var output = expressionToGlsl(context, args[i + 1], outputType);\n            result = \"(\" + condition + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n        }\n        return result;\n    }\n};\n//# sourceMappingURL=expressions.js.map","/**\n * Classes and utilities for generating shaders from literal style objects\n * @module ol/webgl/ShaderBuilder\n */\nimport { expressionToGlsl, getStringNumberEquivalent, ValueTypes } from '../style/expressions.js';\n/**\n * @typedef {Object} VaryingDescription\n * @property {string} name Varying name, as will be declared in the header.\n * @property {string} type Varying type, either `float`, `vec2`, `vec4`...\n * @property {string} expression Expression which will be assigned to the varying in the vertex shader, and\n * passed on to the fragment shader.\n */\n/**\n * @classdesc\n * This class implements a classic builder pattern for generating many different types of shaders.\n * Methods can be chained, e. g.:\n *\n * ```js\n * const shader = new ShaderBuilder()\n *   .addVarying('v_width', 'float', 'a_width')\n *   .addUniform('u_time')\n *   .setColorExpression('...')\n *   .setSizeExpression('...')\n *   .outputSymbolFragmentShader();\n * ```\n */\nvar ShaderBuilder = /** @class */ (function () {\n    function ShaderBuilder() {\n        /**\n         * Uniforms; these will be declared in the header (should include the type).\n         * @type {Array<string>}\n         * @private\n         */\n        this.uniforms = [];\n        /**\n         * Attributes; these will be declared in the header (should include the type).\n         * @type {Array<string>}\n         * @private\n         */\n        this.attributes = [];\n        /**\n         * Varyings with a name, a type and an expression.\n         * @type {Array<VaryingDescription>}\n         * @private\n         */\n        this.varyings = [];\n        /**\n         * @type {string}\n         * @private\n         */\n        this.sizeExpression = 'vec2(1.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.rotationExpression = '0.0';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.offsetExpression = 'vec2(0.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.colorExpression = 'vec4(1.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.texCoordExpression = 'vec4(0.0, 0.0, 1.0, 1.0)';\n        /**\n         * @type {string}\n         * @private\n         */\n        this.discardExpression = 'false';\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.rotateWithView = false;\n    }\n    /**\n     * Adds a uniform accessible in both fragment and vertex shaders.\n     * The given name should include a type, such as `sampler2D u_texture`.\n     * @param {string} name Uniform name\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.addUniform = function (name) {\n        this.uniforms.push(name);\n        return this;\n    };\n    /**\n     * Adds an attribute accessible in the vertex shader, read from the geometry buffer.\n     * The given name should include a type, such as `vec2 a_position`.\n     * @param {string} name Attribute name\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.addAttribute = function (name) {\n        this.attributes.push(name);\n        return this;\n    };\n    /**\n     * Adds a varying defined in the vertex shader and accessible from the fragment shader.\n     * The type and expression of the varying have to be specified separately.\n     * @param {string} name Varying name\n     * @param {'float'|'vec2'|'vec3'|'vec4'} type Type\n     * @param {string} expression Expression used to assign a value to the varying.\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.addVarying = function (name, type, expression) {\n        this.varyings.push({\n            name: name,\n            type: type,\n            expression: expression\n        });\n        return this;\n    };\n    /**\n     * Sets an expression to compute the size of the shape.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `vec2` value.\n     * @param {string} expression Size expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setSizeExpression = function (expression) {\n        this.sizeExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the rotation of the shape.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `float` value in radians.\n     * @param {string} expression Size expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setRotationExpression = function (expression) {\n        this.rotationExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the offset of the symbol from the point center.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `vec2` value.\n     * Note: will only be used for point geometry shaders.\n     * @param {string} expression Offset expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setSymbolOffsetExpression = function (expression) {\n        this.offsetExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the color of the shape.\n     * This expression can use all the uniforms, varyings and attributes available\n     * in the fragment shader, and should evaluate to a `vec4` value.\n     * @param {string} expression Color expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setColorExpression = function (expression) {\n        this.colorExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to compute the texture coordinates of the vertices.\n     * This expression can use all the uniforms and attributes available\n     * in the vertex shader, and should evaluate to a `vec4` value.\n     * @param {string} expression Texture coordinate expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setTextureCoordinateExpression = function (expression) {\n        this.texCoordExpression = expression;\n        return this;\n    };\n    /**\n     * Sets an expression to determine whether a fragment (pixel) should be discarded,\n     * i.e. not drawn at all.\n     * This expression can use all the uniforms, varyings and attributes available\n     * in the fragment shader, and should evaluate to a `bool` value (it will be\n     * used in an `if` statement)\n     * @param {string} expression Fragment discard expression\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setFragmentDiscardExpression = function (expression) {\n        this.discardExpression = expression;\n        return this;\n    };\n    /**\n     * Sets whether the symbols should rotate with the view or stay aligned with the map.\n     * Note: will only be used for point geometry shaders.\n     * @param {boolean} rotateWithView Rotate with view\n     * @return {ShaderBuilder} the builder object\n     */\n    ShaderBuilder.prototype.setSymbolRotateWithView = function (rotateWithView) {\n        this.rotateWithView = rotateWithView;\n        return this;\n    };\n    /**\n     * @returns {string} Previously set size expression\n     */\n    ShaderBuilder.prototype.getSizeExpression = function () {\n        return this.sizeExpression;\n    };\n    /**\n     * @returns {string} Previously set symbol offset expression\n     */\n    ShaderBuilder.prototype.getOffsetExpression = function () {\n        return this.offsetExpression;\n    };\n    /**\n     * @returns {string} Previously set color expression\n     */\n    ShaderBuilder.prototype.getColorExpression = function () {\n        return this.colorExpression;\n    };\n    /**\n     * @returns {string} Previously set texture coordinate expression\n     */\n    ShaderBuilder.prototype.getTextureCoordinateExpression = function () {\n        return this.texCoordExpression;\n    };\n    /**\n     * @returns {string} Previously set fragment discard expression\n     */\n    ShaderBuilder.prototype.getFragmentDiscardExpression = function () {\n        return this.discardExpression;\n    };\n    /**\n     * Generates a symbol vertex shader from the builder parameters,\n     * intended to be used on point geometries.\n     *\n     * Three uniforms are hardcoded in all shaders: `u_projectionMatrix`, `u_offsetScaleMatrix`,\n     * `u_offsetRotateMatrix`, `u_time`.\n     *\n     * The following attributes are hardcoded and expected to be present in the vertex buffers:\n     * `vec2 a_position`, `float a_index` (being the index of the vertex in the quad, 0 to 3).\n     *\n     * The following varyings are hardcoded and gives the coordinate of the pixel both in the quad and on the texture:\n     * `vec2 v_quadCoord`, `vec2 v_texCoord`\n     *\n     * @param {boolean} [forHitDetection] If true, the shader will be modified to include hit detection variables\n     * (namely, hit color with encoded feature id).\n     * @returns {string} The full shader as a string.\n     */\n    ShaderBuilder.prototype.getSymbolVertexShader = function (forHitDetection) {\n        var offsetMatrix = this.rotateWithView ?\n            'u_offsetScaleMatrix * u_offsetRotateMatrix' :\n            'u_offsetScaleMatrix';\n        var attributes = this.attributes;\n        var varyings = this.varyings;\n        if (forHitDetection) {\n            attributes = attributes.concat('vec4 a_hitColor');\n            varyings = varyings.concat({\n                name: 'v_hitColor',\n                type: 'vec4',\n                expression: 'a_hitColor'\n            });\n        }\n        return \"precision mediump float;\\nuniform mat4 u_projectionMatrix;\\nuniform mat4 u_offsetScaleMatrix;\\nuniform mat4 u_offsetRotateMatrix;\\nuniform float u_time;\\nuniform float u_zoom;\\nuniform float u_resolution;\\n\" + this.uniforms.map(function (uniform) {\n            return 'uniform ' + uniform + ';';\n        }).join('\\n') + \"\\nattribute vec2 a_position;\\nattribute float a_index;\\n\" + attributes.map(function (attribute) {\n            return 'attribute ' + attribute + ';';\n        }).join('\\n') + \"\\nvarying vec2 v_texCoord;\\nvarying vec2 v_quadCoord;\\n\" + varyings.map(function (varying) {\n            return 'varying ' + varying.type + ' ' + varying.name + ';';\n        }).join('\\n') + \"\\nvoid main(void) {\\n  mat4 offsetMatrix = \" + offsetMatrix + \";\\n  vec2 halfSize = \" + this.sizeExpression + \" * 0.5;\\n  vec2 offset = \" + this.offsetExpression + \";\\n  float angle = \" + this.rotationExpression + \";\\n  float offsetX;\\n  float offsetY;\\n  if (a_index == 0.0) {\\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\\n  } else if (a_index == 1.0) {\\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\\n  } else if (a_index == 2.0) {\\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\\n  } else {\\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\\n  }\\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n  vec4 texCoord = \" + this.texCoordExpression + \";\\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\\n  v_texCoord = vec2(u, v);\\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\\n  v_quadCoord = vec2(u, v);\\n\" + varyings.map(function (varying) {\n            return '  ' + varying.name + ' = ' + varying.expression + ';';\n        }).join('\\n') + \"\\n}\";\n    };\n    /**\n     * Generates a symbol fragment shader from the builder parameters,\n     * intended to be used on point geometries.\n     *\n     * Expects the following varyings to be transmitted by the vertex shader:\n     * `vec2 v_quadCoord`, `vec2 v_texCoord`\n     *\n     * @param {boolean} [forHitDetection] If true, the shader will be modified to include hit detection variables\n     * (namely, hit color with encoded feature id).\n     * @returns {string} The full shader as a string.\n     */\n    ShaderBuilder.prototype.getSymbolFragmentShader = function (forHitDetection) {\n        var hitDetectionBypass = forHitDetection ?\n            '  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;' : '';\n        var varyings = this.varyings;\n        if (forHitDetection) {\n            varyings = varyings.concat({\n                name: 'v_hitColor',\n                type: 'vec4',\n                expression: 'a_hitColor'\n            });\n        }\n        return \"precision mediump float;\\nuniform float u_time;\\nuniform float u_zoom;\\nuniform float u_resolution;\\n\" + this.uniforms.map(function (uniform) {\n            return 'uniform ' + uniform + ';';\n        }).join('\\n') + \"\\nvarying vec2 v_texCoord;\\nvarying vec2 v_quadCoord;\\n\" + varyings.map(function (varying) {\n            return 'varying ' + varying.type + ' ' + varying.name + ';';\n        }).join('\\n') + \"\\nvoid main(void) {\\n  if (\" + this.discardExpression + \") { discard; }\\n  gl_FragColor = \" + this.colorExpression + \";\\n  gl_FragColor.rgb *= gl_FragColor.a;\\n\" + hitDetectionBypass + \"\\n}\";\n    };\n    return ShaderBuilder;\n}());\nexport { ShaderBuilder };\n/**\n * @typedef {Object} StyleParseResult\n * @property {ShaderBuilder} builder Shader builder pre-configured according to a given style\n * @property {Object.<string,import(\"./Helper\").UniformValue>} uniforms Uniform definitions.\n * @property {Array<import(\"../renderer/webgl/PointsLayer\").CustomAttribute>} attributes Attribute descriptions.\n */\n/**\n * Parses a {@link import(\"../style/LiteralStyle\").LiteralStyle} object and returns a {@link ShaderBuilder}\n * object that has been configured according to the given style, as well as `attributes` and `uniforms`\n * arrays to be fed to the `WebGLPointsRenderer` class.\n *\n * Also returns `uniforms` and `attributes` properties as expected by the\n * {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n * @param {import(\"../style/LiteralStyle\").LiteralStyle} style Literal style.\n * @returns {StyleParseResult} Result containing shader params, attributes and uniforms.\n */\nexport function parseLiteralStyle(style) {\n    var symbStyle = style.symbol;\n    var size = symbStyle.size !== undefined ? symbStyle.size : 1;\n    var color = symbStyle.color || 'white';\n    var texCoord = symbStyle.textureCoord || [0, 0, 1, 1];\n    var offset = symbStyle.offset || [0, 0];\n    var opacity = symbStyle.opacity !== undefined ? symbStyle.opacity : 1;\n    var rotation = symbStyle.rotation !== undefined ? symbStyle.rotation : 0;\n    /**\n     * @type {import(\"../style/expressions.js\").ParsingContext}\n     */\n    var vertContext = {\n        inFragmentShader: false,\n        variables: [],\n        attributes: [],\n        stringLiteralsMap: {}\n    };\n    var parsedSize = expressionToGlsl(vertContext, size, ValueTypes.NUMBER_ARRAY | ValueTypes.NUMBER);\n    var parsedOffset = expressionToGlsl(vertContext, offset, ValueTypes.NUMBER_ARRAY);\n    var parsedTexCoord = expressionToGlsl(vertContext, texCoord, ValueTypes.NUMBER_ARRAY);\n    /**\n     * @type {import(\"../style/expressions.js\").ParsingContext}\n     */\n    var fragContext = {\n        inFragmentShader: true,\n        variables: vertContext.variables,\n        attributes: [],\n        stringLiteralsMap: vertContext.stringLiteralsMap\n    };\n    var parsedColor = expressionToGlsl(fragContext, color, ValueTypes.COLOR);\n    var parsedOpacity = expressionToGlsl(fragContext, opacity, ValueTypes.NUMBER);\n    var parsedRotation = expressionToGlsl(fragContext, rotation, ValueTypes.NUMBER);\n    var opacityFilter = '1.0';\n    var visibleSize = \"vec2(\" + expressionToGlsl(fragContext, size, ValueTypes.NUMBER_ARRAY | ValueTypes.NUMBER) + \").x\";\n    switch (symbStyle.symbolType) {\n        case 'square': break;\n        case 'image': break;\n        // taken from https://thebookofshaders.com/07/\n        case 'circle':\n            opacityFilter = \"(1.0-smoothstep(1.-4./\" + visibleSize + \",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))\";\n            break;\n        case 'triangle':\n            var st = '(v_quadCoord*2.-1.)';\n            var a = \"(atan(\" + st + \".x,\" + st + \".y))\";\n            opacityFilter = \"(1.0-smoothstep(.5-3./\" + visibleSize + \",.5,cos(floor(.5+\" + a + \"/2.094395102)*2.094395102-\" + a + \")*length(\" + st + \")))\";\n            break;\n        default: throw new Error('Unexpected symbol type: ' + symbStyle.symbolType);\n    }\n    var builder = new ShaderBuilder()\n        .setSizeExpression(\"vec2(\" + parsedSize + \")\")\n        .setRotationExpression(parsedRotation)\n        .setSymbolOffsetExpression(parsedOffset)\n        .setTextureCoordinateExpression(parsedTexCoord)\n        .setSymbolRotateWithView(!!symbStyle.rotateWithView)\n        .setColorExpression(\"vec4(\" + parsedColor + \".rgb, \" + parsedColor + \".a * \" + parsedOpacity + \" * \" + opacityFilter + \")\");\n    if (style.filter) {\n        var parsedFilter = expressionToGlsl(fragContext, style.filter, ValueTypes.BOOLEAN);\n        builder.setFragmentDiscardExpression(\"!\" + parsedFilter);\n    }\n    /** @type {Object.<string,import(\"../webgl/Helper\").UniformValue>} */\n    var uniforms = {};\n    // define one uniform per variable\n    fragContext.variables.forEach(function (varName) {\n        builder.addUniform(\"float u_\" + varName);\n        uniforms[\"u_\" + varName] = function () {\n            if (!style.variables || style.variables[varName] === undefined) {\n                throw new Error(\"The following variable is missing from the style: \" + varName);\n            }\n            var value = style.variables[varName];\n            if (typeof value === 'string') {\n                value = getStringNumberEquivalent(vertContext, value);\n            }\n            return value !== undefined ? value : -9999999; // to avoid matching with the first string literal\n        };\n    });\n    if (symbStyle.symbolType === 'image' && symbStyle.src) {\n        var texture = new Image();\n        texture.src = symbStyle.src;\n        builder.addUniform('sampler2D u_texture')\n            .setColorExpression(builder.getColorExpression() +\n            ' * texture2D(u_texture, v_texCoord)');\n        uniforms['u_texture'] = texture;\n    }\n    // for each feature attribute used in the fragment shader, define a varying that will be used to pass data\n    // from the vertex to the fragment shader, as well as an attribute in the vertex shader (if not already present)\n    fragContext.attributes.forEach(function (attrName) {\n        if (vertContext.attributes.indexOf(attrName) === -1) {\n            vertContext.attributes.push(attrName);\n        }\n        builder.addVarying(\"v_\" + attrName, 'float', \"a_\" + attrName);\n    });\n    // for each feature attribute used in the vertex shader, define an attribute in the vertex shader.\n    vertContext.attributes.forEach(function (attrName) {\n        builder.addAttribute(\"float a_\" + attrName);\n    });\n    return {\n        builder: builder,\n        attributes: vertContext.attributes.map(function (attributeName) {\n            return {\n                name: attributeName,\n                callback: function (feature, props) {\n                    var value = props[attributeName];\n                    if (typeof value === 'string') {\n                        value = getStringNumberEquivalent(vertContext, value);\n                    }\n                    return value !== undefined ? value : -9999999; // to avoid matching with the first string literal\n                }\n            };\n        }),\n        uniforms: uniforms\n    };\n}\n//# sourceMappingURL=ShaderBuilder.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/layer/WebGLPoints\n */\nimport { assign } from '../obj.js';\nimport WebGLPointsLayerRenderer from '../renderer/webgl/PointsLayer.js';\nimport { parseLiteralStyle } from '../webgl/ShaderBuilder.js';\nimport Layer from './Layer.js';\n/**\n * @typedef {Object} Options\n * @property {import('../style/LiteralStyle.js').LiteralStyle} style Literal style to apply to the layer features.\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {boolean} [disableHitDetection=false] Setting this to true will provide a slight performance boost, but will\n * prevent all hit detection on the layer.\n */\n/**\n * @classdesc\n * Layer optimized for rendering large point datasets. Takes a `style` property which\n * is a serializable JSON object describing how the layer should be rendered.\n *\n * Here are a few samples of literal style objects:\n * ```js\n * const style = {\n *   symbol: {\n *     symbolType: 'circle',\n *     size: 8,\n *     color: '#33AAFF',\n *     opacity: 0.9\n *   }\n * }\n * ```\n *\n * ```js\n * const style = {\n *   symbol: {\n *     symbolType: 'image',\n *     offset: [0, 12],\n *     size: [4, 8],\n *     src: '../static/exclamation-mark.png'\n *   }\n * }\n * ```\n *\n * **Important: a `WebGLPoints` layer must be manually disposed when removed, otherwise the underlying WebGL context\n * will not be garbage collected.**\n *\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n */\nvar WebGLPointsLayer = /** @class */ (function (_super) {\n    __extends(WebGLPointsLayer, _super);\n    /**\n     * @param {Options} options Options.\n     */\n    function WebGLPointsLayer(options) {\n        var _this = this;\n        var baseOptions = assign({}, options);\n        _this = _super.call(this, baseOptions) || this;\n        /**\n         * @private\n         * @type {import('../webgl/ShaderBuilder.js').StyleParseResult}\n         */\n        _this.parseResult_ = parseLiteralStyle(options.style);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hitDetectionDisabled_ = !!options.disableHitDetection;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    WebGLPointsLayer.prototype.createRenderer = function () {\n        return new WebGLPointsLayerRenderer(this, {\n            vertexShader: this.parseResult_.builder.getSymbolVertexShader(),\n            fragmentShader: this.parseResult_.builder.getSymbolFragmentShader(),\n            hitVertexShader: !this.hitDetectionDisabled_ &&\n                this.parseResult_.builder.getSymbolVertexShader(true),\n            hitFragmentShader: !this.hitDetectionDisabled_ &&\n                this.parseResult_.builder.getSymbolFragmentShader(true),\n            uniforms: this.parseResult_.uniforms,\n            attributes: this.parseResult_.attributes\n        });\n    };\n    /**\n     *\n     * @inheritDoc\n     */\n    WebGLPointsLayer.prototype.disposeInternal = function () {\n        this.renderer_.dispose();\n        _super.prototype.disposeInternal.call(this);\n    };\n    return WebGLPointsLayer;\n}(Layer));\nexport default WebGLPointsLayer;\n//# sourceMappingURL=WebGLPoints.js.map","/**\n * @module ol/tilegrid/common\n */\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport var DEFAULT_MAX_ZOOM = 42;\n/**\n * Default tile size.\n * @type {number}\n */\nexport var DEFAULT_TILE_SIZE = 256;\n//# sourceMappingURL=common.js.map","/**\n * @module ol/TileRange\n */\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nvar TileRange = /** @class */ (function () {\n    /**\n     * @param {number} minX Minimum X.\n     * @param {number} maxX Maximum X.\n     * @param {number} minY Minimum Y.\n     * @param {number} maxY Maximum Y.\n     */\n    function TileRange(minX, maxX, minY, maxY) {\n        /**\n         * @type {number}\n         */\n        this.minX = minX;\n        /**\n         * @type {number}\n         */\n        this.maxX = maxX;\n        /**\n         * @type {number}\n         */\n        this.minY = minY;\n        /**\n         * @type {number}\n         */\n        this.maxY = maxY;\n    }\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {boolean} Contains tile coordinate.\n     */\n    TileRange.prototype.contains = function (tileCoord) {\n        return this.containsXY(tileCoord[1], tileCoord[2]);\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Contains.\n     */\n    TileRange.prototype.containsTileRange = function (tileRange) {\n        return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n            this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n    };\n    /**\n     * @param {number} x Tile coordinate x.\n     * @param {number} y Tile coordinate y.\n     * @return {boolean} Contains coordinate.\n     */\n    TileRange.prototype.containsXY = function (x, y) {\n        return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Equals.\n     */\n    TileRange.prototype.equals = function (tileRange) {\n        return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n            this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     */\n    TileRange.prototype.extend = function (tileRange) {\n        if (tileRange.minX < this.minX) {\n            this.minX = tileRange.minX;\n        }\n        if (tileRange.maxX > this.maxX) {\n            this.maxX = tileRange.maxX;\n        }\n        if (tileRange.minY < this.minY) {\n            this.minY = tileRange.minY;\n        }\n        if (tileRange.maxY > this.maxY) {\n            this.maxY = tileRange.maxY;\n        }\n    };\n    /**\n     * @return {number} Height.\n     */\n    TileRange.prototype.getHeight = function () {\n        return this.maxY - this.minY + 1;\n    };\n    /**\n     * @return {import(\"./size.js\").Size} Size.\n     */\n    TileRange.prototype.getSize = function () {\n        return [this.getWidth(), this.getHeight()];\n    };\n    /**\n     * @return {number} Width.\n     */\n    TileRange.prototype.getWidth = function () {\n        return this.maxX - this.minX + 1;\n    };\n    /**\n     * @param {TileRange} tileRange Tile range.\n     * @return {boolean} Intersects.\n     */\n    TileRange.prototype.intersects = function (tileRange) {\n        return this.minX <= tileRange.maxX &&\n            this.maxX >= tileRange.minX &&\n            this.minY <= tileRange.maxY &&\n            this.maxY >= tileRange.minY;\n    };\n    return TileRange;\n}());\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n    if (tileRange !== undefined) {\n        tileRange.minX = minX;\n        tileRange.maxX = maxX;\n        tileRange.minY = minY;\n        tileRange.maxY = maxY;\n        return tileRange;\n    }\n    else {\n        return new TileRange(minX, maxX, minY, maxY);\n    }\n}\nexport default TileRange;\n//# sourceMappingURL=TileRange.js.map","/**\n * @module ol/size\n */\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = size[0] + 2 * num;\n    opt_size[1] = size[1] + 2 * num;\n    return opt_size;\n}\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n    return size[0] > 0 && size[1] > 0;\n}\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n    if (opt_size === undefined) {\n        opt_size = [0, 0];\n    }\n    opt_size[0] = (size[0] * ratio + 0.5) | 0;\n    opt_size[1] = (size[1] * ratio + 0.5) | 0;\n    return opt_size;\n}\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n    if (Array.isArray(size)) {\n        return size;\n    }\n    else {\n        if (opt_size === undefined) {\n            opt_size = [size, size];\n        }\n        else {\n            opt_size[0] = size;\n            opt_size[1] = size;\n        }\n        return opt_size;\n    }\n}\n//# sourceMappingURL=size.js.map","/**\n * @module ol/tilecoord\n */\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n    if (opt_tileCoord !== undefined) {\n        opt_tileCoord[0] = z;\n        opt_tileCoord[1] = x;\n        opt_tileCoord[2] = y;\n        return opt_tileCoord;\n    }\n    else {\n        return [z, x, y];\n    }\n}\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n    return z + '/' + x + '/' + y;\n}\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n    return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n    return key.split('/').map(Number);\n}\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n    return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n    var z = tileCoord[0];\n    var x = tileCoord[1];\n    var y = tileCoord[2];\n    if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n        return false;\n    }\n    var extent = tileGrid.getExtent();\n    var tileRange;\n    if (!extent) {\n        tileRange = tileGrid.getFullTileRange(z);\n    }\n    else {\n        tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    }\n    if (!tileRange) {\n        return true;\n    }\n    else {\n        return tileRange.containsXY(x, y);\n    }\n}\n//# sourceMappingURL=tilecoord.js.map","/**\n * @module ol/tilegrid/TileGrid\n */\nimport { DEFAULT_TILE_SIZE } from './common.js';\nimport { assert } from '../asserts.js';\nimport TileRange, { createOrUpdate as createOrUpdateTileRange } from '../TileRange.js';\nimport { isSorted, linearFindNearest } from '../array.js';\nimport { createOrUpdate, getTopLeft } from '../extent.js';\nimport { clamp } from '../math.js';\nimport { toSize } from '../size.js';\nimport { createOrUpdate as createOrUpdateTileCoord } from '../tilecoord.js';\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nvar tmpTileCoord = [0, 0, 0];\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and downwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and downwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. If specified the values\n * define each zoom level's extent together with the `origin` or `origins`.\n * A grid `extent` can be configured in addition, and will further limit the extent\n * for which tile requests are made by sources. If the bottom-left corner of\n * an extent is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nvar TileGrid = /** @class */ (function () {\n    /**\n     * @param {Options} options Tile grid options.\n     */\n    function TileGrid(options) {\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n        /**\n         * @private\n         * @type {!Array<number>}\n         */\n        this.resolutions_ = options.resolutions;\n        assert(isSorted(this.resolutions_, function (a, b) {\n            return b - a;\n        }, true), 17); // `resolutions` must be sorted in descending order\n        // check if we've got a consistent zoom factor and origin\n        var zoomFactor;\n        if (!options.origins) {\n            for (var i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n                if (!zoomFactor) {\n                    zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n                }\n                else {\n                    if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n                        zoomFactor = undefined;\n                        break;\n                    }\n                }\n            }\n        }\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        this.zoomFactor_ = zoomFactor;\n        /**\n         * @protected\n         * @type {number}\n         */\n        this.maxZoom = this.resolutions_.length - 1;\n        /**\n         * @private\n         * @type {import(\"../coordinate.js\").Coordinate}\n         */\n        this.origin_ = options.origin !== undefined ? options.origin : null;\n        /**\n         * @private\n         * @type {Array<import(\"../coordinate.js\").Coordinate>}\n         */\n        this.origins_ = null;\n        if (options.origins !== undefined) {\n            this.origins_ = options.origins;\n            assert(this.origins_.length == this.resolutions_.length, 20); // Number of `origins` and `resolutions` must be equal\n        }\n        var extent = options.extent;\n        if (extent !== undefined &&\n            !this.origin_ && !this.origins_) {\n            this.origin_ = getTopLeft(extent);\n        }\n        assert((!this.origin_ && this.origins_) || (this.origin_ && !this.origins_), 18); // Either `origin` or `origins` must be configured, never both\n        /**\n         * @private\n         * @type {Array<number|import(\"../size.js\").Size>}\n         */\n        this.tileSizes_ = null;\n        if (options.tileSizes !== undefined) {\n            this.tileSizes_ = options.tileSizes;\n            assert(this.tileSizes_.length == this.resolutions_.length, 19); // Number of `tileSizes` and `resolutions` must be equal\n        }\n        /**\n         * @private\n         * @type {number|import(\"../size.js\").Size}\n         */\n        this.tileSize_ = options.tileSize !== undefined ?\n            options.tileSize :\n            !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n        assert((!this.tileSize_ && this.tileSizes_) ||\n            (this.tileSize_ && !this.tileSizes_), 22); // Either `tileSize` or `tileSizes` must be configured, never both\n        /**\n         * @private\n         * @type {import(\"../extent.js\").Extent}\n         */\n        this.extent_ = extent !== undefined ? extent : null;\n        /**\n         * @private\n         * @type {Array<import(\"../TileRange.js\").default>}\n         */\n        this.fullTileRanges_ = null;\n        /**\n         * @private\n         * @type {import(\"../size.js\").Size}\n         */\n        this.tmpSize_ = [0, 0];\n        if (options.sizes !== undefined) {\n            this.fullTileRanges_ = options.sizes.map(function (size, z) {\n                var tileRange = new TileRange(Math.min(0, size[0]), Math.max(size[0] - 1, -1), Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n                return tileRange;\n            }, this);\n        }\n        else if (extent) {\n            this.calculateTileRanges_(extent);\n        }\n    }\n    /**\n     * Call a function with each tile coordinate for a given extent and zoom level.\n     *\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} zoom Integer zoom level.\n     * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.forEachTileCoord = function (extent, zoom, callback) {\n        var tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n        for (var i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n            for (var j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n                callback([zoom, i, j]);\n            }\n        }\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {boolean} Callback succeeded.\n     */\n    TileGrid.prototype.forEachTileCoordParentTileRange = function (tileCoord, callback, opt_tileRange, opt_extent) {\n        var tileRange, x, y;\n        var tileCoordExtent = null;\n        var z = tileCoord[0] - 1;\n        if (this.zoomFactor_ === 2) {\n            x = tileCoord[1];\n            y = tileCoord[2];\n        }\n        else {\n            tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n        }\n        while (z >= this.minZoom) {\n            if (this.zoomFactor_ === 2) {\n                x = Math.floor(x / 2);\n                y = Math.floor(y / 2);\n                tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n            }\n            else {\n                tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n            }\n            if (callback(z, tileRange)) {\n                return true;\n            }\n            --z;\n        }\n        return false;\n    };\n    /**\n     * Get the extent for this tile grid, if it was configured.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getExtent = function () {\n        return this.extent_;\n    };\n    /**\n     * Get the maximum zoom level for the grid.\n     * @return {number} Max zoom.\n     * @api\n     */\n    TileGrid.prototype.getMaxZoom = function () {\n        return this.maxZoom;\n    };\n    /**\n     * Get the minimum zoom level for the grid.\n     * @return {number} Min zoom.\n     * @api\n     */\n    TileGrid.prototype.getMinZoom = function () {\n        return this.minZoom;\n    };\n    /**\n     * Get the origin for the grid at the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {import(\"../coordinate.js\").Coordinate} Origin.\n     * @api\n     */\n    TileGrid.prototype.getOrigin = function (z) {\n        if (this.origin_) {\n            return this.origin_;\n        }\n        else {\n            return this.origins_[z];\n        }\n    };\n    /**\n     * Get the resolution for the given zoom level.\n     * @param {number} z Integer zoom level.\n     * @return {number} Resolution.\n     * @api\n     */\n    TileGrid.prototype.getResolution = function (z) {\n        return this.resolutions_[z];\n    };\n    /**\n     * Get the list of resolutions for the tile grid.\n     * @return {Array<number>} Resolutions.\n     * @api\n     */\n    TileGrid.prototype.getResolutions = function () {\n        return this.resolutions_;\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileCoordChildTileRange = function (tileCoord, opt_tileRange, opt_extent) {\n        if (tileCoord[0] < this.maxZoom) {\n            if (this.zoomFactor_ === 2) {\n                var minX = tileCoord[1] * 2;\n                var minY = tileCoord[2] * 2;\n                return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n            }\n            var tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n            return this.getTileRangeForExtentAndZ(tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n        }\n        return null;\n    };\n    /**\n     * Get the extent for a tile range.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     */\n    TileGrid.prototype.getTileRangeExtent = function (z, tileRange, opt_extent) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n        var maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n        var minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n        var maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get a tile range for the given extent and integer zoom level.\n     * @param {import(\"../extent.js\").Extent} extent Extent.\n     * @param {number} z Integer zoom level.\n     * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n     * @return {import(\"../TileRange.js\").default} Tile range.\n     */\n    TileGrid.prototype.getTileRangeForExtentAndZ = function (extent, z, opt_tileRange) {\n        var tileCoord = tmpTileCoord;\n        this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n        var minX = tileCoord[1];\n        var minY = tileCoord[2];\n        this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n        return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n     */\n    TileGrid.prototype.getTileCoordCenter = function (tileCoord) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        return [\n            origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n            origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution\n        ];\n    };\n    /**\n     * Get the extent of a tile coordinate.\n     *\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n     * @return {import(\"../extent.js\").Extent} Extent.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordExtent = function (tileCoord, opt_extent) {\n        var origin = this.getOrigin(tileCoord[0]);\n        var resolution = this.getResolution(tileCoord[0]);\n        var tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n        var minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n        var minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n        var maxX = minX + tileSize[0] * resolution;\n        var maxY = minY + tileSize[1] * resolution;\n        return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n    };\n    /**\n     * Get the tile coordinate for the given map coordinate and resolution.  This\n     * method considers that coordinates that intersect tile boundaries should be\n     * assigned the higher tile coordinate.\n     *\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} resolution Resolution.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndResolution = function (coordinate, resolution, opt_tileCoord) {\n        return this.getTileCoordForXYAndResolution_(coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n    };\n    /**\n     * Note that this method should not be called for resolutions that correspond\n     * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n     * @param {number} x X.\n     * @param {number} y Y.\n     * @param {number} resolution Resolution (for a non-integer zoom level).\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndResolution_ = function (x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n        var z = this.getZForResolution(resolution);\n        var scale = resolution / this.getResolution(z);\n        var origin = this.getOrigin(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = scale * xFromOrigin / tileSize[0];\n        var tileCoordY = scale * yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n     * they should have separate implementations.  This method is for integer zoom\n     * levels.  The other method should only be called for resolutions corresponding\n     * to non-integer zoom levels.\n     * @param {number} x Map x coordinate.\n     * @param {number} y Map y coordinate.\n     * @param {number} z Integer zoom level.\n     * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n     *     intersections go to the higher tile coordinate, let edge intersections\n     *     go to the lower tile coordinate.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @private\n     */\n    TileGrid.prototype.getTileCoordForXYAndZ_ = function (x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n        var origin = this.getOrigin(z);\n        var resolution = this.getResolution(z);\n        var tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n        var adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n        var adjustY = reverseIntersectionPolicy ? 0.5 : 0;\n        var xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n        var yFromOrigin = Math.floor((origin[1] - y) / resolution + adjustY);\n        var tileCoordX = xFromOrigin / tileSize[0];\n        var tileCoordY = yFromOrigin / tileSize[1];\n        if (reverseIntersectionPolicy) {\n            tileCoordX = Math.ceil(tileCoordX) - 1;\n            tileCoordY = Math.ceil(tileCoordY) - 1;\n        }\n        else {\n            tileCoordX = Math.floor(tileCoordX);\n            tileCoordY = Math.floor(tileCoordY);\n        }\n        return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n    };\n    /**\n     * Get a tile coordinate given a map coordinate and zoom level.\n     * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @param {number} z Zoom level.\n     * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n     * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n     * @api\n     */\n    TileGrid.prototype.getTileCoordForCoordAndZ = function (coordinate, z, opt_tileCoord) {\n        return this.getTileCoordForXYAndZ_(coordinate[0], coordinate[1], z, false, opt_tileCoord);\n    };\n    /**\n     * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n     * @return {number} Tile resolution.\n     */\n    TileGrid.prototype.getTileCoordResolution = function (tileCoord) {\n        return this.resolutions_[tileCoord[0]];\n    };\n    /**\n     * Get the tile size for a zoom level. The type of the return value matches the\n     * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n     * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n     * @param {number} z Z.\n     * @return {number|import(\"../size.js\").Size} Tile size.\n     * @api\n     */\n    TileGrid.prototype.getTileSize = function (z) {\n        if (this.tileSize_) {\n            return this.tileSize_;\n        }\n        else {\n            return this.tileSizes_[z];\n        }\n    };\n    /**\n     * @param {number} z Zoom level.\n     * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n     */\n    TileGrid.prototype.getFullTileRange = function (z) {\n        if (!this.fullTileRanges_) {\n            return null;\n        }\n        else {\n            return this.fullTileRanges_[z];\n        }\n    };\n    /**\n     * @param {number} resolution Resolution.\n     * @param {number=} opt_direction If 0, the nearest resolution will be used.\n     *     If 1, the nearest lower resolution will be used. If -1, the nearest\n     *     higher resolution will be used. Default is 0.\n     * @return {number} Z.\n     * @api\n     */\n    TileGrid.prototype.getZForResolution = function (resolution, opt_direction) {\n        var z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n        return clamp(z, this.minZoom, this.maxZoom);\n    };\n    /**\n     * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n     * @private\n     */\n    TileGrid.prototype.calculateTileRanges_ = function (extent) {\n        var length = this.resolutions_.length;\n        var fullTileRanges = new Array(length);\n        for (var z = this.minZoom; z < length; ++z) {\n            fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n        }\n        this.fullTileRanges_ = fullTileRanges;\n    };\n    return TileGrid;\n}());\nexport default TileGrid;\n//# sourceMappingURL=TileGrid.js.map"],"sourceRoot":""}