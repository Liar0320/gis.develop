{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/map.component.ts","webpack:///external \"angular\"","webpack:///./src/core/layers/index.ts","webpack:///./src/core/sources/source.component.ts","webpack:///./src/core/styles/style.component.ts","webpack:///external \"ol.style\"","webpack:///external \"ol.source\"","webpack:///external \"ol.interaction\"","webpack:///external \"ol\"","webpack:///./src/core/layers/layer.component.ts","webpack:///./src/core/feature.component.ts","webpack:///external \"ol.layer\"","webpack:///./src/core/styles/circle.component.ts","webpack:///./src/core/view.component.ts","webpack:///./src/core/sources/index.ts","webpack:///./src/core/geometry.component.ts","webpack:///external \"ol.geom\"","webpack:///./src/core/styles/text.component.ts","webpack:///./src/core/index.ts","webpack:///./src/core/sources/xyz.component.ts","webpack:///./src/core/layers/layertile.component.ts","webpack:///./src/core/layers/layervector.component.ts","webpack:///./src/core/layers/layergroup.component.ts","webpack:///./src/core/layers/layerwebgl.component.ts","webpack:///external \"ol.layer.WebGLPoints\"","webpack:///./src/core/sources/xyz.component.extend.ts","webpack:///external \"ol.tilegrid.TileGrid\"","webpack:///./src/core/sources/osmmaps.component.ts","webpack:///./src/core/sources/vector.component.ts","webpack:///./src/core/sources/cluster.component.ts","webpack:///./src/core/sources/tiledebug.component.ts","webpack:///./src/core/coordinate.component.ts","webpack:///external \"ol.proj\"","webpack:///./src/core/styles/index.ts","webpack:///./src/core/styles/stroke.component.ts","webpack:///./src/core/styles/fill.component.ts","webpack:///./src/core/styles/icon.component.ts","webpack:///./src/core/overlay.component.ts","webpack:///./src/core/interactions/index.ts","webpack:///./src/core/interactions/default.component.ts","webpack:///./src/core/interactions/modify.component.ts","webpack:///./src/core/interactions/select.component.ts","webpack:///./src/core/interactions/select.component.extend.ts","webpack:///external \"ol.events.condition\"","webpack:///./src/core/interactions/draganddrop.component.ts","webpack:///./src/core/interactions/draganddrop.component.extend.ts","webpack:///external \"ol.format\"","webpack:///./src/core/interactions/draw.component.ts","webpack:///./src/core/interactions/draw.component.extend.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","host","componentType","onDblClick","angular","noop","onPointerDrag","onPointerMove","onPostCompose","onPostRender","onPreCompose","onPropertyChange","onSingleClick","onClick","onMoveEnd","controls","interactions","this","$onInit","instance","Map","setTarget","on","event","MapComponent","component","bindings","pixelRatio","keyboardEventTarget","onPostcompose","onPostrender","onRenderComplete","controller","$onDestroy","setSource","_register","source","SourceComponent","sourceComponentConfig","attributions","attributionsCollapsible","featureHost","layerVectorHost","Error","Style","setStyle","update","changed","style","getStyle","Array","splice","indexOf","StyleComponent","aolStyleComponent","geometry","fill","image","stroke","text","zIndex","require","aolLayerVector","aolStyle","ol","interaction","layerGroupComponent","mapComponent","prerender","undefined","postrender","getLayers","push","remove","$onChanges","changes","properties","un","previousValue","currentValue","setProperties","LayerComponent","layerComponentConfig","opacity","visible","extent","minResolution","maxResolution","className","Feature","id","setId","addFeature","removeFeature","FeatureComponent","aolSourceVector","layer","radius","styleHost","$postLink","Circle","setImage","setRadius","styleCircleComponent","aolStyleCircleComponent","snapToPixel","aolStyleCircle","zoom","center","zoomAnimation","View","setView","animate","setZoom","ViewComponent","constrainRotation","enableRotation","maxZoom","minZoom","resolution","resolutions","rotation","zoomFactor","projection","change","LineString","setGeometry","GeometryLinestringComponent","aolGeometryLinestringComponent","aolGeometryLinestring","Point","GeometryPointComponent","aolGeometryPointComponent","aolGeometryPoint","Polygon","GeometryPolygonComponent","aolGeometryPolygonComponent","aolGeometryPolygon","geom","Text","setText","setFont","setOffsetX","setOffsetY","setScale","setRotation","setTextAlign","setTextBaseline","styleTextComponent","aolStyleTextComponent","font","maxAngle","offsetX","offsetY","overflow","placement","scale","rotateWithView","textAlign","textBaseline","backgroundFill","backgroundStroke","padding","aolStyleText","aolModule","aolLayerTile","aolLayerWebgl","aolLayerGroup","aolSourceXyz","aolSourceOsm","aolSourceCluster","aolSourceTiledebug","aolCoordinate","aolCollectionCoordinates","aolStyleStroke","aolStyleIcon","aolStyleFill","aolOverlay","aolInteractionDefaults","aolInteractionDraw","aolInteractionModify","aolInteractionSelect","aolInteractionDraganddrop","forEach","registerComponent","decorate","XYZ","SourceXYZExtend","SourceXYZComponent","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileGrid","tileLoadFunction","tilePixelRatio","tileSize","tileUrlFunction","url","urls","wrapX","transition","zDirection","Tile","LayerTileComponent","preload","useInterimTilesOnError","Vector","LayerVectorComponent","renderOrder","renderBuffer","declutter","updateWhileAnimating","updateWhileInteracting","LayerGroupComponent","symbol","symbolType","size","color","offset","LayerWebglComponent","disableHitDetection","WebGLPoints","resolutions_4326","forEachTileCoord","tilegrid","TileGrid","OSM","ngOnChanges","SourceOSMComponent","layerWebglHost","addFeatures","SourceVectorComponent","features","format","loader","overlaps","strategy","useSpatialIndex","Cluster","SourceClusterComponent","distance","geometryFunction","TileDebug","SourceTiledebugComponent","srid","geometryPointHost","viewHost","referenceProjection","referenceProjectionCode","transformedCoordinates","isNumber","x","y","map","getView","getProjection","getCode","transform","setCoordinates","setCenter","CoordinateComponent","geometryLinestring","geometryPolygon","coordinates","coordinate","CollectionCoordinatesComponent","aolCollectionCoordinatesComponent","proj","styleCircleHost","Stroke","setStroke","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","StrokeComponent","aolStrokeComponent","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","width","styleTextHost","Fill","setFill","FillComponent","aolFillComponent","Icon","setOpacity","styleIconComponent","aolStyleIconComponent","anchor","anchorOrigin","anchorXUnits","anchorYUnits","img","offsetOrigin","imgSize","src","$element","element","Overlay","addOverlay","removeOverlay","OverlayComponent","position","positioning","stopEvent","insertFirst","autoPan","autoPanAnimation","autoPanMargin","addInteraction","removeInteraction","DefaultInteractionComponent","altShiftDragRotate","onFocusOnly","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","zoomDelta","zoomDuration","onModifyEnd","onModifyStart","onChange","onChangeActive","Modify","console","error","ModifyInteractionComponent","condition","deleteCondition","insertVertexCondition","pixelTolerance","onSelect","initCondition","Select","SelectInteractionExtend","SelectInteractionComponent","addCondition","layers","removeCondition","toggleCondition","multi","filter","conditionType","altKeyOnly","altShiftKeysOnly","click","doubleClick","focus","mouseActionButton","mouseOnly","noModifierKeys","penOnly","platformModifierKeyOnly","pointerMove","primaryAction","shiftKeyOnly","singleClick","targetNotEditable","touchOnly","events","onAddFeatures","DragAndDrop","DraganddropInteractionExtend","DraganddropInteractionComponent","formatConstructors","target","defaultFormat","GPX","GeoJSON","IGC","KML","TopoJSON","EsriJSON","GML","IIIFInfo","MVT","OWS","Polyline","WFS","WKT","WMSCapabilities","WMSGetFeatureInfo","WMTSCapabilities","child","getFormat","featureConlist","item","formatCon","onDrawEnd","onDrawStart","init","type","Draw","DrawInteractionExtend","DrawInteractionComponent","clickTolerance","dragVertexDelay","snapTolerance","stopClick","maxPoints","minPoints","finishCondition","geometryName","freehand","freehandCondition","__createRectangleParams","start","end"],"mappings":"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","file":"aol.core.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","import * as angular from 'angular';\r\nimport { Map, MapBrowserEvent, MapEvent } from 'ol';\r\nimport RenderEvent from 'ol/render/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport Control from 'ol/control/Control';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport { MapOptions } from 'ol/PluggableMap';\r\n\r\nexport class MapComponent implements angular.IController, MapOptions {\r\n  public instance: Map;\r\n  public componentType: string = 'map';\r\n  public host: angular.IRootElementService;\r\n  private onDblClick: Function = angular.noop;\r\n  private onPointerDrag: Function = angular.noop;\r\n  private onPointerMove: Function = angular.noop;\r\n  private onPostCompose: Function = angular.noop;\r\n  private onPostRender: Function = angular.noop;\r\n  private onPreCompose: Function = angular.noop;\r\n  private onPropertyChange: Function = angular.noop;\r\n  private onSingleClick: Function = angular.noop;\r\n  private onClick: Function = angular.noop;\r\n  private onMoveEnd: Function = angular.noop;\r\n\r\n  controls: Control[] = [];\r\n  interactions: Interaction[] = [];\r\n\r\n  constructor(host: angular.IRootElementService) {\r\n    this.host = host;\r\n  }\r\n\r\n  $onInit() {\r\n    this.instance = new Map(this);\r\n    this.instance.setTarget(this.host[0]);\r\n    this.instance.on('click', (event: MapBrowserEvent) =>\r\n      this.onClick({ event }),\r\n    );\r\n    this.instance.on('dblclick', (event: MapBrowserEvent) =>\r\n      this.onDblClick({ event }),\r\n    );\r\n    this.instance.on('moveend', (event: MapEvent) => this.onMoveEnd({ event }));\r\n    this.instance.on('pointerdrag', (event: MapBrowserEvent) =>\r\n      this.onPointerDrag({ event }),\r\n    );\r\n    this.instance.on('pointermove', (event: MapBrowserEvent) =>\r\n      this.onPointerMove({ event }),\r\n    );\r\n    this.instance.on('postcompose', (event: RenderEvent) =>\r\n      this.onPostCompose({ event }),\r\n    );\r\n    this.instance.on('postrender', (event: MapEvent) =>\r\n      this.onPostRender({ event }),\r\n    );\r\n    this.instance.on('precompose', (event: RenderEvent) =>\r\n      this.onPreCompose({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('singleclick', (event: MapBrowserEvent) =>\r\n      this.onSingleClick({ event }),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //   <div  >\r\n  //     <ng-transclude id='ngolMap'></ng-transclude>\r\n  //     <div  data-tag=\"map\"></div>\r\n  //   </div>\r\n  // `,\r\n  // transclude: true,\r\n  bindings: {\r\n    pixelRatio: '<?',\r\n    keyboardEventTarget: '<?',\r\n    onClick: '&?',\r\n    onDblClick: '&?',\r\n    onMoveEnd: '&?',\r\n    onPointerDrag: '&?',\r\n    onPointerMove: '&?',\r\n    onPostcompose: '&?',\r\n    onPostrender: '&?',\r\n    onPreCompose: '&?',\r\n    onPropertyChange: '&?',\r\n    onRenderComplete: '&?',\r\n    onSingleClick: '&?',\r\n  },\r\n  controller: ['$element', MapComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolMap',\r\n  ...component,\r\n};\r\n","module.exports = angular;","// export * from './layer.component';\r\nexport * from './layertile.component';\r\nexport * from './layervector.component';\r\nexport * from './layergroup.component';\r\nexport * from './layerwebgl.component';\r\n","import Source, { AttributionLike } from 'ol/source/Source';\r\nimport { LayerComponent } from '../layers/layer.component';\r\n\r\nexport class SourceComponent implements angular.IController {\r\n  public instance: Source;\r\n  public componentType: string = 'source';\r\n\r\n  protected host: LayerComponent;\r\n  //   protected raster: SourceRasterComponent\r\n\r\n  attributions: AttributionLike;\r\n  attributionsCollapsible: boolean;\r\n\r\n  //   constructor()\r\n  //   {}\r\n\r\n  $onDestroy() {\r\n    if (this.host) {\r\n      this.host.instance.setSource(null);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [];\r\n    // }\r\n  }\r\n\r\n  protected _register(source: Source) {\r\n    if (this.host) {\r\n      this.host.instance.setSource(source);\r\n    }\r\n\r\n    // if (this.raster) {\r\n    //   this.raster.sources = [source];\r\n    // }\r\n  }\r\n}\r\n\r\nexport const sourceComponentConfig = {\r\n  bindings: {\r\n    instance: '=?',\r\n    attributions: '<?',\r\n    attributionsCollapsible: '<?',\r\n  },\r\n};\r\n","import { GeometryFunction } from 'ol/style/Style';\r\nimport aolFeature, { FeatureComponent } from '../feature.component';\r\nimport { aolLayerVector, LayerVectorComponent } from '../layers';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Fill, Image as ImageStyle, Stroke, Text, Style } from 'ol/style';\r\n// import { RenderFunction } from 'ol/layer/Layer';\r\n\r\nexport class StyleComponent implements ng.IController {\r\n  public componentType = 'style';\r\n  public instance: Style;\r\n\r\n  private host: LayerVectorComponent | FeatureComponent;\r\n\r\n  protected layerVectorHost: LayerVectorComponent;\r\n  protected featureHost: FeatureComponent;\r\n\r\n  geometry?: string | Geometry | GeometryFunction;\r\n  fill?: Fill;\r\n  image?: ImageStyle;\r\n  //   renderer?: RenderFunction;\r\n  stroke?: Stroke;\r\n  text?: Text;\r\n  zIndex?: number;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.featureHost) {\r\n      this.host = this.featureHost;\r\n    } else if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Style(this);\r\n    this.host.instance.setStyle(this.instance);\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n  // 因为在改变Stroke等属性值时style不会检查到变化，因此不会触发re-render\r\n  update() {\r\n    this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    let style = this.host.instance.getStyle();\r\n    if (style instanceof Array) {\r\n      style.splice(style.indexOf(this.instance), 1);\r\n    } else {\r\n      style = null;\r\n    }\r\n    this.host.instance.setStyle(style);\r\n  }\r\n\r\n  //   $onChanges(changes: ng.IOnChangesObject) {\r\n  //     if (this.instance) {\r\n  //       this.instance.setId(this.id);\r\n  //     }\r\n  //   }\r\n}\r\n\r\nvar aolStyleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    geometry: '<?',\r\n    fill: '<?',\r\n    image: '<?',\r\n    stroke: '<?',\r\n    text: '<?',\r\n    zIndex: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `?^${aolLayerVector.name}`,\r\n    featureHost: `?^${aolFeature.name}`,\r\n  },\r\n  controller: [StyleComponent],\r\n};\r\n\r\nexport const aolStyle = {\r\n  name: 'aolStyle',\r\n  ...aolStyleComponent,\r\n};\r\n","module.exports = ol.style;","module.exports = ol.source;","module.exports = ol.interaction;","module.exports = ol;","import Event from 'ol/events/Event';\r\nimport { Extent } from 'ol/extent';\r\nimport mapComponent, { MapComponent } from '../map.component';\r\nimport { LayerGroupComponent } from './layergroup.component';\r\n\r\nexport abstract class LayerComponent implements angular.IController {\r\n  public instance: any;\r\n  public componentType: string = 'layer';\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n  private layerGroupComponent: LayerGroupComponent;\r\n  private mapComponent: MapComponent;\r\n\r\n  className?: string;\r\n  opacity?: number;\r\n  visible?: boolean;\r\n  extent?: Extent;\r\n  zIndex?: number;\r\n  minResolution?: number;\r\n  maxResolution?: number;\r\n\r\n  prerender: (evt: Event) => void;\r\n  postrender: (evt: Event) => void;\r\n\r\n  $onInit() {\r\n    this.host = this.layerGroupComponent || this.mapComponent;\r\n\r\n    if (this.prerender !== null && this.prerender !== undefined) {\r\n      this.instance.on('prerender', this.prerender);\r\n    }\r\n    if (this.postrender !== null && this.postrender !== undefined) {\r\n      this.instance.on('postrender', this.postrender);\r\n    }\r\n    this.host.instance.getLayers().push(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.getLayers().remove(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'prerender':\r\n            this.instance.un('prerender', changes[key].previousValue);\r\n            this.instance.on('prerender', changes[key].currentValue);\r\n            break;\r\n          case 'postrender':\r\n            this.instance.un('postrender', changes[key].previousValue);\r\n            this.instance.on('postrender', changes[key].currentValue);\r\n            break;\r\n          case 'source':\r\n            this.instance.setSource(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-layer, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nexport const layerComponentConfig = {\r\n  bindings: {\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    className: '<?',\r\n    // preload:'<?',\r\n    prerender: '&?',\r\n    postrender: '&?',\r\n  },\r\n  require: {\r\n    mapComponent: `?^${mapComponent.name}`,\r\n    /**@FIXME:待修复 */\r\n    layerGroupComponent: `?^^aolLayerGroup`,\r\n  },\r\n};\r\n","import { Feature } from 'ol';\r\nimport { SourceVectorComponent, aolSourceVector } from './sources';\r\n\r\nexport class FeatureComponent implements ng.IController {\r\n  public componentType = 'feature';\r\n  public instance: Feature;\r\n  private host: SourceVectorComponent;\r\n\r\n  id: string | number | undefined;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = new Feature();\r\n    if (this.id !== undefined) {\r\n      this.instance.setId(this.id);\r\n    }\r\n    this.host.instance.addFeature(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeFeature(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (this.instance) {\r\n      this.instance.setId(this.id);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolSourceVector.name}`,\r\n  },\r\n  controller: ['$element', FeatureComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolFeature',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Fill, Circle, Stroke } from 'ol/style';\r\n\r\nexport class styleCircleComponent implements ng.IController {\r\n  public componentType = 'style-circle';\r\n  public instance: Circle;\r\n\r\n  private host: StyleComponent;\r\n\r\n  fill: Fill;\r\n  radius: number = 5;\r\n  snapToPixel: boolean;\r\n  stroke: Stroke;\r\n  // atlasManager: ;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-circle must be applied to a feature or a layer');\r\n    }\r\n  }\r\n\r\n  $postLink() {\r\n    this.instance = new Circle(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  update() {\r\n    if (!!this.instance) {\r\n      this.instance = new Circle(this);\r\n      this.host.instance.setImage(this.instance);\r\n      // this.instance.setRadius(this.radius);\r\n    }\r\n    this.host.update();\r\n    // this.host.instance.changed();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['radius']) {\r\n      this.instance.setRadius(changes['radius'].currentValue);\r\n    }\r\n    // this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStyleCircleComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    fill: '<?',\r\n    radius: '<?',\r\n    snapToPixel: '<?',\r\n    stroke: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleCircleComponent],\r\n};\r\n\r\nexport const aolStyleCircle = {\r\n  name: 'aolStyleCircle',\r\n  ...aolStyleCircleComponent,\r\n};\r\n","import * as angular from 'angular';\r\nimport { View } from 'ol';\r\nimport { Extent } from 'ol/extent';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport mapComponent, { MapComponent } from './map.component';\r\n\r\nexport class ViewComponent implements angular.IController {\r\n  public instance: View;\r\n  public componentType: string = 'view';\r\n  public host: MapComponent;\r\n\r\n  constrainRotation: boolean | number;\r\n  enableRotation: boolean;\r\n  extent: Extent;\r\n  maxResolution: number;\r\n  minResolution: number;\r\n  maxZoom: number;\r\n  minZoom: number;\r\n  resolution: number;\r\n  resolutions: number[];\r\n  rotation: number;\r\n  zoom: number = 11;\r\n  zoomFactor: number;\r\n  center: Coordinate = [104.06, 30.67];\r\n  projection: string;\r\n\r\n  zoomAnimation: Boolean = false;\r\n\r\n  // defaultGive() {\r\n  //   if (this.zoom === undefined) this.zoom = 1;\r\n  //   if (this.center === undefined) this.center = [104.06, 30.67];\r\n  //   if (this.projection === undefined) this.projection = 'EPSG:4326';\r\n  //   if (this.zoomAnimation === undefined) this.zoomAnimation = false;\r\n  // }\r\n\r\n  //   constructor(host: angular.IRootElementService) {}\r\n\r\n  $onInit() {\r\n    // this.defaultGive();\r\n    this.instance = new View(this);\r\n    this.host.instance.setView(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'zoom':\r\n            /** Work-around: setting the zoom via setProperties does not work. */\r\n            if (this.zoomAnimation) {\r\n              this.instance.animate({ zoom: changes[key].currentValue });\r\n            } else {\r\n              this.instance.setZoom(changes[key].currentValue);\r\n            }\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    constrainRotation: '<?',\r\n    enableRotation: '<?',\r\n    extent: '<?',\r\n    maxResolution: '<?',\r\n    minResolution: '<?',\r\n    maxZoom: '<?',\r\n    minZoom: '<?',\r\n    resolution: '<?',\r\n    resolutions: '<?',\r\n    rotation: '<?',\r\n    zoom: '<',\r\n    zoomFactor: '<?',\r\n    center: '<?',\r\n    projection: '<?',\r\n    zoomAnimation: '<?',\r\n  },\r\n  require: {\r\n    host: `^${mapComponent.name}`,\r\n  },\r\n  controller: ['$element', ViewComponent],\r\n};\r\n\r\nexport default {\r\n  name: 'aolView',\r\n  ...component,\r\n};\r\n","export * from './xyz.component';\r\nexport * from './osmmaps.component';\r\nexport * from './vector.component';\r\nexport * from './cluster.component';\r\n\r\nexport * from './tiledebug.component';\r\n","import * as angular from 'angular';\r\nimport aolFeature from './feature.component';\r\nimport { FeatureComponent } from './feature.component';\r\nimport { LineString, Point, Polygon } from 'ol/geom';\r\nimport BaseEvent from 'ol/events/Event';\r\n\r\nexport class GeometryLinestringComponent implements ng.IController {\r\n  public componentType: string = 'geometry-linestring';\r\n  public instance: LineString;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('instancing aol-geometry-linestring');\r\n  //   }\r\n  public change: Function = angular.noop;\r\n\r\n  $onInit() {\r\n    this.instance = new LineString([]);\r\n    this.instance.on('change', (event: BaseEvent) => this.change({ event }));\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\nvar aolGeometryLinestringComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    change: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryLinestringComponent],\r\n};\r\n\r\nexport const aolGeometryLinestring = {\r\n  name: 'aolGeometryLinestring',\r\n  ...aolGeometryLinestringComponent,\r\n};\r\n\r\nexport class GeometryPointComponent implements ng.IController {\r\n  public componentType: string = 'geometry-point';\r\n  public instance: Point;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-point');\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new Point([0, 0]); // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    // this.host.setGeometry(null);\r\n  }\r\n}\r\n\r\nvar aolGeometryPointComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPointComponent],\r\n};\r\n\r\nexport const aolGeometryPoint = {\r\n  name: 'aolGeometryPoint',\r\n  ...aolGeometryPointComponent,\r\n};\r\n\r\nexport class GeometryPolygonComponent implements ng.IController {\r\n  public componentType: string = 'geometry-polygon';\r\n  public instance: Polygon;\r\n  private host: FeatureComponent;\r\n\r\n  //   constructor() {\r\n  //     // console.log('creating aol-geometry-polygon');\r\n  //   }\r\n\r\n  $onInit() {\r\n    // defaulting coordinates to [0,0]. To be overridden in child component.\r\n    this.instance = new Polygon([\r\n      [\r\n        [0, 0],\r\n        [1, 0],\r\n        [1, 1],\r\n      ],\r\n    ]);\r\n    this.host.instance.setGeometry(this.instance);\r\n  }\r\n\r\n  //   $onDestroy() {\r\n  //     // this.host.setGeometry(null);\r\n  //   }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {},\r\n  require: {\r\n    host: `^${aolFeature.name}`,\r\n  },\r\n  controller: [GeometryPolygonComponent],\r\n};\r\n\r\nexport const aolGeometryPolygon = {\r\n  name: 'aolGeometryPolygon',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n","module.exports = ol.geom;","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Text';\r\nimport { Text } from 'ol/style';\r\nimport TextPlacement from 'ol/style/TextPlacement';\r\nimport Fill from 'ol/style/Fill';\r\nimport Stroke from 'ol/style/Stroke';\r\n\r\nexport class styleTextComponent implements ng.IController, Options {\r\n  public componentType = 'style-text';\r\n  public instance: Text;\r\n\r\n  private host: StyleComponent;\r\n\r\n  font?: string;\r\n  maxAngle?: number;\r\n  offsetX?: number;\r\n  offsetY?: number;\r\n  overflow?: boolean;\r\n  placement?: TextPlacement | string;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  text?: string;\r\n  textAlign?: string;\r\n  textBaseline?: string;\r\n  fill?: Fill;\r\n  stroke?: Stroke;\r\n  backgroundFill?: Fill;\r\n  backgroundStroke?: Stroke;\r\n  padding?: number[];\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Text(this);\r\n    this.host.instance.setText(this.instance);\r\n    this.host.update();\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setText(null);\r\n    this.host.update();\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['font']) {\r\n      this.instance.setFont(changes['font'].currentValue);\r\n    }\r\n    if (changes['offsetX']) {\r\n      this.instance.setOffsetX(changes['offsetX'].currentValue);\r\n    }\r\n    if (changes['offsetY']) {\r\n      this.instance.setOffsetY(changes['offsetY'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['text']) {\r\n      this.instance.setText(changes['text'].currentValue);\r\n    }\r\n    if (changes['textAlign']) {\r\n      this.instance.setTextAlign(changes['textAlign'].currentValue);\r\n    }\r\n    if (changes['textBaseLine']) {\r\n      this.instance.setTextBaseline(changes['textBaseLine'].currentValue);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleTextComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    font: '<?',\r\n    maxAngle: '<?',\r\n    offsetX: '<?',\r\n    offsetY: '<?',\r\n    overflow: '<?',\r\n    placement: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    text: '<?',\r\n    textAlign: '<?',\r\n    textBaseline: '<?',\r\n    fill: '<?',\r\n    stroke: '<?',\r\n    backgroundFill: '<?',\r\n    backgroundStroke: '<?',\r\n    padding: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleTextComponent],\r\n};\r\n\r\nexport const aolStyleText = {\r\n  name: 'aolStyleText',\r\n  ...aolStyleTextComponent,\r\n};\r\n","import * as angular from 'angular';\r\n\r\nimport mapComponent from './map.component';\r\nimport viewComponent from './view.component';\r\nimport aolFeature from './feature.component';\r\n\r\nimport {\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerGroup,\r\n  aolLayerWebgl,\r\n} from './layers/index';\r\nimport {\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n} from './sources/index';\r\nimport {\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport {\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n} from './coordinate.component';\r\nimport {\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleFill,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n} from './styles';\r\n\r\nimport { aolOverlay } from './overlay.component';\r\nimport {\r\n  aolInteractionDefaults,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n} from './interactions';\r\nimport { aolInteractionDraw } from './interactions/draw.component';\r\n\r\nvar aolModule = angular.module('aol', []);\r\nfunction registerComponent(component: any) {\r\n  aolModule.component(component.name, component);\r\n}\r\n\r\n[\r\n  mapComponent,\r\n  viewComponent,\r\n  /**图层组件 */\r\n  aolLayerTile,\r\n  aolLayerVector,\r\n  aolLayerWebgl,\r\n  aolLayerGroup,\r\n  /**数据源组件 */\r\n  aolSourceXyz,\r\n  aolSourceOsm,\r\n  aolSourceVector,\r\n  aolSourceCluster,\r\n  aolSourceTiledebug,\r\n  /**要素组件 */\r\n  aolFeature,\r\n  /**geo组件 */\r\n  aolGeometryLinestring,\r\n  aolGeometryPoint,\r\n  aolGeometryPolygon,\r\n  /**坐标组件 */\r\n  aolCoordinate,\r\n  aolCollectionCoordinates,\r\n  /**样式组件 */\r\n  aolStyle,\r\n  aolStyleStroke,\r\n  aolStyleCircle,\r\n  aolStyleIcon,\r\n  aolStyleText,\r\n  aolStyleFill,\r\n  /**domTOMap */\r\n  aolOverlay,\r\n  /**交互 */\r\n  aolInteractionDefaults,\r\n  aolInteractionDraw,\r\n  aolInteractionModify,\r\n  aolInteractionSelect,\r\n  aolInteractionDraganddrop,\r\n].forEach(component => {\r\n  registerComponent(component);\r\n});\r\n\r\nexport default aolModule;\r\n","import { sourceComponentConfig } from './source.component';\r\nimport { XYZ } from 'ol/source';\r\nimport { Options } from 'ol/source/XYZ';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\nimport { LoadFunction, UrlFunction } from 'ol/Tile';\r\nimport { Size } from 'ol/size';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport { SourceXYZExtend } from './xyz.component.extend';\r\n\r\nexport class SourceXYZComponent extends SourceXYZExtend\r\n  implements angular.IController, Options {\r\n  public instance: XYZ;\r\n  public componentType: string = 'sourceXYZComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  opaque?: boolean;\r\n  projection?: ProjectionLike;\r\n  reprojectionErrorThreshold?: number;\r\n  maxZoom?: number;\r\n  minZoom?: number;\r\n  tileGrid?: TileGrid;\r\n  tileLoadFunction?: LoadFunction;\r\n  tilePixelRatio?: number;\r\n  tileSize?: number | Size;\r\n  tileUrlFunction?: UrlFunction;\r\n  url?: string;\r\n  urls?: string[];\r\n  wrapX?: boolean;\r\n  transition?: number;\r\n  zDirection?: number;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    super.decorate();\r\n\r\n    this.instance = new XYZ(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url') || changes.hasOwnProperty('tileGrid')) {\r\n      // this.instance = new XYZ(this);\r\n      // this._register(this.instance);\r\n      this.$onInit();\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    projection: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    minZoom: '<?',\r\n    maxZoom: '<?',\r\n    tileGrid: '<?',\r\n    tileLoadFunction: '<?',\r\n    tilePixelRatio: '<?',\r\n    tileSize: '<?',\r\n    tileUrlFunction: '<?',\r\n    url: '<?',\r\n    urls: '<?',\r\n    wrapX: '<?',\r\n    transition: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: ['$element', SourceXYZComponent],\r\n};\r\n\r\nexport const aolSourceXyz = {\r\n  name: 'aolSourceXyz',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Tile as TileLayer } from 'ol/layer';\r\n\r\nexport class LayerTileComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: TileLayer;\r\n\r\n  preload: number;\r\n  useInterimTilesOnError: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new TileLayer(this);\r\n    super.$onInit();\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    preload: '<?',\r\n    useInterimTilesOnError: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerTileComponent],\r\n};\r\n\r\nexport const aolLayerTile = {\r\n  name: 'aolLayerTile',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { OrderFunction } from 'ol/render';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { StyleLike } from 'ol/style/Style';\r\n// import { Feature } from 'ol';\r\n// import Point from 'ol/geom/Point';\r\n\r\nexport class LayerVectorComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: VectorLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  renderOrder?: OrderFunction;\r\n  renderBuffer?: number;\r\n  source?: VectorSource<Geometry>;\r\n  declutter?: boolean;\r\n  style?: StyleLike;\r\n  updateWhileAnimating?: boolean;\r\n  updateWhileInteracting?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new VectorLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    renderOrder: '<?',\r\n    renderBuffer: '<?',\r\n    source: '<?',\r\n    declutter: '<?',\r\n    style: '<?',\r\n    updateWhileAnimating: '<?',\r\n    updateWhileInteracting: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerVectorComponent],\r\n};\r\n\r\nexport const aolLayerVector = {\r\n  name: 'aolLayerVector',\r\n  ...component,\r\n};\r\n","import { layerComponentConfig, LayerComponent } from './layer.component';\r\nimport { Options } from 'ol/layer/Group';\r\nimport { Group as LayerGroup } from 'ol/layer';\r\nimport { MapComponent } from '../map.component';\r\n\r\nexport class LayerGroupComponent extends LayerComponent\r\n  implements ng.IController, Options {\r\n  public componentType: string = 'LayerGroupComponent';\r\n  public instance: LayerGroup;\r\n\r\n  protected host: MapComponent | LayerGroupComponent;\r\n\r\n  $onInit() {\r\n    // console.log(`creating ol.layer.Group instance with:`, this);\r\n    this.instance = new LayerGroup(this);\r\n    super.$onInit();\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerGroupComponent],\r\n};\r\n\r\nexport const aolLayerGroup = {\r\n  name: 'aolLayerGroup',\r\n  ...component,\r\n};\r\n","import { LayerComponent, layerComponentConfig } from './layer.component';\r\nimport WebGLPointsLayer from 'ol/layer/WebGLPoints';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { LiteralStyle, SymbolType } from 'ol/style/LiteralStyle';\r\n\r\nexport class LayerWebglComponent extends LayerComponent\r\n  implements angular.IController {\r\n  public instance: WebGLPointsLayer;\r\n  public componentType: string = 'LayerVectorComponent';\r\n\r\n  style: any | LiteralStyle = {\r\n    symbol: {\r\n      symbolType: 'circle',\r\n      size: 6,\r\n      color: '#CD853F',\r\n      // [\r\n      //   \"interpolate\",\r\n      //   [\"linear\"],\r\n      //   [\"get\", \"webgltype\"],\r\n      //   \"00\",\r\n      //   \"#CD853F\",\r\n      //   \"01\", // 客船\r\n      //   \"#B0C4DE\",\r\n      //   \"02\", // 货船\r\n      //   \"#08B012\",\r\n      //   \"03\", // 液货船\r\n      //   \"#EA1600\",\r\n      //   \"04\", // 工程船\r\n      //   \"#FF8C00\",\r\n      //   \"05\", // 工作船\r\n      //   \"#D00BC5\",\r\n      //   \"06\", // 拖船\r\n      //   \"#2CD9DC\",\r\n      //   \"0909\", // 游艇\r\n      //   \"#00D28E\",\r\n      //   \"0905\", // 公务船\r\n      //   \"#F5F5F5\",\r\n      //   \"0903\", // 救助船\r\n      //   \"#FFFF00\",\r\n      //   \"90\", // 渔船\r\n      //   \"#1F4EC2\"\r\n      //   // \"09\", // 其他\r\n      // ],\r\n      // rotateWithView: false,\r\n      offset: [0, 0],\r\n    },\r\n  };\r\n  source?: VectorSource<Geometry>;\r\n  disableHitDetection?: boolean;\r\n\r\n  //   constructor(map: MapComponent, @Optional() group?: LayerGroupComponent) {\r\n  //     super(group || map);\r\n  //   }\r\n\r\n  $onInit() {\r\n    this.instance = new WebGLPointsLayer(this);\r\n    super.$onInit();\r\n    // this.instance.setSource(\r\n    //   new VectorSource({\r\n    //     features: [new Feature(new Point([0, 0]))],\r\n    //   }),\r\n    // );\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    super.$onChanges(changes);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...layerComponentConfig.bindings,\r\n    style: '<?',\r\n    className: '<?',\r\n    opacity: '<?',\r\n    visible: '<?',\r\n    extent: '<?',\r\n    zIndex: '<?',\r\n    minResolution: '<?',\r\n    maxResolution: '<?',\r\n    source: '<?',\r\n    disableHitDetection: '<?',\r\n  },\r\n  require: layerComponentConfig.require,\r\n  controller: [LayerWebglComponent],\r\n};\r\n\r\nexport const aolLayerWebgl = {\r\n  name: 'aolLayerWebgl',\r\n  ...component,\r\n};\r\n","module.exports = ol.layer.WebGLPoints;","/*\r\n * @Author: lich\r\n * @Date: 2020-03-17 13:33:45\r\n * @Last Modified by:   lich\r\n * @Last Modified time: 2020-03-17 13:33:45\r\n * 为了解决地图偏移\r\n */\r\nimport TileGrid, { Options } from 'ol/tilegrid/TileGrid';\r\nimport { SourceComponent } from './source.component';\r\n\r\nconst resolutions = [\r\n  156543.03392804097,\r\n  78271.51696402048,\r\n  39135.75848201024,\r\n  19567.87924100512,\r\n  9783.93962050256,\r\n  4891.96981025128,\r\n  2445.98490512564,\r\n  1222.99245256282,\r\n  611.49622628141,\r\n  305.748113140705,\r\n  152.8740565703525,\r\n  76.43702828517625,\r\n  38.21851414258813,\r\n  19.109257071294063,\r\n  9.554628535647032,\r\n  4.777314267823516,\r\n  2.388657133911758,\r\n  1.194328566955879,\r\n  0.5971642834779395,\r\n  0.29858214173896974,\r\n  0.14929107086948487,\r\n  0.07464553543474244,\r\n  0.03732276771737122,\r\n  0.01866138385868561,\r\n  0.009330691929342804,\r\n  0.004665345964671402,\r\n  0.002332672982335701,\r\n  0.0011663364911678506,\r\n  0.0005831682455839253,\r\n  0.00029158412279196264,\r\n  0.00014579206139598132,\r\n  0.00007289603069799066,\r\n  0.00003644801534899533,\r\n  0.000018224007674497665,\r\n  0.000009112003837248832,\r\n  0.000004556001918624416,\r\n  0.000002278000959312208,\r\n  0.000001139000479656104,\r\n  5.69500239828052e-7,\r\n  2.84750119914026e-7,\r\n  1.42375059957013e-7,\r\n  7.11875299785065e-8,\r\n  3.559376498925325e-8,\r\n];\r\n\r\nconst resolutions_4326 = [\r\n  1.40625,\r\n  0.703125,\r\n  0.3515625,\r\n  0.17578125,\r\n  0.087890625,\r\n  0.0439453125,\r\n  0.02197265625,\r\n  0.010986328125,\r\n  0.0054931640625,\r\n  0.00274658203125,\r\n  0.001373291015625,\r\n  0.0006866455078125,\r\n  0.00034332275390625,\r\n  0.000171661376953125,\r\n  0.0000858306884765625,\r\n  0.00004291534423828125,\r\n  0.000021457672119140625,\r\n  0.000010728836059570312,\r\n  0.000005364418029785156,\r\n  0.000002682209014892578,\r\n  0.000001341104507446289,\r\n  6.705522537231445e-7,\r\n  3.3527612686157227e-7,\r\n  1.6763806343078613e-7,\r\n  8.381903171539307e-8,\r\n  4.190951585769653e-8,\r\n  2.0954757928848267e-8,\r\n  1.0477378964424133e-8,\r\n  5.238689482212067e-9,\r\n  2.6193447411060333e-9,\r\n  1.3096723705530167e-9,\r\n  6.548361852765083e-10,\r\n  3.2741809263825417e-10,\r\n  1.6370904631912708e-10,\r\n  8.185452315956354e-11,\r\n  4.092726157978177e-11,\r\n  2.0463630789890885e-11,\r\n  1.0231815394945443e-11,\r\n  5.115907697472721e-12,\r\n  2.5579538487363607e-12,\r\n  1.2789769243681803e-12,\r\n  6.394884621840902e-13,\r\n  3.197442310920451e-13,\r\n];\r\n\r\nexport class SourceXYZExtend extends SourceComponent {\r\n  tileGrid?: any;\r\n  projection?: any;\r\n  decorate() {\r\n    if (!this.tileGrid || this.tileGrid.forEachTileCoord) return;\r\n    if (!this.tileGrid.resolutions) {\r\n      this.tileGrid.resolutions =\r\n        this.projection === 'EPSG:4326' ? resolutions_4326 : resolutions;\r\n    }\r\n    this.tileGrid = new TileGrid(this.tileGrid);\r\n  }\r\n}\r\n","module.exports = ol.tilegrid.TileGrid;","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { OSM } from 'ol/source';\r\nimport { LoadFunction } from 'ol/Tile';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\n\r\nexport class SourceOSMComponent extends SourceComponent\r\n  implements ng.IController {\r\n  public instance: OSM;\r\n  public componentType: string = 'SourceOSMComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  cacheSize?: number;\r\n  crossOrigin?: string;\r\n  maxZoom?: number;\r\n  opaque?: boolean;\r\n  reprojectionErrorThreshold?: number;\r\n  tileLoadFunction?: LoadFunction;\r\n  url?: string;\r\n  wrapX?: boolean;\r\n\r\n  $onInit() {\r\n    this.instance = new OSM(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('url')) {\r\n      this.instance = new OSM(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    cacheSize: '<?',\r\n    crossOrigin: '<?',\r\n    opaque: '<?',\r\n    reprojectionErrorThreshold: '<?',\r\n    maxZoom: '<?',\r\n    tileLoadFunction: '<?',\r\n    url: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceOSMComponent],\r\n};\r\n\r\nexport const aolSourceOsm = {\r\n  name: 'aolSourceOsm',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport {\r\n  aolLayerVector,\r\n  LayerVectorComponent,\r\n  LayerGroupComponent,\r\n  aolLayerWebgl,\r\n} from '../layers';\r\nimport { LoadingStrategy } from 'ol/source/Vector';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport { Feature, Collection } from 'ol';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { FeatureLoader, FeatureUrlFunction } from 'ol/featureloader';\r\n\r\nexport class SourceVectorComponent extends SourceComponent\r\n  implements angular.IController {\r\n  public instance: VectorSource;\r\n  public componentType: string = 'SourceVectorComponent';\r\n  public host: LayerVectorComponent | LayerGroupComponent;\r\n  public layerVectorHost: LayerVectorComponent;\r\n  public layerWebglHost: LayerGroupComponent;\r\n\r\n  features?: Feature<Geometry>[] | Collection<Feature<Geometry>>;\r\n  format?: FeatureFormat;\r\n  loader?: FeatureLoader;\r\n  overlaps?: boolean;\r\n  strategy?: LoadingStrategy;\r\n  url?: string | FeatureUrlFunction;\r\n  useSpatialIndex?: boolean;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if (this.layerVectorHost) {\r\n      this.host = this.layerVectorHost;\r\n    } else if (this.layerWebglHost) {\r\n      this.host = this.layerWebglHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-source-vector must be applied to a Style or layerWebglHost or layerVectorHost component',\r\n      );\r\n    }\r\n\r\n    this.instance = new VectorSource(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'features':\r\n            this.instance.addFeatures(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    // if (changes.hasOwnProperty('url')) {\r\n    //   this.instance = new VectorSource(this);\r\n    //   this._register(this.instance);\r\n    // }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    features: '<?',\r\n    format: '<?',\r\n    loader: '<?',\r\n    overlaps: '<?',\r\n    strategy: '<?',\r\n    url: '<?',\r\n    useSpatialIndex: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    layerVectorHost: `^?${aolLayerVector.name}`,\r\n    layerWebglHost: `^?${aolLayerWebgl.name}`,\r\n  },\r\n  controller: [SourceVectorComponent],\r\n};\r\n\r\nexport const aolSourceVector = {\r\n  name: 'aolSourceVector',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from \"./source.component\";\r\nimport { Cluster  } from \"ol/source\";\r\nimport { Options  } from \"ol/source/Cluster\";\r\nimport { Feature } from \"ol\";\r\nimport { Geometry, Point } from \"ol/geom\";\r\nimport { Vector } from \"ol/source\";\r\nimport { LayerVectorComponent, aolLayerVector } from \"../layers\";\r\n\r\nexport class SourceClusterComponent extends SourceComponent\r\n  implements angular.IController , Options {\r\n  public instance: Cluster;\r\n  public componentType: string = 'SourceClusterComponent';\r\n  public host: LayerVectorComponent;\r\n\r\n  distance?: number;\r\n  geometryFunction?: (p0: Feature<Geometry>) => Point;\r\n  source: Vector<Geometry>;\r\n  wrapX?: boolean;\r\n\r\n  //   constructor(host: angular.IRootElementService) {\r\n\r\n  //   }\r\n\r\n  $onInit() {\r\n    if(!this.source) return ;\r\n    this.instance = new Cluster(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n    if (changes.hasOwnProperty('source')) {\r\n      this.$onDestroy();\r\n      this.instance = new Cluster(this);\r\n      this._register(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    distance: '<?',\r\n    geometryFunction: '<?',\r\n    source: '<',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerVector.name}`,\r\n  },\r\n  controller: ['$element', SourceClusterComponent],\r\n};\r\n\r\n\r\nexport const aolSourceCluster = {\r\n  name: 'aolSourceCluster',\r\n  ...component,\r\n};\r\n","import { SourceComponent, sourceComponentConfig } from './source.component';\r\nimport { TileDebug } from 'ol/source';\r\nimport { Options } from 'ol/source/TileDebug';\r\nimport { LayerTileComponent, aolLayerTile } from '../layers';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\n\r\nexport class SourceTiledebugComponent extends SourceComponent\r\n  implements ng.IController, Options {\r\n  public instance: TileDebug;\r\n  public componentType: string = 'SourceTiledebugComponent';\r\n  public host: LayerTileComponent;\r\n\r\n  projection?: ProjectionLike;\r\n  tileGrid?: TileGrid;\r\n  wrapX?: boolean;\r\n  zDirection?: number;\r\n\r\n  $onInit() {\r\n    this.instance = new TileDebug(this);\r\n    this._register(this.instance);\r\n  }\r\n\r\n  ngOnChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  // template: `\r\n  //           <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    ...sourceComponentConfig.bindings,\r\n    projection: '<?',\r\n    tileGrid: '<?',\r\n    wrapX: '<?',\r\n    zDirection: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolLayerTile.name}`,\r\n  },\r\n  controller: [SourceTiledebugComponent],\r\n};\r\n\r\nexport const aolSourceTiledebug = {\r\n  name: 'aolSourceTiledebug',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { MapComponent } from './map.component';\r\nimport { ViewComponent } from './view.component';\r\nimport {\r\n  GeometryPointComponent,\r\n  aolGeometryPoint,\r\n  GeometryLinestringComponent,\r\n  GeometryPolygonComponent,\r\n  aolGeometryLinestring,\r\n  aolGeometryPolygon,\r\n} from './geometry.component';\r\nimport Projection from 'ol/proj/Projection';\r\nimport { transform } from 'ol/proj';\r\nimport aolView from './view.component';\r\nimport aolMap from './map.component';\r\nimport { Coordinate } from 'ol/coordinate';\r\n\r\nexport class CoordinateComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private viewHost?: ViewComponent;\r\n  private geometryPointHost?: GeometryPointComponent;\r\n  // private overlayHost?:GeometryPointComponent;\r\n\r\n  x: number;\r\n  y: number;\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    if (this.geometryPointHost) {\r\n      this.host = this.geometryPointHost;\r\n    } else if (this.viewHost) {\r\n      this.host = this.viewHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n    //    else if (overlayHost !== null) {\r\n    //     this.host = overlayHost;\r\n    //   }\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !angular.isNumber(this.x) || !angular.isNumber(this.y))\r\n      return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: number[];\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = [this.x, this.y];\r\n    } else {\r\n      transformedCoordinates = transform(\r\n        [this.x, this.y],\r\n        this.srid,\r\n        referenceProjectionCode,\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-point':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'view':\r\n        this.host.instance.setCenter(transformedCoordinates);\r\n        break;\r\n      // case \"overlay\":\r\n      //   this.host.instance.setPosition(transformedCoordinates);\r\n      //   break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolGeometryPolygonComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    x: '<',\r\n    y: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    viewHost: `?^${aolView.name}`,\r\n    geometryPointHost: `?^${aolGeometryPoint.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CoordinateComponent],\r\n};\r\n\r\nexport const aolCoordinate = {\r\n  name: 'aolCoordinate',\r\n  ...aolGeometryPolygonComponent,\r\n};\r\n\r\nexport class CollectionCoordinatesComponent implements ng.IController {\r\n  private host: any;\r\n\r\n  private map: MapComponent;\r\n  private geometryLinestring?: GeometryLinestringComponent;\r\n  private geometryPolygon?: GeometryPolygonComponent;\r\n\r\n  coordinates: [number, number][];\r\n  srid: string = 'EPSG:4326';\r\n\r\n  $onInit() {\r\n    // console.log('creating aol-collection-coordinates');\r\n    if (!!this.geometryLinestring) {\r\n      this.host = this.geometryLinestring;\r\n    } else if (!!this.geometryPolygon) {\r\n      this.host = this.geometryPolygon;\r\n    } else {\r\n      throw new Error(\r\n        'aol-collection-coordinates must be a child of a geometry component',\r\n      );\r\n    }\r\n    this.$onChanges({});\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    if (!this.host || !(this.coordinates instanceof Array)) return;\r\n    let referenceProjection: Projection;\r\n    let referenceProjectionCode: string;\r\n    let transformedCoordinates: Array<Coordinate>;\r\n\r\n    // console.log('coordinates change: ', this.coordinates);\r\n\r\n    referenceProjection = this.map.instance.getView().getProjection();\r\n    referenceProjectionCode = referenceProjection\r\n      ? referenceProjection.getCode()\r\n      : 'EPSG:3857';\r\n\r\n    if (this.srid === referenceProjectionCode) {\r\n      transformedCoordinates = this.coordinates;\r\n    } else {\r\n      transformedCoordinates = [];\r\n      this.coordinates.forEach(\r\n        function(coordinate: Coordinate) {\r\n          transformedCoordinates.push(\r\n            transform(coordinate, this.srid, referenceProjectionCode),\r\n          );\r\n        }.bind(this),\r\n      );\r\n    }\r\n\r\n    switch (this.host.componentType) {\r\n      case 'geometry-linestring':\r\n        this.host.instance.setCoordinates(transformedCoordinates);\r\n        break;\r\n      case 'geometry-polygon':\r\n        this.host.instance.setCoordinates([transformedCoordinates]);\r\n        break;\r\n      default:\r\n        throw new Error(\r\n          \"aol-collection-coordinates' host is of unknown type: \" +\r\n            this.host.componentType,\r\n        );\r\n      // break;\r\n    }\r\n  }\r\n}\r\n\r\nconst aolCollectionCoordinatesComponent: angular.IComponentOptions = {\r\n  bindings: {\r\n    coordinates: '<',\r\n    srid: '<?',\r\n  },\r\n  require: {\r\n    geometryPolygon: `?^${aolGeometryPolygon.name}`,\r\n    geometryLinestring: `?^${aolGeometryLinestring.name}`,\r\n    map: `^${aolMap.name}`,\r\n  },\r\n  controller: [CollectionCoordinatesComponent],\r\n};\r\n\r\nexport const aolCollectionCoordinates = {\r\n  name: 'aolCollectionCoordinates',\r\n  ...aolCollectionCoordinatesComponent,\r\n};\r\n","module.exports = ol.proj;","export * from \"./style.component\";\r\nexport * from \"./stroke.component\";\r\nexport * from \"./fill.component\";\r\nexport * from \"./circle.component\";\r\nexport * from \"./icon.component\";\r\nexport * from \"./text.component\";","import { Options } from 'ol/style/Stroke';\r\nimport { Stroke } from 'ol/style';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\n\r\nexport class StrokeComponent implements ng.IController, Options {\r\n  public componentType = 'style-stroke';\r\n  public instance: Stroke;\r\n\r\n  private host: any; // StyleComponent | CircleComponent;\r\n\r\n  color?: Color | ColorLike;\r\n  lineCap?: CanvasLineCap;\r\n  lineJoin?: CanvasLineJoin;\r\n  lineDash?: number[];\r\n  lineDashOffset?: number;\r\n  miterLimit?: number;\r\n  width?: number;\r\n\r\n  //   protected layerVectorHost: LayerVectorComponent;\r\n  protected styleHost: StyleComponent;\r\n  protected styleCircleHost: styleCircleComponent;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error('aol-style must be applied to a feature or a layer');\r\n    }\r\n    this.instance = new Stroke(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = this.instance;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n\r\n  $onDestroy() {\r\n    // this.host.instance.setStroke(null);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.stroke = null;\r\n        this.host.update();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'color':\r\n            this.instance.setColor(changes[key].currentValue);\r\n            break;\r\n          case 'lineCap':\r\n            this.instance.setLineCap(changes[key].currentValue);\r\n            break;\r\n          case 'lineDash':\r\n            this.instance.setLineDash(changes[key].currentValue);\r\n            break;\r\n          case 'lineDashOffset':\r\n            this.instance.setLineDashOffset(changes[key].currentValue);\r\n            break;\r\n          case 'lineJoin':\r\n            this.instance.setLineJoin(changes[key].currentValue);\r\n            break;\r\n          case 'miterLimit':\r\n            this.instance.setMiterLimit(changes[key].currentValue);\r\n            break;\r\n          case 'width':\r\n            this.instance.setWidth(changes[key].currentValue);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n    this.host.update();\r\n  }\r\n}\r\n\r\nvar aolStrokeComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n    lineCap: '<?',\r\n    lineJoin: '<?',\r\n    lineDash: '<?',\r\n    lineDashOffset: '<?',\r\n    miterLimit: '<?',\r\n    width: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n  },\r\n  controller: [StrokeComponent],\r\n};\r\n\r\nexport const aolStyleStroke = {\r\n  name: 'aolStyleStroke',\r\n  ...aolStrokeComponent,\r\n};\r\n","import { Options } from 'ol/style/Stroke';\r\nimport { StyleComponent, aolStyle } from './style.component';\r\nimport { Color } from 'ol/color';\r\nimport { ColorLike } from 'ol/colorlike';\r\nimport { Fill } from 'ol/style';\r\nimport { styleCircleComponent, aolStyleCircle } from './circle.component';\r\nimport { styleTextComponent, aolStyleText } from './text.component';\r\n\r\nexport class FillComponent implements ng.IController, Options {\r\n  public componentType = 'fill';\r\n  public instance: Fill;\r\n\r\n  private host: any; // StyleComponent;\r\n  private styleHost: StyleComponent;\r\n  private styleCircleHost: styleCircleComponent;\r\n  private styleTextHost: styleTextComponent;\r\n\r\n  color?: Color | ColorLike;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (this.styleTextHost) {\r\n      this.host = this.styleTextHost;\r\n    } else if (this.styleCircleHost) {\r\n      this.host = this.styleCircleHost;\r\n    } else if (this.styleHost) {\r\n      this.host = this.styleHost;\r\n    } else {\r\n      throw new Error(\r\n        'aol-style-fill must be applied to a Style or styleCircleHost or StyleText component',\r\n      );\r\n    }\r\n    this.instance = new Fill(this);\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  // $postLink(){\r\n  //     this.host.instance.setStyle(this.instance);\r\n  // }\r\n\r\n  //   update() {\r\n  //     this.host.instance.changed();\r\n  //   }\r\n  $onDestroy() {\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(null);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    // this.host.instance.setFill(new Fill({color:changes['color'].currentValue}))\r\n    this.instance = new Fill({ color: changes['color'].currentValue });\r\n    switch (this.host.componentType) {\r\n      case 'style':\r\n        this.host.instance.setStroke(this.instance);\r\n        break;\r\n      case 'style-circle':\r\n        this.host.fill = this.instance;\r\n        this.host.update();\r\n        break;\r\n      case 'style-text':\r\n        this.host.instance.setFill(this.instance);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nvar aolFillComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    color: '<?',\r\n  },\r\n  require: {\r\n    styleHost: `?^${aolStyle.name}`,\r\n    styleCircleHost: `?^${aolStyleCircle.name}`,\r\n    styleTextHost: `?^${aolStyleText.name}`,\r\n  },\r\n  controller: [FillComponent],\r\n};\r\n\r\nexport const aolStyleFill = {\r\n  name: 'aolStyleFill',\r\n  ...aolFillComponent,\r\n};\r\n","import { StyleComponent, aolStyle } from './style.component';\r\nimport { Options } from 'ol/style/Icon';\r\nimport { Icon } from 'ol/style';\r\nimport IconOrigin from 'ol/style/IconOrigin';\r\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits';\r\nimport { Color } from 'ol/color';\r\nimport { Size } from 'ol/size';\r\n\r\nexport class styleIconComponent implements ng.IController, Options {\r\n  public componentType = 'style-icon';\r\n  public instance: Icon;\r\n\r\n  private host: StyleComponent;\r\n\r\n  anchor?: number[];\r\n  anchorOrigin?: IconOrigin;\r\n  anchorXUnits?: IconAnchorUnits;\r\n  anchorYUnits?: IconAnchorUnits;\r\n  color?: Color | string;\r\n  crossOrigin?: string;\r\n  img?: HTMLImageElement | HTMLCanvasElement;\r\n  offset?: number[];\r\n  offsetOrigin?: IconOrigin;\r\n  opacity?: number;\r\n  scale?: number;\r\n  rotateWithView?: boolean;\r\n  rotation?: number;\r\n  size?: Size;\r\n  imgSize?: Size;\r\n  src?: string;\r\n\r\n  // constructor() {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      throw new Error('aol-style-icon must be applied to a style component');\r\n    }\r\n    this.instance = new Icon(this);\r\n    this.host.instance.setImage(this.instance);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.setImage(null);\r\n  }\r\n\r\n  //@TODO: 增加其他属性的监听\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    if (changes['opacity']) {\r\n      this.instance.setOpacity(changes['opacity'].currentValue);\r\n    }\r\n    if (changes['rotation']) {\r\n      this.instance.setRotation(changes['rotation'].currentValue);\r\n    }\r\n    if (changes['scale']) {\r\n      this.instance.setScale(changes['scale'].currentValue);\r\n    }\r\n    if (changes['src']) {\r\n      this.instance = new Icon(this);\r\n      this.host.instance.setImage(this.instance);\r\n    }\r\n    this.host.update();\r\n    // console.log('changes detected in aol-style-icon: ', changes);\r\n  }\r\n}\r\n\r\nvar aolStyleIconComponent: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    anchor: '<?',\r\n    anchorOrigin: '<?',\r\n    anchorXUnits: '<?',\r\n    anchorYUnits: '<?',\r\n    color: '<?',\r\n    crossOrigin: '<?',\r\n    img: '<?',\r\n    offset: '<?',\r\n    offsetOrigin: '<?',\r\n    opacity: '<?',\r\n    scale: '<?',\r\n    rotateWithView: '<?',\r\n    rotation: '<?',\r\n    size: '<?',\r\n    imgSize: '<?',\r\n    src: '<?',\r\n  },\r\n  require: {\r\n    host: `?^${aolStyle.name}`,\r\n  },\r\n  controller: [styleIconComponent],\r\n};\r\n\r\nexport const aolStyleIcon = {\r\n  name: 'aolStyleIcon',\r\n  ...aolStyleIconComponent,\r\n};\r\n","import { Overlay } from 'ol';\r\nimport { Options, PanOptions } from 'ol/Overlay';\r\nimport OverlayPositioning from 'ol/OverlayPositioning';\r\nimport { Coordinate } from 'ol/coordinate';\r\nimport aolMap, { MapComponent } from './map.component';\r\n\r\nexport class OverlayComponent implements ng.IController, Options {\r\n  componentType = 'overlay';\r\n  private instance: Overlay;\r\n  protected host: MapComponent;\r\n\r\n  $element: ng.IRootElementService;\r\n\r\n  // element: Element;\r\n\r\n  id: number | string;\r\n  element: HTMLElement;\r\n  offset?: number[];\r\n  position?: Coordinate;\r\n  positioning?: OverlayPositioning;\r\n  stopEvent?: boolean;\r\n  insertFirst?: boolean;\r\n  autoPan?: boolean;\r\n  autoPanAnimation?: PanOptions;\r\n  autoPanMargin?: number;\r\n  className?: string;\r\n\r\n  constructor($element: ng.IRootElementService) {\r\n    this.$element = $element;\r\n  }\r\n\r\n  $onInit() {\r\n    /**@TODO: this.element , $element */\r\n    if (this.$element[0]) {\r\n      this.element = this.$element[0];\r\n      this.instance = new Overlay(this);\r\n      this.host.instance.addOverlay(this.instance);\r\n    }\r\n  }\r\n\r\n  $onChanges(changes: angular.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      properties[key] = changes[key].currentValue;\r\n    }\r\n    // console.log('changes detected in aol-view, setting new properties: ', properties);\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    if (this.instance) {\r\n      this.host.instance.removeOverlay(this.instance);\r\n    }\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    id: '<?',\r\n    element: '<?',\r\n    offset: '<?',\r\n    position: '<?',\r\n    positioning: '<?',\r\n    stopEvent: '<?',\r\n    insertFirst: '<?',\r\n    autoPan: '<?',\r\n    autoPanAnimation: '<?',\r\n    autoPanMargin: '<?',\r\n    className: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', OverlayComponent],\r\n};\r\n\r\nexport const aolOverlay = {\r\n  name: 'aolOverlay',\r\n  ...component,\r\n};\r\n","export * from './default.component';\r\nexport * from './modify.component';\r\nexport * from './select.component';\r\nexport * from './draganddrop.component';\r\n","import { Collection } from 'ol';\r\nimport Interaction from 'ol/interaction/Interaction';\r\nimport {\r\n  defaults as defaultInteraction,\r\n  DefaultsOptions,\r\n} from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\n\r\nexport class DefaultInteractionComponent\r\n  implements ng.IController, DefaultsOptions {\r\n  instance: Collection<Interaction>;\r\n  private host: MapComponent;\r\n\r\n  altShiftDragRotate?: boolean;\r\n  onFocusOnly?: boolean;\r\n  doubleClickZoom?: boolean;\r\n  keyboard?: boolean;\r\n  mouseWheelZoom?: boolean;\r\n  shiftDragZoom?: boolean;\r\n  dragPan?: boolean;\r\n  pinchRotate?: boolean;\r\n  pinchZoom?: boolean;\r\n  zoomDelta?: number;\r\n  zoomDuration?: number;\r\n\r\n  //   constructor() {}\r\n\r\n  $onInit() {\r\n    this.instance = defaultInteraction(this);\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.addInteraction(interaction),\r\n    );\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.instance.forEach(interaction =>\r\n      this.host.instance.removeInteraction(interaction),\r\n    );\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    altShiftDragRotate: '<?',\r\n    onFocusOnly: '<?',\r\n    doubleClickZoom: '<?',\r\n    keyboard: '<?',\r\n    mouseWheelZoom: '<?',\r\n    shiftDragZoom: '<?',\r\n    dragPan: '<?',\r\n    pinchRotate: '<?',\r\n    pinchZoom: '<?',\r\n    zoomDelta: '<?',\r\n    zoomDuration: '<',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DefaultInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDefaults = {\r\n  name: 'aolInteractionDefaults',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Modify } from 'ol/interaction';\r\nimport { Options, ModifyEvent } from 'ol/interaction/Modify';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Geometry from 'ol/geom/Geometry';\r\nimport { Collection, Feature } from 'ol';\r\n\r\nexport class ModifyInteractionComponent implements ng.IController, Options {\r\n  private instance: Modify;\r\n  protected host: MapComponent;\r\n\r\n  condition?: Condition;\r\n  deleteCondition?: Condition;\r\n  insertVertexCondition?: Condition;\r\n  pixelTolerance?: number;\r\n  style?: StyleLike;\r\n  source?: VectorSource<Geometry>;\r\n  features?: Collection<Feature<Geometry>>;\r\n  wrapX?: boolean;\r\n\r\n  onModifyEnd = angular.noop;\r\n  onModifyStart = angular.noop;\r\n  onChange = angular.noop;\r\n  onChangeActive = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.source && !this.features) {\r\n      console.error('The modify interaction requires features or a source');\r\n      return;\r\n    }\r\n    this.instance = new Modify(this);\r\n    this.instance.on('change', (event: ModifyEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('change:active', (event: ModifyEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: ModifyEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.instance.on('modifyend', (event: ModifyEvent) =>\r\n      this.onModifyEnd({ event }),\r\n    );\r\n    this.instance.on('modifystart', (event: ModifyEvent) =>\r\n      this.onModifyStart({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      this.$onInit();\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    condition: '<',\r\n    deleteCondition: '<?',\r\n    insertVertexCondition: '<?',\r\n    pixelTolerance: '<?',\r\n    style: '<?',\r\n    source: '<?',\r\n    features: '<?',\r\n    wrapX: '<?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', ModifyInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionModify = {\r\n  name: 'aolInteractionModify',\r\n  ...component,\r\n};\r\n","import * as angular from 'angular';\r\nimport { Select } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { Options, FilterFunction, SelectEvent } from 'ol/interaction/Select';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { Source } from 'ol/source';\r\nimport { Layer } from 'ol/layer';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport { SelectInteractionExtend } from './select.component.extend';\r\n\r\nexport class SelectInteractionComponent extends SelectInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Select;\r\n  protected host: MapComponent;\r\n\r\n  addCondition?: Condition;\r\n  condition?: Condition;\r\n  layers?: Layer<Source>[] | ((p0: Layer<Source>) => boolean);\r\n  style?: StyleLike;\r\n  removeCondition?: Condition;\r\n  toggleCondition?: Condition;\r\n  multi?: boolean;\r\n  features?: Collection<Feature<Geometry>>;\r\n  filter?: FilterFunction;\r\n  hitTolerance?: number;\r\n\r\n  onSelect = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The select interaction requires map component');\r\n      return;\r\n    }\r\n    super.initCondition();\r\n    this.instance = new Select(this);\r\n    this.instance.on('select', (event: SelectEvent) =>\r\n      this.onSelect({ event }),\r\n    );\r\n    this.instance.on('change', (event: SelectEvent) =>\r\n      this.onChange({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: SelectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        properties[key] = changes[key].currentValue;\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    addCondition: '<',\r\n    condition: '<?',\r\n    layers: '<?',\r\n    style: '<?',\r\n    removeCondition: '<?',\r\n    toggleCondition: '<?',\r\n    multi: '<?',\r\n    features: '<?',\r\n    filter: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onSelect: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', SelectInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionSelect = {\r\n  name: 'aolInteractionSelect',\r\n  ...component,\r\n};\r\n","import {\r\n  Condition,\r\n  altKeyOnly,\r\n  altShiftKeysOnly,\r\n  click,\r\n  doubleClick,\r\n  mouseActionButton,\r\n  mouseOnly,\r\n  noModifierKeys,\r\n  penOnly,\r\n  focus,\r\n  platformModifierKeyOnly,\r\n  pointerMove,\r\n  primaryAction,\r\n  shiftKeyOnly,\r\n  singleClick,\r\n  targetNotEditable,\r\n  touchOnly,\r\n} from 'ol/events/condition';\r\n\r\n// var conditionType:\r\n//   | 'altKeyOnly'\r\n//   | 'altShiftKeysOnly'\r\n//   | 'click'\r\n//   | 'doubleClick'\r\n//   | 'focus'\r\n//   | 'mouseActionButton'\r\n//   | 'mouseOnly'\r\n//   | 'noModifierKeys'\r\n//   | 'penOnly'\r\n//   | 'platformModifierKeyOnly'\r\n//   | 'pointerMove'\r\n//   | 'primaryAction'\r\n//   | 'shiftKeyOnly'\r\n//   | 'singleClick'\r\n//   | 'targetNotEditable'\r\n//   | 'touchOnly';\r\n\r\nexport class SelectInteractionExtend {\r\n  condition?: Condition;\r\n  /**初始化condition状态 */\r\n  initCondition() {\r\n    var key: conditionType | Condition = this.condition;\r\n    if (typeof key === 'function') return key;\r\n    switch (key) {\r\n      case 'altKeyOnly':\r\n        this.condition = altKeyOnly;\r\n        break;\r\n      case 'altShiftKeysOnly':\r\n        this.condition = altShiftKeysOnly;\r\n        break;\r\n      case 'click':\r\n        this.condition = click;\r\n        break;\r\n      case 'doubleClick':\r\n        this.condition = doubleClick;\r\n        break;\r\n      case 'focus':\r\n        this.condition = focus;\r\n        break;\r\n      case 'mouseActionButton':\r\n        this.condition = mouseActionButton;\r\n        break;\r\n      case 'mouseOnly':\r\n        this.condition = mouseOnly;\r\n        break;\r\n      case 'noModifierKeys':\r\n        this.condition = noModifierKeys;\r\n        break;\r\n      case 'penOnly':\r\n        this.condition = penOnly;\r\n        break;\r\n      case 'platformModifierKeyOnly':\r\n        this.condition = platformModifierKeyOnly;\r\n        break;\r\n      case 'pointerMove':\r\n        this.condition = pointerMove;\r\n        break;\r\n      case 'primaryAction':\r\n        this.condition = primaryAction;\r\n        break;\r\n      case 'shiftKeyOnly':\r\n        this.condition = shiftKeyOnly;\r\n        break;\r\n      case 'singleClick':\r\n        this.condition = singleClick;\r\n        break;\r\n      case 'targetNotEditable':\r\n        this.condition = targetNotEditable;\r\n        break;\r\n      case 'touchOnly':\r\n        this.condition = touchOnly;\r\n        break;\r\n      default:\r\n        this.condition = click;\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nenum conditionType {\r\n  altKeyOnly = 'altKeyOnly',\r\n  altShiftKeysOnly = 'altShiftKeysOnly',\r\n  click = 'click',\r\n  doubleClick = 'doubleClick',\r\n  focus = 'focus',\r\n  mouseActionButton = 'mouseActionButton',\r\n  mouseOnly = 'mouseOnly',\r\n  noModifierKeys = 'noModifierKeys',\r\n  penOnly = 'penOnly',\r\n  platformModifierKeyOnly = 'platformModifierKeyOnly',\r\n  pointerMove = 'pointerMove',\r\n  primaryAction = 'primaryAction',\r\n  shiftKeyOnly = 'shiftKeyOnly',\r\n  singleClick = 'singleClick',\r\n  targetNotEditable = 'targetNotEditable',\r\n  touchOnly = 'touchOnly',\r\n}\r\n","module.exports = ol.events.condition;","import * as angular from 'angular';\r\nimport { Options, DragAndDropEvent } from 'ol/interaction/DragAndDrop';\r\nimport { DragAndDrop } from 'ol/interaction';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport FeatureFormat from 'ol/format/Feature';\r\nimport { Vector } from 'ol/source';\r\nimport { Geometry } from 'ol/geom';\r\nimport { ProjectionLike } from 'ol/proj';\r\nimport BaseEvent from 'ol/events/Event';\r\nimport { ObjectEvent } from 'ol/Object';\r\nimport { DraganddropInteractionExtend } from './draganddrop.component.extend';\r\n\r\nexport class DraganddropInteractionComponent\r\n  extends DraganddropInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: DragAndDrop;\r\n  protected host: MapComponent;\r\n\r\n  formatConstructors?: FeatureFormat[];\r\n  source?: Vector<Geometry>;\r\n  projection?: ProjectionLike;\r\n  target?: HTMLElement;\r\n\r\n  onAddFeatures = angular.noop;\r\n  onChange = angular.noop;\r\n  onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    if (!this.host) {\r\n      console.error('The DragAndDrop interaction requires map component');\r\n      return;\r\n    }\r\n    super.decorate(this);\r\n    this.instance = new DragAndDrop(this);\r\n    this.instance.on('addfeatures', (event: DragAndDropEvent) =>\r\n      this.onAddFeatures({ event }),\r\n    );\r\n    this.instance.on('change', (event: BaseEvent) => this.onChange({ event }));\r\n    this.instance.on('propertychange', (event: ObjectEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    formatConstructors: '<',\r\n    source: '<?',\r\n    projection: '<?',\r\n    target: '<?',\r\n    onChange: '&?',\r\n    onAddFeatures: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: [DraganddropInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraganddrop = {\r\n  name: 'aolInteractionDraganddrop',\r\n  ...component,\r\n};\r\n","import { DraganddropInteractionComponent } from './draganddrop.component';\r\n// import FeatureFormat from 'ol/format/Feature';\r\nimport {\r\n  GPX,\r\n  GeoJSON,\r\n  IGC,\r\n  KML,\r\n  TopoJSON,\r\n  EsriJSON,\r\n  GML,\r\n  IIIFInfo,\r\n  MVT,\r\n  OWS,\r\n  Polyline,\r\n  WFS,\r\n  WKT,\r\n  WMSCapabilities,\r\n  WMSGetFeatureInfo,\r\n  WMTSCapabilities,\r\n} from 'ol/format';\r\n\r\nexport abstract class DraganddropInteractionExtend {\r\n  defaultFormat: { [index: string]: any } = {\r\n    GPX,\r\n    GeoJSON,\r\n    IGC,\r\n    KML,\r\n    TopoJSON,\r\n    EsriJSON,\r\n    GML,\r\n    IIIFInfo,\r\n    MVT,\r\n    OWS,\r\n    Polyline,\r\n    WFS,\r\n    WKT,\r\n    WMSCapabilities,\r\n    WMSGetFeatureInfo,\r\n    WMTSCapabilities,\r\n  };\r\n\r\n  decorate(child: DraganddropInteractionComponent) {\r\n    if (child.formatConstructors) {\r\n      child.formatConstructors = this.getFormat(child.formatConstructors);\r\n    }\r\n  }\r\n\r\n  getFormat(featureConlist: any[]) {\r\n    return featureConlist.map(item => {\r\n      //@FIXME: ol打包问题产生 && item instanceof FeatureFormat\r\n      if (typeof item === 'function') {\r\n        return item;\r\n      }\r\n      let formatCon = this.defaultFormat[item];\r\n      if (formatCon) {\r\n        return formatCon;\r\n      } else {\r\n        throw new Error('DragandDrop不存在当前FeatureFormat');\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = ol.format;","import * as angular from 'angular';\r\nimport { Options, GeometryFunction, DrawEvent } from 'ol/interaction/Draw';\r\nimport { Draw } from 'ol/interaction';\r\nimport GeometryType from 'ol/geom/GeometryType';\r\nimport { Collection, Feature } from 'ol';\r\nimport { Geometry } from 'ol/geom';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport { Condition } from 'ol/events/condition';\r\nimport { StyleLike } from 'ol/style/Style';\r\nimport aolMap, { MapComponent } from '../map.component';\r\nimport { DrawInteractionExtend } from './draw.component.extend';\r\n\r\nexport class DrawInteractionComponent extends DrawInteractionExtend\r\n  implements ng.IController, Options {\r\n  private instance: Draw;\r\n  protected host: MapComponent;\r\n\r\n  type: GeometryType;\r\n  clickTolerance?: number;\r\n  features?: Collection<Feature<Geometry>>;\r\n  source?: VectorSource<Geometry>;\r\n  dragVertexDelay?: number;\r\n  snapTolerance?: number;\r\n  stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  finishCondition?: Condition;\r\n  style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  geometryName?: string;\r\n  condition?: Condition;\r\n  freehand?: boolean;\r\n  freehandCondition?: Condition;\r\n  wrapX?: boolean;\r\n\r\n  public onChange = angular.noop;\r\n  public onChangeActive = angular.noop;\r\n  public onDrawEnd = angular.noop;\r\n  public onDrawStart = angular.noop;\r\n  public onPropertyChange = angular.noop;\r\n\r\n  //   constructor(private map: MapComponent) {}\r\n\r\n  $onInit() {\r\n    super.init(this.type);\r\n    this.instance = new Draw(this);\r\n    this.instance.on('change', (event: DrawEvent) => this.onChange({ event }));\r\n    this.instance.on('change:active', (event: DrawEvent) =>\r\n      this.onChangeActive({ event }),\r\n    );\r\n    this.instance.on('drawend', (event: DrawEvent) =>\r\n      this.onDrawEnd({ event }),\r\n    );\r\n    this.instance.on('drawstart', (event: DrawEvent) =>\r\n      this.onDrawStart({ event }),\r\n    );\r\n    this.instance.on('propertychange', (event: DrawEvent) =>\r\n      this.onPropertyChange({ event }),\r\n    );\r\n    this.host.instance.addInteraction(this.instance);\r\n  }\r\n\r\n  $onChanges(changes: ng.IOnChangesObject) {\r\n    let properties: { [index: string]: any } = {};\r\n\r\n    if (!this.instance) {\r\n      return;\r\n    }\r\n    for (let key in changes) {\r\n      if (changes.hasOwnProperty(key)) {\r\n        switch (key) {\r\n          case 'source':\r\n            this.$onDestroy();\r\n            this.$onInit();\r\n            break;\r\n          default:\r\n            properties[key] = changes[key].currentValue;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.instance.setProperties(properties, false);\r\n  }\r\n\r\n  $onDestroy() {\r\n    this.host.instance.removeInteraction(this.instance);\r\n  }\r\n}\r\n\r\nvar component: angular.IComponentOptions = {\r\n  //   template: `\r\n  //         <div ng-include></div>\r\n  //       `,\r\n  bindings: {\r\n    type: '<',\r\n    clickTolerance: '<?',\r\n    features: '<?',\r\n    source: '<?',\r\n    dragVertexDelay: '<?',\r\n    snapTolerance: '<?',\r\n    stopClick: '<?',\r\n    maxPoints: '<?',\r\n    minPoints: '<?',\r\n    finishCondition: '<?',\r\n    style: '<?',\r\n    geometryFunction: '<?',\r\n    geometryName: '<?',\r\n    condition: '<?',\r\n    freehand: '<?',\r\n    freehandCondition: '<?',\r\n    wrapX: '<?',\r\n    onChange: '&?',\r\n    onChangeActive: '&?',\r\n    onDrawEnd: '&?',\r\n    onDrawStart: '&?',\r\n    onPropertyChange: '&?',\r\n  },\r\n  require: {\r\n    host: `^${aolMap.name}`,\r\n  },\r\n  controller: ['$element', DrawInteractionComponent],\r\n};\r\n\r\nexport const aolInteractionDraw = {\r\n  name: 'aolInteractionDraw',\r\n  ...component,\r\n};\r\n","import GeometryType from 'ol/geom/GeometryType';\r\nimport { Options, GeometryFunction } from 'ol/interaction/Draw';\r\nimport { Polygon } from 'ol/geom';\r\n\r\nexport abstract class DrawInteractionExtend implements Options {\r\n  type: any;\r\n  // clickTolerance?: number;\r\n  // features?: Collection<Feature<Geometry>>;\r\n  // source?: VectorSource<Geometry>;\r\n  // dragVertexDelay?: number;\r\n  // snapTolerance?: number;\r\n  // stopClick?: boolean;\r\n  maxPoints?: number;\r\n  minPoints?: number;\r\n  // finishCondition?: Condition;\r\n  // style?: StyleLike;\r\n  geometryFunction?: GeometryFunction;\r\n  // geometryName?: string;\r\n  // condition?: Condition;\r\n  // freehand?: boolean;\r\n  // freehandCondition?: Condition;\r\n  // wrapX?: boolean;\r\n\r\n  init(type: GeometryType | 'Rectangle') {\r\n    switch (type) {\r\n      case 'Rectangle':\r\n        this.__createRectangleParams();\r\n        break;\r\n      default:\r\n        this.type = type;\r\n        break;\r\n    }\r\n  }\r\n\r\n  __createRectangleParams() {\r\n    this.maxPoints = 2;\r\n    this.type = 'LineString';\r\n    this.geometryFunction = (coordinates: any, geometry) => {\r\n      //如果geometry对象不存在或者为空，则创建\r\n      if (!geometry) {\r\n        //多面几何图形下设置\r\n        geometry = new Polygon([]);\r\n      }\r\n      // 开始坐标\r\n      var start = coordinates[0];\r\n      // 结束坐标\r\n      var end = coordinates[1];\r\n      // 根据开始与结束坐标绘制,从起始点，回到起始点\r\n      geometry.setCoordinates([\r\n        [start, [start[0], end[1]], end, [end[0], start[1]], start],\r\n      ]);\r\n      // 返回几何图形坐标进行渲染\r\n      return geometry;\r\n    };\r\n  }\r\n}\r\n"],"sourceRoot":""}